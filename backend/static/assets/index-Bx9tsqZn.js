(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();function Zm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ef={exports:{}},il={},tf={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pi=Symbol.for("react.element"),P0=Symbol.for("react.portal"),D0=Symbol.for("react.fragment"),R0=Symbol.for("react.strict_mode"),A0=Symbol.for("react.profiler"),T0=Symbol.for("react.provider"),z0=Symbol.for("react.context"),M0=Symbol.for("react.forward_ref"),$0=Symbol.for("react.suspense"),F0=Symbol.for("react.memo"),O0=Symbol.for("react.lazy"),Wu=Symbol.iterator;function L0(e){return e===null||typeof e!="object"?null:(e=Wu&&e[Wu]||e["@@iterator"],typeof e=="function"?e:null)}var rf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nf=Object.assign,sf={};function Ss(e,t,r){this.props=e,this.context=t,this.refs=sf,this.updater=r||rf}Ss.prototype.isReactComponent={};Ss.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ss.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function af(){}af.prototype=Ss.prototype;function _c(e,t,r){this.props=e,this.context=t,this.refs=sf,this.updater=r||rf}var Ec=_c.prototype=new af;Ec.constructor=_c;nf(Ec,Ss.prototype);Ec.isPureReactComponent=!0;var qu=Array.isArray,lf=Object.prototype.hasOwnProperty,Cc={current:null},of={key:!0,ref:!0,__self:!0,__source:!0};function cf(e,t,r){var n,i={},a=null,l=null;if(t!=null)for(n in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(a=""+t.key),t)lf.call(t,n)&&!of.hasOwnProperty(n)&&(i[n]=t[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:Pi,type:e,key:a,ref:l,props:i,_owner:Cc.current}}function I0(e,t){return{$$typeof:Pi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Pc(e){return typeof e=="object"&&e!==null&&e.$$typeof===Pi}function V0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Yu=/\/+/g;function Fl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?V0(""+e.key):t.toString(36)}function aa(e,t,r,n,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Pi:case P0:l=!0}}if(l)return l=e,i=i(l),e=n===""?"."+Fl(l,0):n,qu(i)?(r="",e!=null&&(r=e.replace(Yu,"$&/")+"/"),aa(i,t,r,"",function(u){return u})):i!=null&&(Pc(i)&&(i=I0(i,r+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(Yu,"$&/")+"/")+e)),t.push(i)),1;if(l=0,n=n===""?".":n+":",qu(e))for(var o=0;o<e.length;o++){a=e[o];var c=n+Fl(a,o);l+=aa(a,t,r,c,i)}else if(c=L0(e),typeof c=="function")for(e=c.call(e),o=0;!(a=e.next()).done;)a=a.value,c=n+Fl(a,o++),l+=aa(a,t,r,c,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Li(e,t,r){if(e==null)return e;var n=[],i=0;return aa(e,n,"","",function(a){return t.call(r,a,i++)}),n}function U0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var gt={current:null},la={transition:null},B0={ReactCurrentDispatcher:gt,ReactCurrentBatchConfig:la,ReactCurrentOwner:Cc};function uf(){throw Error("act(...) is not supported in production builds of React.")}ge.Children={map:Li,forEach:function(e,t,r){Li(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Li(e,function(){t++}),t},toArray:function(e){return Li(e,function(t){return t})||[]},only:function(e){if(!Pc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ge.Component=Ss;ge.Fragment=D0;ge.Profiler=A0;ge.PureComponent=_c;ge.StrictMode=R0;ge.Suspense=$0;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B0;ge.act=uf;ge.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=nf({},e.props),i=e.key,a=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,l=Cc.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)lf.call(t,c)&&!of.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:Pi,type:e.type,key:i,ref:a,props:n,_owner:l}};ge.createContext=function(e){return e={$$typeof:z0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:T0,_context:e},e.Consumer=e};ge.createElement=cf;ge.createFactory=function(e){var t=cf.bind(null,e);return t.type=e,t};ge.createRef=function(){return{current:null}};ge.forwardRef=function(e){return{$$typeof:M0,render:e}};ge.isValidElement=Pc;ge.lazy=function(e){return{$$typeof:O0,_payload:{_status:-1,_result:e},_init:U0}};ge.memo=function(e,t){return{$$typeof:F0,type:e,compare:t===void 0?null:t}};ge.startTransition=function(e){var t=la.transition;la.transition={};try{e()}finally{la.transition=t}};ge.unstable_act=uf;ge.useCallback=function(e,t){return gt.current.useCallback(e,t)};ge.useContext=function(e){return gt.current.useContext(e)};ge.useDebugValue=function(){};ge.useDeferredValue=function(e){return gt.current.useDeferredValue(e)};ge.useEffect=function(e,t){return gt.current.useEffect(e,t)};ge.useId=function(){return gt.current.useId()};ge.useImperativeHandle=function(e,t,r){return gt.current.useImperativeHandle(e,t,r)};ge.useInsertionEffect=function(e,t){return gt.current.useInsertionEffect(e,t)};ge.useLayoutEffect=function(e,t){return gt.current.useLayoutEffect(e,t)};ge.useMemo=function(e,t){return gt.current.useMemo(e,t)};ge.useReducer=function(e,t,r){return gt.current.useReducer(e,t,r)};ge.useRef=function(e){return gt.current.useRef(e)};ge.useState=function(e){return gt.current.useState(e)};ge.useSyncExternalStore=function(e,t,r){return gt.current.useSyncExternalStore(e,t,r)};ge.useTransition=function(){return gt.current.useTransition()};ge.version="18.3.1";tf.exports=ge;var g=tf.exports;const Jt=Zm(g);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H0=g,W0=Symbol.for("react.element"),q0=Symbol.for("react.fragment"),Y0=Object.prototype.hasOwnProperty,Q0=H0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,J0={key:!0,ref:!0,__self:!0,__source:!0};function df(e,t,r){var n,i={},a=null,l=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(l=t.ref);for(n in t)Y0.call(t,n)&&!J0.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:W0,type:e,key:a,ref:l,props:i,_owner:Q0.current}}il.Fragment=q0;il.jsx=df;il.jsxs=df;ef.exports=il;var s=ef.exports,mf={exports:{}},$t={},ff={exports:{}},hf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(H,J){var X=H.length;H.push(J);e:for(;0<X;){var ne=X-1>>>1,re=H[ne];if(0<i(re,J))H[ne]=J,H[X]=re,X=ne;else break e}}function r(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var J=H[0],X=H.pop();if(X!==J){H[0]=X;e:for(var ne=0,re=H.length,me=re>>>1;ne<me;){var se=2*(ne+1)-1,F=H[se],ee=se+1,ie=H[ee];if(0>i(F,X))ee<re&&0>i(ie,F)?(H[ne]=ie,H[ee]=X,ne=ee):(H[ne]=F,H[se]=X,ne=se);else if(ee<re&&0>i(ie,X))H[ne]=ie,H[ee]=X,ne=ee;else break e}}return J}function i(H,J){var X=H.sortIndex-J.sortIndex;return X!==0?X:H.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],u=[],m=1,h=null,f=3,j=!1,y=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,d=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(H){for(var J=r(u);J!==null;){if(J.callback===null)n(u);else if(J.startTime<=H)n(u),J.sortIndex=J.expirationTime,t(c,J);else break;J=r(u)}}function N(H){if(b=!1,p(H),!y)if(r(c)!==null)y=!0,W(C);else{var J=r(u);J!==null&&O(N,J.startTime-H)}}function C(H,J){y=!1,b&&(b=!1,x(D),D=-1),j=!0;var X=f;try{for(p(J),h=r(c);h!==null&&(!(h.expirationTime>J)||H&&!M());){var ne=h.callback;if(typeof ne=="function"){h.callback=null,f=h.priorityLevel;var re=ne(h.expirationTime<=J);J=e.unstable_now(),typeof re=="function"?h.callback=re:h===r(c)&&n(c),p(J)}else n(c);h=r(c)}if(h!==null)var me=!0;else{var se=r(u);se!==null&&O(N,se.startTime-J),me=!1}return me}finally{h=null,f=X,j=!1}}var z=!1,E=null,D=-1,P=5,S=-1;function M(){return!(e.unstable_now()-S<P)}function R(){if(E!==null){var H=e.unstable_now();S=H;var J=!0;try{J=E(!0,H)}finally{J?B():(z=!1,E=null)}}else z=!1}var B;if(typeof d=="function")B=function(){d(R)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,U=te.port2;te.port1.onmessage=R,B=function(){U.postMessage(null)}}else B=function(){w(R,0)};function W(H){E=H,z||(z=!0,B())}function O(H,J){D=w(function(){H(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_continueExecution=function(){y||j||(y=!0,W(C))},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(H){switch(f){case 1:case 2:case 3:var J=3;break;default:J=f}var X=f;f=J;try{return H()}finally{f=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(H,J){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var X=f;f=H;try{return J()}finally{f=X}},e.unstable_scheduleCallback=function(H,J,X){var ne=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ne+X:ne):X=ne,H){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=X+re,H={id:m++,callback:J,priorityLevel:H,startTime:X,expirationTime:re,sortIndex:-1},X>ne?(H.sortIndex=X,t(u,H),r(c)===null&&H===r(u)&&(b?(x(D),D=-1):b=!0,O(N,X-ne))):(H.sortIndex=re,t(c,H),y||j||(y=!0,W(C))),H},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(H){var J=f;return function(){var X=f;f=J;try{return H.apply(this,arguments)}finally{f=X}}}})(hf);ff.exports=hf;var K0=ff.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G0=g,Mt=K0;function K(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pf=new Set,oi={};function Fn(e,t){ps(e,t),ps(e+"Capture",t)}function ps(e,t){for(oi[e]=t,e=0;e<t.length;e++)pf.add(t[e])}var $r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vo=Object.prototype.hasOwnProperty,X0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qu={},Ju={};function Z0(e){return vo.call(Ju,e)?!0:vo.call(Qu,e)?!1:X0.test(e)?Ju[e]=!0:(Qu[e]=!0,!1)}function ex(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function tx(e,t,r,n){if(t===null||typeof t>"u"||ex(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function yt(e,t,r,n,i,a,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=l}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){st[e]=new yt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];st[t]=new yt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){st[e]=new yt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){st[e]=new yt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){st[e]=new yt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){st[e]=new yt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){st[e]=new yt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){st[e]=new yt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){st[e]=new yt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Dc=/[\-:]([a-z])/g;function Rc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Dc,Rc);st[t]=new yt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Dc,Rc);st[t]=new yt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Dc,Rc);st[t]=new yt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){st[e]=new yt(e,1,!1,e.toLowerCase(),null,!1,!1)});st.xlinkHref=new yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){st[e]=new yt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ac(e,t,r,n){var i=st.hasOwnProperty(t)?st[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(tx(t,r,i,n)&&(r=null),n||i===null?Z0(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Ur=G0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ii=Symbol.for("react.element"),Qn=Symbol.for("react.portal"),Jn=Symbol.for("react.fragment"),Tc=Symbol.for("react.strict_mode"),bo=Symbol.for("react.profiler"),xf=Symbol.for("react.provider"),gf=Symbol.for("react.context"),zc=Symbol.for("react.forward_ref"),wo=Symbol.for("react.suspense"),jo=Symbol.for("react.suspense_list"),Mc=Symbol.for("react.memo"),Wr=Symbol.for("react.lazy"),yf=Symbol.for("react.offscreen"),Ku=Symbol.iterator;function Ts(e){return e===null||typeof e!="object"?null:(e=Ku&&e[Ku]||e["@@iterator"],typeof e=="function"?e:null)}var Me=Object.assign,Ol;function qs(e){if(Ol===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Ol=t&&t[1]||""}return`
`+Ol+e}var Ll=!1;function Il(e,t){if(!e||Ll)return"";Ll=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=n.stack.split(`
`),l=i.length-1,o=a.length-1;1<=l&&0<=o&&i[l]!==a[o];)o--;for(;1<=l&&0<=o;l--,o--)if(i[l]!==a[o]){if(l!==1||o!==1)do if(l--,o--,0>o||i[l]!==a[o]){var c=`
`+i[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{Ll=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?qs(e):""}function rx(e){switch(e.tag){case 5:return qs(e.type);case 16:return qs("Lazy");case 13:return qs("Suspense");case 19:return qs("SuspenseList");case 0:case 2:case 15:return e=Il(e.type,!1),e;case 11:return e=Il(e.type.render,!1),e;case 1:return e=Il(e.type,!0),e;default:return""}}function No(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Jn:return"Fragment";case Qn:return"Portal";case bo:return"Profiler";case Tc:return"StrictMode";case wo:return"Suspense";case jo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case gf:return(e.displayName||"Context")+".Consumer";case xf:return(e._context.displayName||"Context")+".Provider";case zc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Mc:return t=e.displayName||null,t!==null?t:No(e.type)||"Memo";case Wr:t=e._payload,e=e._init;try{return No(e(t))}catch{}}return null}function nx(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return No(t);case 8:return t===Tc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function on(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function sx(e){var t=vf(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(l){n=""+l,a.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Vi(e){e._valueTracker||(e._valueTracker=sx(e))}function bf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=vf(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function _a(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function So(e,t){var r=t.checked;return Me({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Gu(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=on(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function wf(e,t){t=t.checked,t!=null&&Ac(e,"checked",t,!1)}function ko(e,t){wf(e,t);var r=on(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?_o(e,t.type,r):t.hasOwnProperty("defaultValue")&&_o(e,t.type,on(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Xu(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function _o(e,t,r){(t!=="number"||_a(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ys=Array.isArray;function ls(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+on(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Eo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(K(91));return Me({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Zu(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(K(92));if(Ys(r)){if(1<r.length)throw Error(K(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:on(r)}}function jf(e,t){var r=on(t.value),n=on(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function ed(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Nf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Co(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Nf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ui,Sf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ui=Ui||document.createElement("div"),Ui.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ui.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ci(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Gs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ix=["Webkit","ms","Moz","O"];Object.keys(Gs).forEach(function(e){ix.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Gs[t]=Gs[e]})});function kf(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Gs.hasOwnProperty(e)&&Gs[e]?(""+t).trim():t+"px"}function _f(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=kf(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var ax=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Po(e,t){if(t){if(ax[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(K(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(K(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(K(61))}if(t.style!=null&&typeof t.style!="object")throw Error(K(62))}}function Do(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ro=null;function $c(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ao=null,os=null,cs=null;function td(e){if(e=Ai(e)){if(typeof Ao!="function")throw Error(K(280));var t=e.stateNode;t&&(t=ul(t),Ao(e.stateNode,e.type,t))}}function Ef(e){os?cs?cs.push(e):cs=[e]:os=e}function Cf(){if(os){var e=os,t=cs;if(cs=os=null,td(e),t)for(e=0;e<t.length;e++)td(t[e])}}function Pf(e,t){return e(t)}function Df(){}var Vl=!1;function Rf(e,t,r){if(Vl)return e(t,r);Vl=!0;try{return Pf(e,t,r)}finally{Vl=!1,(os!==null||cs!==null)&&(Df(),Cf())}}function ui(e,t){var r=e.stateNode;if(r===null)return null;var n=ul(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(K(231,t,typeof r));return r}var To=!1;if($r)try{var zs={};Object.defineProperty(zs,"passive",{get:function(){To=!0}}),window.addEventListener("test",zs,zs),window.removeEventListener("test",zs,zs)}catch{To=!1}function lx(e,t,r,n,i,a,l,o,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(m){this.onError(m)}}var Xs=!1,Ea=null,Ca=!1,zo=null,ox={onError:function(e){Xs=!0,Ea=e}};function cx(e,t,r,n,i,a,l,o,c){Xs=!1,Ea=null,lx.apply(ox,arguments)}function ux(e,t,r,n,i,a,l,o,c){if(cx.apply(this,arguments),Xs){if(Xs){var u=Ea;Xs=!1,Ea=null}else throw Error(K(198));Ca||(Ca=!0,zo=u)}}function On(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Af(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function rd(e){if(On(e)!==e)throw Error(K(188))}function dx(e){var t=e.alternate;if(!t){if(t=On(e),t===null)throw Error(K(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return rd(i),e;if(a===n)return rd(i),t;a=a.sibling}throw Error(K(188))}if(r.return!==n.return)r=i,n=a;else{for(var l=!1,o=i.child;o;){if(o===r){l=!0,r=i,n=a;break}if(o===n){l=!0,n=i,r=a;break}o=o.sibling}if(!l){for(o=a.child;o;){if(o===r){l=!0,r=a,n=i;break}if(o===n){l=!0,n=a,r=i;break}o=o.sibling}if(!l)throw Error(K(189))}}if(r.alternate!==n)throw Error(K(190))}if(r.tag!==3)throw Error(K(188));return r.stateNode.current===r?e:t}function Tf(e){return e=dx(e),e!==null?zf(e):null}function zf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=zf(e);if(t!==null)return t;e=e.sibling}return null}var Mf=Mt.unstable_scheduleCallback,nd=Mt.unstable_cancelCallback,mx=Mt.unstable_shouldYield,fx=Mt.unstable_requestPaint,Oe=Mt.unstable_now,hx=Mt.unstable_getCurrentPriorityLevel,Fc=Mt.unstable_ImmediatePriority,$f=Mt.unstable_UserBlockingPriority,Pa=Mt.unstable_NormalPriority,px=Mt.unstable_LowPriority,Ff=Mt.unstable_IdlePriority,al=null,Nr=null;function xx(e){if(Nr&&typeof Nr.onCommitFiberRoot=="function")try{Nr.onCommitFiberRoot(al,e,void 0,(e.current.flags&128)===128)}catch{}}var rr=Math.clz32?Math.clz32:vx,gx=Math.log,yx=Math.LN2;function vx(e){return e>>>=0,e===0?32:31-(gx(e)/yx|0)|0}var Bi=64,Hi=4194304;function Qs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Da(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,a=e.pingedLanes,l=r&268435455;if(l!==0){var o=l&~i;o!==0?n=Qs(o):(a&=l,a!==0&&(n=Qs(a)))}else l=r&~i,l!==0?n=Qs(l):a!==0&&(n=Qs(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-rr(t),i=1<<r,n|=e[r],t&=~i;return n}function bx(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wx(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-rr(a),o=1<<l,c=i[l];c===-1?(!(o&r)||o&n)&&(i[l]=bx(o,t)):c<=t&&(e.expiredLanes|=o),a&=~o}}function Mo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Of(){var e=Bi;return Bi<<=1,!(Bi&4194240)&&(Bi=64),e}function Ul(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Di(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-rr(t),e[t]=r}function jx(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-rr(r),a=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~a}}function Oc(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-rr(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var Se=0;function Lf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var If,Lc,Vf,Uf,Bf,$o=!1,Wi=[],Xr=null,Zr=null,en=null,di=new Map,mi=new Map,Yr=[],Nx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sd(e,t){switch(e){case"focusin":case"focusout":Xr=null;break;case"dragenter":case"dragleave":Zr=null;break;case"mouseover":case"mouseout":en=null;break;case"pointerover":case"pointerout":di.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":mi.delete(t.pointerId)}}function Ms(e,t,r,n,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Ai(t),t!==null&&Lc(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Sx(e,t,r,n,i){switch(t){case"focusin":return Xr=Ms(Xr,e,t,r,n,i),!0;case"dragenter":return Zr=Ms(Zr,e,t,r,n,i),!0;case"mouseover":return en=Ms(en,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;return di.set(a,Ms(di.get(a)||null,e,t,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,mi.set(a,Ms(mi.get(a)||null,e,t,r,n,i)),!0}return!1}function Hf(e){var t=bn(e.target);if(t!==null){var r=On(t);if(r!==null){if(t=r.tag,t===13){if(t=Af(r),t!==null){e.blockedOn=t,Bf(e.priority,function(){Vf(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function oa(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Fo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Ro=n,r.target.dispatchEvent(n),Ro=null}else return t=Ai(r),t!==null&&Lc(t),e.blockedOn=r,!1;t.shift()}return!0}function id(e,t,r){oa(e)&&r.delete(t)}function kx(){$o=!1,Xr!==null&&oa(Xr)&&(Xr=null),Zr!==null&&oa(Zr)&&(Zr=null),en!==null&&oa(en)&&(en=null),di.forEach(id),mi.forEach(id)}function $s(e,t){e.blockedOn===t&&(e.blockedOn=null,$o||($o=!0,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,kx)))}function fi(e){function t(i){return $s(i,e)}if(0<Wi.length){$s(Wi[0],e);for(var r=1;r<Wi.length;r++){var n=Wi[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Xr!==null&&$s(Xr,e),Zr!==null&&$s(Zr,e),en!==null&&$s(en,e),di.forEach(t),mi.forEach(t),r=0;r<Yr.length;r++)n=Yr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Yr.length&&(r=Yr[0],r.blockedOn===null);)Hf(r),r.blockedOn===null&&Yr.shift()}var us=Ur.ReactCurrentBatchConfig,Ra=!0;function _x(e,t,r,n){var i=Se,a=us.transition;us.transition=null;try{Se=1,Ic(e,t,r,n)}finally{Se=i,us.transition=a}}function Ex(e,t,r,n){var i=Se,a=us.transition;us.transition=null;try{Se=4,Ic(e,t,r,n)}finally{Se=i,us.transition=a}}function Ic(e,t,r,n){if(Ra){var i=Fo(e,t,r,n);if(i===null)Xl(e,t,n,Aa,r),sd(e,n);else if(Sx(i,e,t,r,n))n.stopPropagation();else if(sd(e,n),t&4&&-1<Nx.indexOf(e)){for(;i!==null;){var a=Ai(i);if(a!==null&&If(a),a=Fo(e,t,r,n),a===null&&Xl(e,t,n,Aa,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else Xl(e,t,n,null,r)}}var Aa=null;function Fo(e,t,r,n){if(Aa=null,e=$c(n),e=bn(e),e!==null)if(t=On(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Af(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Aa=e,null}function Wf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hx()){case Fc:return 1;case $f:return 4;case Pa:case px:return 16;case Ff:return 536870912;default:return 16}default:return 16}}var Kr=null,Vc=null,ca=null;function qf(){if(ca)return ca;var e,t=Vc,r=t.length,n,i="value"in Kr?Kr.value:Kr.textContent,a=i.length;for(e=0;e<r&&t[e]===i[e];e++);var l=r-e;for(n=1;n<=l&&t[r-n]===i[a-n];n++);return ca=i.slice(e,1<n?1-n:void 0)}function ua(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function qi(){return!0}function ad(){return!1}function Ft(e){function t(r,n,i,a,l){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?qi:ad,this.isPropagationStopped=ad,this}return Me(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=qi)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=qi)},persist:function(){},isPersistent:qi}),t}var ks={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uc=Ft(ks),Ri=Me({},ks,{view:0,detail:0}),Cx=Ft(Ri),Bl,Hl,Fs,ll=Me({},Ri,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Fs&&(Fs&&e.type==="mousemove"?(Bl=e.screenX-Fs.screenX,Hl=e.screenY-Fs.screenY):Hl=Bl=0,Fs=e),Bl)},movementY:function(e){return"movementY"in e?e.movementY:Hl}}),ld=Ft(ll),Px=Me({},ll,{dataTransfer:0}),Dx=Ft(Px),Rx=Me({},Ri,{relatedTarget:0}),Wl=Ft(Rx),Ax=Me({},ks,{animationName:0,elapsedTime:0,pseudoElement:0}),Tx=Ft(Ax),zx=Me({},ks,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Mx=Ft(zx),$x=Me({},ks,{data:0}),od=Ft($x),Fx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ox={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ix(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Lx[e])?!!t[e]:!1}function Bc(){return Ix}var Vx=Me({},Ri,{key:function(e){if(e.key){var t=Fx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ua(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ox[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bc,charCode:function(e){return e.type==="keypress"?ua(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ua(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ux=Ft(Vx),Bx=Me({},ll,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cd=Ft(Bx),Hx=Me({},Ri,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bc}),Wx=Ft(Hx),qx=Me({},ks,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yx=Ft(qx),Qx=Me({},ll,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Jx=Ft(Qx),Kx=[9,13,27,32],Hc=$r&&"CompositionEvent"in window,Zs=null;$r&&"documentMode"in document&&(Zs=document.documentMode);var Gx=$r&&"TextEvent"in window&&!Zs,Yf=$r&&(!Hc||Zs&&8<Zs&&11>=Zs),ud=" ",dd=!1;function Qf(e,t){switch(e){case"keyup":return Kx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Kn=!1;function Xx(e,t){switch(e){case"compositionend":return Jf(t);case"keypress":return t.which!==32?null:(dd=!0,ud);case"textInput":return e=t.data,e===ud&&dd?null:e;default:return null}}function Zx(e,t){if(Kn)return e==="compositionend"||!Hc&&Qf(e,t)?(e=qf(),ca=Vc=Kr=null,Kn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Yf&&t.locale!=="ko"?null:t.data;default:return null}}var eg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function md(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!eg[e.type]:t==="textarea"}function Kf(e,t,r,n){Ef(n),t=Ta(t,"onChange"),0<t.length&&(r=new Uc("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var ei=null,hi=null;function tg(e){lh(e,0)}function ol(e){var t=Zn(e);if(bf(t))return e}function rg(e,t){if(e==="change")return t}var Gf=!1;if($r){var ql;if($r){var Yl="oninput"in document;if(!Yl){var fd=document.createElement("div");fd.setAttribute("oninput","return;"),Yl=typeof fd.oninput=="function"}ql=Yl}else ql=!1;Gf=ql&&(!document.documentMode||9<document.documentMode)}function hd(){ei&&(ei.detachEvent("onpropertychange",Xf),hi=ei=null)}function Xf(e){if(e.propertyName==="value"&&ol(hi)){var t=[];Kf(t,hi,e,$c(e)),Rf(tg,t)}}function ng(e,t,r){e==="focusin"?(hd(),ei=t,hi=r,ei.attachEvent("onpropertychange",Xf)):e==="focusout"&&hd()}function sg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ol(hi)}function ig(e,t){if(e==="click")return ol(t)}function ag(e,t){if(e==="input"||e==="change")return ol(t)}function lg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var sr=typeof Object.is=="function"?Object.is:lg;function pi(e,t){if(sr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!vo.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function pd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function xd(e,t){var r=pd(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=pd(r)}}function Zf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Zf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function eh(){for(var e=window,t=_a();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=_a(e.document)}return t}function Wc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function og(e){var t=eh(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Zf(r.ownerDocument.documentElement,r)){if(n!==null&&Wc(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!e.extend&&a>n&&(i=n,n=a,a=i),i=xd(r,a);var l=xd(r,n);i&&l&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var cg=$r&&"documentMode"in document&&11>=document.documentMode,Gn=null,Oo=null,ti=null,Lo=!1;function gd(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Lo||Gn==null||Gn!==_a(n)||(n=Gn,"selectionStart"in n&&Wc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ti&&pi(ti,n)||(ti=n,n=Ta(Oo,"onSelect"),0<n.length&&(t=new Uc("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Gn)))}function Yi(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Xn={animationend:Yi("Animation","AnimationEnd"),animationiteration:Yi("Animation","AnimationIteration"),animationstart:Yi("Animation","AnimationStart"),transitionend:Yi("Transition","TransitionEnd")},Ql={},th={};$r&&(th=document.createElement("div").style,"AnimationEvent"in window||(delete Xn.animationend.animation,delete Xn.animationiteration.animation,delete Xn.animationstart.animation),"TransitionEvent"in window||delete Xn.transitionend.transition);function cl(e){if(Ql[e])return Ql[e];if(!Xn[e])return e;var t=Xn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in th)return Ql[e]=t[r];return e}var rh=cl("animationend"),nh=cl("animationiteration"),sh=cl("animationstart"),ih=cl("transitionend"),ah=new Map,yd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dn(e,t){ah.set(e,t),Fn(t,[e])}for(var Jl=0;Jl<yd.length;Jl++){var Kl=yd[Jl],ug=Kl.toLowerCase(),dg=Kl[0].toUpperCase()+Kl.slice(1);dn(ug,"on"+dg)}dn(rh,"onAnimationEnd");dn(nh,"onAnimationIteration");dn(sh,"onAnimationStart");dn("dblclick","onDoubleClick");dn("focusin","onFocus");dn("focusout","onBlur");dn(ih,"onTransitionEnd");ps("onMouseEnter",["mouseout","mouseover"]);ps("onMouseLeave",["mouseout","mouseover"]);ps("onPointerEnter",["pointerout","pointerover"]);ps("onPointerLeave",["pointerout","pointerover"]);Fn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Js="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Js));function vd(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,ux(n,t,void 0,e),e.currentTarget=null}function lh(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var l=n.length-1;0<=l;l--){var o=n[l],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==a&&i.isPropagationStopped())break e;vd(i,o,u),a=c}else for(l=0;l<n.length;l++){if(o=n[l],c=o.instance,u=o.currentTarget,o=o.listener,c!==a&&i.isPropagationStopped())break e;vd(i,o,u),a=c}}}if(Ca)throw e=zo,Ca=!1,zo=null,e}function Ee(e,t){var r=t[Ho];r===void 0&&(r=t[Ho]=new Set);var n=e+"__bubble";r.has(n)||(oh(t,e,2,!1),r.add(n))}function Gl(e,t,r){var n=0;t&&(n|=4),oh(r,e,n,t)}var Qi="_reactListening"+Math.random().toString(36).slice(2);function xi(e){if(!e[Qi]){e[Qi]=!0,pf.forEach(function(r){r!=="selectionchange"&&(mg.has(r)||Gl(r,!1,e),Gl(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Qi]||(t[Qi]=!0,Gl("selectionchange",!1,t))}}function oh(e,t,r,n){switch(Wf(t)){case 1:var i=_x;break;case 4:i=Ex;break;default:i=Ic}r=i.bind(null,t,r,e),i=void 0,!To||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Xl(e,t,r,n,i){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(l===4)for(l=n.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;l=l.return}for(;o!==null;){if(l=bn(o),l===null)return;if(c=l.tag,c===5||c===6){n=a=l;continue e}o=o.parentNode}}n=n.return}Rf(function(){var u=a,m=$c(r),h=[];e:{var f=ah.get(e);if(f!==void 0){var j=Uc,y=e;switch(e){case"keypress":if(ua(r)===0)break e;case"keydown":case"keyup":j=Ux;break;case"focusin":y="focus",j=Wl;break;case"focusout":y="blur",j=Wl;break;case"beforeblur":case"afterblur":j=Wl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=ld;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=Dx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=Wx;break;case rh:case nh:case sh:j=Tx;break;case ih:j=Yx;break;case"scroll":j=Cx;break;case"wheel":j=Jx;break;case"copy":case"cut":case"paste":j=Mx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=cd}var b=(t&4)!==0,w=!b&&e==="scroll",x=b?f!==null?f+"Capture":null:f;b=[];for(var d=u,p;d!==null;){p=d;var N=p.stateNode;if(p.tag===5&&N!==null&&(p=N,x!==null&&(N=ui(d,x),N!=null&&b.push(gi(d,N,p)))),w)break;d=d.return}0<b.length&&(f=new j(f,y,null,r,m),h.push({event:f,listeners:b}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",f&&r!==Ro&&(y=r.relatedTarget||r.fromElement)&&(bn(y)||y[Fr]))break e;if((j||f)&&(f=m.window===m?m:(f=m.ownerDocument)?f.defaultView||f.parentWindow:window,j?(y=r.relatedTarget||r.toElement,j=u,y=y?bn(y):null,y!==null&&(w=On(y),y!==w||y.tag!==5&&y.tag!==6)&&(y=null)):(j=null,y=u),j!==y)){if(b=ld,N="onMouseLeave",x="onMouseEnter",d="mouse",(e==="pointerout"||e==="pointerover")&&(b=cd,N="onPointerLeave",x="onPointerEnter",d="pointer"),w=j==null?f:Zn(j),p=y==null?f:Zn(y),f=new b(N,d+"leave",j,r,m),f.target=w,f.relatedTarget=p,N=null,bn(m)===u&&(b=new b(x,d+"enter",y,r,m),b.target=p,b.relatedTarget=w,N=b),w=N,j&&y)t:{for(b=j,x=y,d=0,p=b;p;p=Bn(p))d++;for(p=0,N=x;N;N=Bn(N))p++;for(;0<d-p;)b=Bn(b),d--;for(;0<p-d;)x=Bn(x),p--;for(;d--;){if(b===x||x!==null&&b===x.alternate)break t;b=Bn(b),x=Bn(x)}b=null}else b=null;j!==null&&bd(h,f,j,b,!1),y!==null&&w!==null&&bd(h,w,y,b,!0)}}e:{if(f=u?Zn(u):window,j=f.nodeName&&f.nodeName.toLowerCase(),j==="select"||j==="input"&&f.type==="file")var C=rg;else if(md(f))if(Gf)C=ag;else{C=sg;var z=ng}else(j=f.nodeName)&&j.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=ig);if(C&&(C=C(e,u))){Kf(h,C,r,m);break e}z&&z(e,f,u),e==="focusout"&&(z=f._wrapperState)&&z.controlled&&f.type==="number"&&_o(f,"number",f.value)}switch(z=u?Zn(u):window,e){case"focusin":(md(z)||z.contentEditable==="true")&&(Gn=z,Oo=u,ti=null);break;case"focusout":ti=Oo=Gn=null;break;case"mousedown":Lo=!0;break;case"contextmenu":case"mouseup":case"dragend":Lo=!1,gd(h,r,m);break;case"selectionchange":if(cg)break;case"keydown":case"keyup":gd(h,r,m)}var E;if(Hc)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Kn?Qf(e,r)&&(D="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(D="onCompositionStart");D&&(Yf&&r.locale!=="ko"&&(Kn||D!=="onCompositionStart"?D==="onCompositionEnd"&&Kn&&(E=qf()):(Kr=m,Vc="value"in Kr?Kr.value:Kr.textContent,Kn=!0)),z=Ta(u,D),0<z.length&&(D=new od(D,e,null,r,m),h.push({event:D,listeners:z}),E?D.data=E:(E=Jf(r),E!==null&&(D.data=E)))),(E=Gx?Xx(e,r):Zx(e,r))&&(u=Ta(u,"onBeforeInput"),0<u.length&&(m=new od("onBeforeInput","beforeinput",null,r,m),h.push({event:m,listeners:u}),m.data=E))}lh(h,t)})}function gi(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ta(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=ui(e,r),a!=null&&n.unshift(gi(e,a,i)),a=ui(e,t),a!=null&&n.push(gi(e,a,i))),e=e.return}return n}function Bn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function bd(e,t,r,n,i){for(var a=t._reactName,l=[];r!==null&&r!==n;){var o=r,c=o.alternate,u=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&u!==null&&(o=u,i?(c=ui(r,a),c!=null&&l.unshift(gi(r,c,o))):i||(c=ui(r,a),c!=null&&l.push(gi(r,c,o)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var fg=/\r\n?/g,hg=/\u0000|\uFFFD/g;function wd(e){return(typeof e=="string"?e:""+e).replace(fg,`
`).replace(hg,"")}function Ji(e,t,r){if(t=wd(t),wd(e)!==t&&r)throw Error(K(425))}function za(){}var Io=null,Vo=null;function Uo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Bo=typeof setTimeout=="function"?setTimeout:void 0,pg=typeof clearTimeout=="function"?clearTimeout:void 0,jd=typeof Promise=="function"?Promise:void 0,xg=typeof queueMicrotask=="function"?queueMicrotask:typeof jd<"u"?function(e){return jd.resolve(null).then(e).catch(gg)}:Bo;function gg(e){setTimeout(function(){throw e})}function Zl(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),fi(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);fi(t)}function tn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Nd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var _s=Math.random().toString(36).slice(2),pr="__reactFiber$"+_s,yi="__reactProps$"+_s,Fr="__reactContainer$"+_s,Ho="__reactEvents$"+_s,yg="__reactListeners$"+_s,vg="__reactHandles$"+_s;function bn(e){var t=e[pr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Fr]||r[pr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Nd(e);e!==null;){if(r=e[pr])return r;e=Nd(e)}return t}e=r,r=e.parentNode}return null}function Ai(e){return e=e[pr]||e[Fr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(K(33))}function ul(e){return e[yi]||null}var Wo=[],es=-1;function mn(e){return{current:e}}function Ce(e){0>es||(e.current=Wo[es],Wo[es]=null,es--)}function _e(e,t){es++,Wo[es]=e.current,e.current=t}var cn={},dt=mn(cn),St=mn(!1),Dn=cn;function xs(e,t){var r=e.type.contextTypes;if(!r)return cn;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function kt(e){return e=e.childContextTypes,e!=null}function Ma(){Ce(St),Ce(dt)}function Sd(e,t,r){if(dt.current!==cn)throw Error(K(168));_e(dt,t),_e(St,r)}function ch(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(K(108,nx(e)||"Unknown",i));return Me({},r,n)}function $a(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||cn,Dn=dt.current,_e(dt,e),_e(St,St.current),!0}function kd(e,t,r){var n=e.stateNode;if(!n)throw Error(K(169));r?(e=ch(e,t,Dn),n.__reactInternalMemoizedMergedChildContext=e,Ce(St),Ce(dt),_e(dt,e)):Ce(St),_e(St,r)}var Dr=null,dl=!1,eo=!1;function uh(e){Dr===null?Dr=[e]:Dr.push(e)}function bg(e){dl=!0,uh(e)}function fn(){if(!eo&&Dr!==null){eo=!0;var e=0,t=Se;try{var r=Dr;for(Se=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Dr=null,dl=!1}catch(i){throw Dr!==null&&(Dr=Dr.slice(e+1)),Mf(Fc,fn),i}finally{Se=t,eo=!1}}return null}var ts=[],rs=0,Fa=null,Oa=0,Lt=[],It=0,Rn=null,Rr=1,Ar="";function xn(e,t){ts[rs++]=Oa,ts[rs++]=Fa,Fa=e,Oa=t}function dh(e,t,r){Lt[It++]=Rr,Lt[It++]=Ar,Lt[It++]=Rn,Rn=e;var n=Rr;e=Ar;var i=32-rr(n)-1;n&=~(1<<i),r+=1;var a=32-rr(t)+i;if(30<a){var l=i-i%5;a=(n&(1<<l)-1).toString(32),n>>=l,i-=l,Rr=1<<32-rr(t)+i|r<<i|n,Ar=a+e}else Rr=1<<a|r<<i|n,Ar=e}function qc(e){e.return!==null&&(xn(e,1),dh(e,1,0))}function Yc(e){for(;e===Fa;)Fa=ts[--rs],ts[rs]=null,Oa=ts[--rs],ts[rs]=null;for(;e===Rn;)Rn=Lt[--It],Lt[It]=null,Ar=Lt[--It],Lt[It]=null,Rr=Lt[--It],Lt[It]=null}var Tt=null,Rt=null,De=!1,Zt=null;function mh(e,t){var r=Ut(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function _d(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Tt=e,Rt=tn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Tt=e,Rt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Rn!==null?{id:Rr,overflow:Ar}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ut(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Tt=e,Rt=null,!0):!1;default:return!1}}function qo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Yo(e){if(De){var t=Rt;if(t){var r=t;if(!_d(e,t)){if(qo(e))throw Error(K(418));t=tn(r.nextSibling);var n=Tt;t&&_d(e,t)?mh(n,r):(e.flags=e.flags&-4097|2,De=!1,Tt=e)}}else{if(qo(e))throw Error(K(418));e.flags=e.flags&-4097|2,De=!1,Tt=e}}}function Ed(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Tt=e}function Ki(e){if(e!==Tt)return!1;if(!De)return Ed(e),De=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Uo(e.type,e.memoizedProps)),t&&(t=Rt)){if(qo(e))throw fh(),Error(K(418));for(;t;)mh(e,t),t=tn(t.nextSibling)}if(Ed(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(K(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Rt=tn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Rt=null}}else Rt=Tt?tn(e.stateNode.nextSibling):null;return!0}function fh(){for(var e=Rt;e;)e=tn(e.nextSibling)}function gs(){Rt=Tt=null,De=!1}function Qc(e){Zt===null?Zt=[e]:Zt.push(e)}var wg=Ur.ReactCurrentBatchConfig;function Os(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(K(309));var n=r.stateNode}if(!n)throw Error(K(147,e));var i=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(l){var o=i.refs;l===null?delete o[a]:o[a]=l},t._stringRef=a,t)}if(typeof e!="string")throw Error(K(284));if(!r._owner)throw Error(K(290,e))}return e}function Gi(e,t){throw e=Object.prototype.toString.call(t),Error(K(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Cd(e){var t=e._init;return t(e._payload)}function hh(e){function t(x,d){if(e){var p=x.deletions;p===null?(x.deletions=[d],x.flags|=16):p.push(d)}}function r(x,d){if(!e)return null;for(;d!==null;)t(x,d),d=d.sibling;return null}function n(x,d){for(x=new Map;d!==null;)d.key!==null?x.set(d.key,d):x.set(d.index,d),d=d.sibling;return x}function i(x,d){return x=an(x,d),x.index=0,x.sibling=null,x}function a(x,d,p){return x.index=p,e?(p=x.alternate,p!==null?(p=p.index,p<d?(x.flags|=2,d):p):(x.flags|=2,d)):(x.flags|=1048576,d)}function l(x){return e&&x.alternate===null&&(x.flags|=2),x}function o(x,d,p,N){return d===null||d.tag!==6?(d=lo(p,x.mode,N),d.return=x,d):(d=i(d,p),d.return=x,d)}function c(x,d,p,N){var C=p.type;return C===Jn?m(x,d,p.props.children,N,p.key):d!==null&&(d.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Wr&&Cd(C)===d.type)?(N=i(d,p.props),N.ref=Os(x,d,p),N.return=x,N):(N=ga(p.type,p.key,p.props,null,x.mode,N),N.ref=Os(x,d,p),N.return=x,N)}function u(x,d,p,N){return d===null||d.tag!==4||d.stateNode.containerInfo!==p.containerInfo||d.stateNode.implementation!==p.implementation?(d=oo(p,x.mode,N),d.return=x,d):(d=i(d,p.children||[]),d.return=x,d)}function m(x,d,p,N,C){return d===null||d.tag!==7?(d=En(p,x.mode,N,C),d.return=x,d):(d=i(d,p),d.return=x,d)}function h(x,d,p){if(typeof d=="string"&&d!==""||typeof d=="number")return d=lo(""+d,x.mode,p),d.return=x,d;if(typeof d=="object"&&d!==null){switch(d.$$typeof){case Ii:return p=ga(d.type,d.key,d.props,null,x.mode,p),p.ref=Os(x,null,d),p.return=x,p;case Qn:return d=oo(d,x.mode,p),d.return=x,d;case Wr:var N=d._init;return h(x,N(d._payload),p)}if(Ys(d)||Ts(d))return d=En(d,x.mode,p,null),d.return=x,d;Gi(x,d)}return null}function f(x,d,p,N){var C=d!==null?d.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return C!==null?null:o(x,d,""+p,N);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Ii:return p.key===C?c(x,d,p,N):null;case Qn:return p.key===C?u(x,d,p,N):null;case Wr:return C=p._init,f(x,d,C(p._payload),N)}if(Ys(p)||Ts(p))return C!==null?null:m(x,d,p,N,null);Gi(x,p)}return null}function j(x,d,p,N,C){if(typeof N=="string"&&N!==""||typeof N=="number")return x=x.get(p)||null,o(d,x,""+N,C);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Ii:return x=x.get(N.key===null?p:N.key)||null,c(d,x,N,C);case Qn:return x=x.get(N.key===null?p:N.key)||null,u(d,x,N,C);case Wr:var z=N._init;return j(x,d,p,z(N._payload),C)}if(Ys(N)||Ts(N))return x=x.get(p)||null,m(d,x,N,C,null);Gi(d,N)}return null}function y(x,d,p,N){for(var C=null,z=null,E=d,D=d=0,P=null;E!==null&&D<p.length;D++){E.index>D?(P=E,E=null):P=E.sibling;var S=f(x,E,p[D],N);if(S===null){E===null&&(E=P);break}e&&E&&S.alternate===null&&t(x,E),d=a(S,d,D),z===null?C=S:z.sibling=S,z=S,E=P}if(D===p.length)return r(x,E),De&&xn(x,D),C;if(E===null){for(;D<p.length;D++)E=h(x,p[D],N),E!==null&&(d=a(E,d,D),z===null?C=E:z.sibling=E,z=E);return De&&xn(x,D),C}for(E=n(x,E);D<p.length;D++)P=j(E,x,D,p[D],N),P!==null&&(e&&P.alternate!==null&&E.delete(P.key===null?D:P.key),d=a(P,d,D),z===null?C=P:z.sibling=P,z=P);return e&&E.forEach(function(M){return t(x,M)}),De&&xn(x,D),C}function b(x,d,p,N){var C=Ts(p);if(typeof C!="function")throw Error(K(150));if(p=C.call(p),p==null)throw Error(K(151));for(var z=C=null,E=d,D=d=0,P=null,S=p.next();E!==null&&!S.done;D++,S=p.next()){E.index>D?(P=E,E=null):P=E.sibling;var M=f(x,E,S.value,N);if(M===null){E===null&&(E=P);break}e&&E&&M.alternate===null&&t(x,E),d=a(M,d,D),z===null?C=M:z.sibling=M,z=M,E=P}if(S.done)return r(x,E),De&&xn(x,D),C;if(E===null){for(;!S.done;D++,S=p.next())S=h(x,S.value,N),S!==null&&(d=a(S,d,D),z===null?C=S:z.sibling=S,z=S);return De&&xn(x,D),C}for(E=n(x,E);!S.done;D++,S=p.next())S=j(E,x,D,S.value,N),S!==null&&(e&&S.alternate!==null&&E.delete(S.key===null?D:S.key),d=a(S,d,D),z===null?C=S:z.sibling=S,z=S);return e&&E.forEach(function(R){return t(x,R)}),De&&xn(x,D),C}function w(x,d,p,N){if(typeof p=="object"&&p!==null&&p.type===Jn&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case Ii:e:{for(var C=p.key,z=d;z!==null;){if(z.key===C){if(C=p.type,C===Jn){if(z.tag===7){r(x,z.sibling),d=i(z,p.props.children),d.return=x,x=d;break e}}else if(z.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Wr&&Cd(C)===z.type){r(x,z.sibling),d=i(z,p.props),d.ref=Os(x,z,p),d.return=x,x=d;break e}r(x,z);break}else t(x,z);z=z.sibling}p.type===Jn?(d=En(p.props.children,x.mode,N,p.key),d.return=x,x=d):(N=ga(p.type,p.key,p.props,null,x.mode,N),N.ref=Os(x,d,p),N.return=x,x=N)}return l(x);case Qn:e:{for(z=p.key;d!==null;){if(d.key===z)if(d.tag===4&&d.stateNode.containerInfo===p.containerInfo&&d.stateNode.implementation===p.implementation){r(x,d.sibling),d=i(d,p.children||[]),d.return=x,x=d;break e}else{r(x,d);break}else t(x,d);d=d.sibling}d=oo(p,x.mode,N),d.return=x,x=d}return l(x);case Wr:return z=p._init,w(x,d,z(p._payload),N)}if(Ys(p))return y(x,d,p,N);if(Ts(p))return b(x,d,p,N);Gi(x,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,d!==null&&d.tag===6?(r(x,d.sibling),d=i(d,p),d.return=x,x=d):(r(x,d),d=lo(p,x.mode,N),d.return=x,x=d),l(x)):r(x,d)}return w}var ys=hh(!0),ph=hh(!1),La=mn(null),Ia=null,ns=null,Jc=null;function Kc(){Jc=ns=Ia=null}function Gc(e){var t=La.current;Ce(La),e._currentValue=t}function Qo(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function ds(e,t){Ia=e,Jc=ns=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Nt=!0),e.firstContext=null)}function Ht(e){var t=e._currentValue;if(Jc!==e)if(e={context:e,memoizedValue:t,next:null},ns===null){if(Ia===null)throw Error(K(308));ns=e,Ia.dependencies={lanes:0,firstContext:e}}else ns=ns.next=e;return t}var wn=null;function Xc(e){wn===null?wn=[e]:wn.push(e)}function xh(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,Xc(t)):(r.next=i.next,i.next=r),t.interleaved=r,Or(e,n)}function Or(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var qr=!1;function Zc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Tr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function rn(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ye&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Or(e,r)}return i=n.interleaved,i===null?(t.next=t,Xc(n)):(t.next=i.next,i.next=t),n.interleaved=t,Or(e,r)}function da(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Oc(e,r)}}function Pd(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=l:a=a.next=l,r=r.next}while(r!==null);a===null?i=a=t:a=a.next=t}else i=a=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Va(e,t,r,n){var i=e.updateQueue;qr=!1;var a=i.firstBaseUpdate,l=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,u=c.next;c.next=null,l===null?a=u:l.next=u,l=c;var m=e.alternate;m!==null&&(m=m.updateQueue,o=m.lastBaseUpdate,o!==l&&(o===null?m.firstBaseUpdate=u:o.next=u,m.lastBaseUpdate=c))}if(a!==null){var h=i.baseState;l=0,m=u=c=null,o=a;do{var f=o.lane,j=o.eventTime;if((n&f)===f){m!==null&&(m=m.next={eventTime:j,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=e,b=o;switch(f=t,j=r,b.tag){case 1:if(y=b.payload,typeof y=="function"){h=y.call(j,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=b.payload,f=typeof y=="function"?y.call(j,h,f):y,f==null)break e;h=Me({},h,f);break e;case 2:qr=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else j={eventTime:j,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},m===null?(u=m=j,c=h):m=m.next=j,l|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(m===null&&(c=h),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=m,t=i.shared.interleaved,t!==null){i=t;do l|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Tn|=l,e.lanes=l,e.memoizedState=h}}function Dd(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(K(191,i));i.call(n)}}}var Ti={},Sr=mn(Ti),vi=mn(Ti),bi=mn(Ti);function jn(e){if(e===Ti)throw Error(K(174));return e}function eu(e,t){switch(_e(bi,t),_e(vi,e),_e(Sr,Ti),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Co(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Co(t,e)}Ce(Sr),_e(Sr,t)}function vs(){Ce(Sr),Ce(vi),Ce(bi)}function yh(e){jn(bi.current);var t=jn(Sr.current),r=Co(t,e.type);t!==r&&(_e(vi,e),_e(Sr,r))}function tu(e){vi.current===e&&(Ce(Sr),Ce(vi))}var Ae=mn(0);function Ua(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function ru(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ma=Ur.ReactCurrentDispatcher,ro=Ur.ReactCurrentBatchConfig,An=0,ze=null,He=null,Ke=null,Ba=!1,ri=!1,wi=0,jg=0;function at(){throw Error(K(321))}function nu(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!sr(e[r],t[r]))return!1;return!0}function su(e,t,r,n,i,a){if(An=a,ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ma.current=e===null||e.memoizedState===null?_g:Eg,e=r(n,i),ri){a=0;do{if(ri=!1,wi=0,25<=a)throw Error(K(301));a+=1,Ke=He=null,t.updateQueue=null,ma.current=Cg,e=r(n,i)}while(ri)}if(ma.current=Ha,t=He!==null&&He.next!==null,An=0,Ke=He=ze=null,Ba=!1,t)throw Error(K(300));return e}function iu(){var e=wi!==0;return wi=0,e}function mr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?ze.memoizedState=Ke=e:Ke=Ke.next=e,Ke}function Wt(){if(He===null){var e=ze.alternate;e=e!==null?e.memoizedState:null}else e=He.next;var t=Ke===null?ze.memoizedState:Ke.next;if(t!==null)Ke=t,He=e;else{if(e===null)throw Error(K(310));He=e,e={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Ke===null?ze.memoizedState=Ke=e:Ke=Ke.next=e}return Ke}function ji(e,t){return typeof t=="function"?t(e):t}function no(e){var t=Wt(),r=t.queue;if(r===null)throw Error(K(311));r.lastRenderedReducer=e;var n=He,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var l=i.next;i.next=a.next,a.next=l}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var o=l=null,c=null,u=a;do{var m=u.lane;if((An&m)===m)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:m,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=h,l=n):c=c.next=h,ze.lanes|=m,Tn|=m}u=u.next}while(u!==null&&u!==a);c===null?l=n:c.next=o,sr(n,t.memoizedState)||(Nt=!0),t.memoizedState=n,t.baseState=l,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do a=i.lane,ze.lanes|=a,Tn|=a,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function so(e){var t=Wt(),r=t.queue;if(r===null)throw Error(K(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(i!==null){r.pending=null;var l=i=i.next;do a=e(a,l.action),l=l.next;while(l!==i);sr(a,t.memoizedState)||(Nt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function vh(){}function bh(e,t){var r=ze,n=Wt(),i=t(),a=!sr(n.memoizedState,i);if(a&&(n.memoizedState=i,Nt=!0),n=n.queue,au(Nh.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||Ke!==null&&Ke.memoizedState.tag&1){if(r.flags|=2048,Ni(9,jh.bind(null,r,n,i,t),void 0,null),Xe===null)throw Error(K(349));An&30||wh(r,t,i)}return i}function wh(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function jh(e,t,r,n){t.value=r,t.getSnapshot=n,Sh(t)&&kh(e)}function Nh(e,t,r){return r(function(){Sh(t)&&kh(e)})}function Sh(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!sr(e,r)}catch{return!0}}function kh(e){var t=Or(e,1);t!==null&&nr(t,e,1,-1)}function Rd(e){var t=mr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:e},t.queue=e,e=e.dispatch=kg.bind(null,ze,e),[t.memoizedState,e]}function Ni(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function _h(){return Wt().memoizedState}function fa(e,t,r,n){var i=mr();ze.flags|=e,i.memoizedState=Ni(1|t,r,void 0,n===void 0?null:n)}function ml(e,t,r,n){var i=Wt();n=n===void 0?null:n;var a=void 0;if(He!==null){var l=He.memoizedState;if(a=l.destroy,n!==null&&nu(n,l.deps)){i.memoizedState=Ni(t,r,a,n);return}}ze.flags|=e,i.memoizedState=Ni(1|t,r,a,n)}function Ad(e,t){return fa(8390656,8,e,t)}function au(e,t){return ml(2048,8,e,t)}function Eh(e,t){return ml(4,2,e,t)}function Ch(e,t){return ml(4,4,e,t)}function Ph(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Dh(e,t,r){return r=r!=null?r.concat([e]):null,ml(4,4,Ph.bind(null,t,e),r)}function lu(){}function Rh(e,t){var r=Wt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&nu(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Ah(e,t){var r=Wt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&nu(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Th(e,t,r){return An&21?(sr(r,t)||(r=Of(),ze.lanes|=r,Tn|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Nt=!0),e.memoizedState=r)}function Ng(e,t){var r=Se;Se=r!==0&&4>r?r:4,e(!0);var n=ro.transition;ro.transition={};try{e(!1),t()}finally{Se=r,ro.transition=n}}function zh(){return Wt().memoizedState}function Sg(e,t,r){var n=sn(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Mh(e))$h(t,r);else if(r=xh(e,t,r,n),r!==null){var i=xt();nr(r,e,n,i),Fh(r,t,n)}}function kg(e,t,r){var n=sn(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Mh(e))$h(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var l=t.lastRenderedState,o=a(l,r);if(i.hasEagerState=!0,i.eagerState=o,sr(o,l)){var c=t.interleaved;c===null?(i.next=i,Xc(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}r=xh(e,t,i,n),r!==null&&(i=xt(),nr(r,e,n,i),Fh(r,t,n))}}function Mh(e){var t=e.alternate;return e===ze||t!==null&&t===ze}function $h(e,t){ri=Ba=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Fh(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Oc(e,r)}}var Ha={readContext:Ht,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},_g={readContext:Ht,useCallback:function(e,t){return mr().memoizedState=[e,t===void 0?null:t],e},useContext:Ht,useEffect:Ad,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,fa(4194308,4,Ph.bind(null,t,e),r)},useLayoutEffect:function(e,t){return fa(4194308,4,e,t)},useInsertionEffect:function(e,t){return fa(4,2,e,t)},useMemo:function(e,t){var r=mr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=mr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Sg.bind(null,ze,e),[n.memoizedState,e]},useRef:function(e){var t=mr();return e={current:e},t.memoizedState=e},useState:Rd,useDebugValue:lu,useDeferredValue:function(e){return mr().memoizedState=e},useTransition:function(){var e=Rd(!1),t=e[0];return e=Ng.bind(null,e[1]),mr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ze,i=mr();if(De){if(r===void 0)throw Error(K(407));r=r()}else{if(r=t(),Xe===null)throw Error(K(349));An&30||wh(n,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,Ad(Nh.bind(null,n,a,e),[e]),n.flags|=2048,Ni(9,jh.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=mr(),t=Xe.identifierPrefix;if(De){var r=Ar,n=Rr;r=(n&~(1<<32-rr(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=wi++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=jg++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Eg={readContext:Ht,useCallback:Rh,useContext:Ht,useEffect:au,useImperativeHandle:Dh,useInsertionEffect:Eh,useLayoutEffect:Ch,useMemo:Ah,useReducer:no,useRef:_h,useState:function(){return no(ji)},useDebugValue:lu,useDeferredValue:function(e){var t=Wt();return Th(t,He.memoizedState,e)},useTransition:function(){var e=no(ji)[0],t=Wt().memoizedState;return[e,t]},useMutableSource:vh,useSyncExternalStore:bh,useId:zh,unstable_isNewReconciler:!1},Cg={readContext:Ht,useCallback:Rh,useContext:Ht,useEffect:au,useImperativeHandle:Dh,useInsertionEffect:Eh,useLayoutEffect:Ch,useMemo:Ah,useReducer:so,useRef:_h,useState:function(){return so(ji)},useDebugValue:lu,useDeferredValue:function(e){var t=Wt();return He===null?t.memoizedState=e:Th(t,He.memoizedState,e)},useTransition:function(){var e=so(ji)[0],t=Wt().memoizedState;return[e,t]},useMutableSource:vh,useSyncExternalStore:bh,useId:zh,unstable_isNewReconciler:!1};function Kt(e,t){if(e&&e.defaultProps){t=Me({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Jo(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Me({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var fl={isMounted:function(e){return(e=e._reactInternals)?On(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=xt(),i=sn(e),a=Tr(n,i);a.payload=t,r!=null&&(a.callback=r),t=rn(e,a,i),t!==null&&(nr(t,e,i,n),da(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=xt(),i=sn(e),a=Tr(n,i);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=rn(e,a,i),t!==null&&(nr(t,e,i,n),da(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=xt(),n=sn(e),i=Tr(r,n);i.tag=2,t!=null&&(i.callback=t),t=rn(e,i,n),t!==null&&(nr(t,e,n,r),da(t,e,n))}};function Td(e,t,r,n,i,a,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,l):t.prototype&&t.prototype.isPureReactComponent?!pi(r,n)||!pi(i,a):!0}function Oh(e,t,r){var n=!1,i=cn,a=t.contextType;return typeof a=="object"&&a!==null?a=Ht(a):(i=kt(t)?Dn:dt.current,n=t.contextTypes,a=(n=n!=null)?xs(e,i):cn),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=fl,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function zd(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&fl.enqueueReplaceState(t,t.state,null)}function Ko(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},Zc(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Ht(a):(a=kt(t)?Dn:dt.current,i.context=xs(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Jo(e,t,a,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&fl.enqueueReplaceState(i,i.state,null),Va(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function bs(e,t){try{var r="",n=t;do r+=rx(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function io(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Go(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Pg=typeof WeakMap=="function"?WeakMap:Map;function Lh(e,t,r){r=Tr(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){qa||(qa=!0,lc=n),Go(e,t)},r}function Ih(e,t,r){r=Tr(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){Go(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Go(e,t),typeof n!="function"&&(nn===null?nn=new Set([this]):nn.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function Md(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Pg;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=Bg.bind(null,e,t,r),t.then(e,e))}function $d(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Fd(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Tr(-1,1),t.tag=2,rn(r,t,1))),r.lanes|=1),e)}var Dg=Ur.ReactCurrentOwner,Nt=!1;function ft(e,t,r,n){t.child=e===null?ph(t,null,r,n):ys(t,e.child,r,n)}function Od(e,t,r,n,i){r=r.render;var a=t.ref;return ds(t,i),n=su(e,t,r,n,a,i),r=iu(),e!==null&&!Nt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Lr(e,t,i)):(De&&r&&qc(t),t.flags|=1,ft(e,t,n,i),t.child)}function Ld(e,t,r,n,i){if(e===null){var a=r.type;return typeof a=="function"&&!pu(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,Vh(e,t,a,n,i)):(e=ga(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var l=a.memoizedProps;if(r=r.compare,r=r!==null?r:pi,r(l,n)&&e.ref===t.ref)return Lr(e,t,i)}return t.flags|=1,e=an(a,n),e.ref=t.ref,e.return=t,t.child=e}function Vh(e,t,r,n,i){if(e!==null){var a=e.memoizedProps;if(pi(a,n)&&e.ref===t.ref)if(Nt=!1,t.pendingProps=n=a,(e.lanes&i)!==0)e.flags&131072&&(Nt=!0);else return t.lanes=e.lanes,Lr(e,t,i)}return Xo(e,t,r,n,i)}function Uh(e,t,r){var n=t.pendingProps,i=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(is,Dt),Dt|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_e(is,Dt),Dt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,_e(is,Dt),Dt|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,_e(is,Dt),Dt|=n;return ft(e,t,i,r),t.child}function Bh(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Xo(e,t,r,n,i){var a=kt(r)?Dn:dt.current;return a=xs(t,a),ds(t,i),r=su(e,t,r,n,a,i),n=iu(),e!==null&&!Nt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Lr(e,t,i)):(De&&n&&qc(t),t.flags|=1,ft(e,t,r,i),t.child)}function Id(e,t,r,n,i){if(kt(r)){var a=!0;$a(t)}else a=!1;if(ds(t,i),t.stateNode===null)ha(e,t),Oh(t,r,n),Ko(t,r,n,i),n=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,u=r.contextType;typeof u=="object"&&u!==null?u=Ht(u):(u=kt(r)?Dn:dt.current,u=xs(t,u));var m=r.getDerivedStateFromProps,h=typeof m=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==n||c!==u)&&zd(t,l,n,u),qr=!1;var f=t.memoizedState;l.state=f,Va(t,n,l,i),c=t.memoizedState,o!==n||f!==c||St.current||qr?(typeof m=="function"&&(Jo(t,r,m,n),c=t.memoizedState),(o=qr||Td(t,r,o,n,f,c,u))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),l.props=n,l.state=c,l.context=u,n=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{l=t.stateNode,gh(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:Kt(t.type,o),l.props=u,h=t.pendingProps,f=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ht(c):(c=kt(r)?Dn:dt.current,c=xs(t,c));var j=r.getDerivedStateFromProps;(m=typeof j=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==h||f!==c)&&zd(t,l,n,c),qr=!1,f=t.memoizedState,l.state=f,Va(t,n,l,i);var y=t.memoizedState;o!==h||f!==y||St.current||qr?(typeof j=="function"&&(Jo(t,r,j,n),y=t.memoizedState),(u=qr||Td(t,r,u,n,f,y,c)||!1)?(m||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,y,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,y,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),l.props=n,l.state=y,l.context=c,n=u):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return Zo(e,t,r,n,a,i)}function Zo(e,t,r,n,i,a){Bh(e,t);var l=(t.flags&128)!==0;if(!n&&!l)return i&&kd(t,r,!1),Lr(e,t,a);n=t.stateNode,Dg.current=t;var o=l&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&l?(t.child=ys(t,e.child,null,a),t.child=ys(t,null,o,a)):ft(e,t,o,a),t.memoizedState=n.state,i&&kd(t,r,!0),t.child}function Hh(e){var t=e.stateNode;t.pendingContext?Sd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Sd(e,t.context,!1),eu(e,t.containerInfo)}function Vd(e,t,r,n,i){return gs(),Qc(i),t.flags|=256,ft(e,t,r,n),t.child}var ec={dehydrated:null,treeContext:null,retryLane:0};function tc(e){return{baseLanes:e,cachePool:null,transitions:null}}function Wh(e,t,r){var n=t.pendingProps,i=Ae.current,a=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),_e(Ae,i&1),e===null)return Yo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=n.children,e=n.fallback,a?(n=t.mode,a=t.child,l={mode:"hidden",children:l},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=xl(l,n,0,null),e=En(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=tc(r),t.memoizedState=ec,e):ou(t,l));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Rg(e,t,l,n,o,i,r);if(a){a=n.fallback,l=t.mode,i=e.child,o=i.sibling;var c={mode:"hidden",children:n.children};return!(l&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=an(i,c),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=an(o,a):(a=En(a,l,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,l=e.child.memoizedState,l=l===null?tc(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~r,t.memoizedState=ec,n}return a=e.child,e=a.sibling,n=an(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function ou(e,t){return t=xl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Xi(e,t,r,n){return n!==null&&Qc(n),ys(t,e.child,null,r),e=ou(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Rg(e,t,r,n,i,a,l){if(r)return t.flags&256?(t.flags&=-257,n=io(Error(K(422))),Xi(e,t,l,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,i=t.mode,n=xl({mode:"visible",children:n.children},i,0,null),a=En(a,i,l,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&ys(t,e.child,null,l),t.child.memoizedState=tc(l),t.memoizedState=ec,a);if(!(t.mode&1))return Xi(e,t,l,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,a=Error(K(419)),n=io(a,n,void 0),Xi(e,t,l,n)}if(o=(l&e.childLanes)!==0,Nt||o){if(n=Xe,n!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|l)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Or(e,i),nr(n,e,i,-1))}return hu(),n=io(Error(K(421))),Xi(e,t,l,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Hg.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Rt=tn(i.nextSibling),Tt=t,De=!0,Zt=null,e!==null&&(Lt[It++]=Rr,Lt[It++]=Ar,Lt[It++]=Rn,Rr=e.id,Ar=e.overflow,Rn=t),t=ou(t,n.children),t.flags|=4096,t)}function Ud(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Qo(e.return,t,r)}function ao(e,t,r,n,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function qh(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(ft(e,t,n.children,r),n=Ae.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ud(e,r,t);else if(e.tag===19)Ud(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(_e(Ae,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&Ua(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),ao(t,!1,i,r,a);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Ua(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}ao(t,!0,r,null,a);break;case"together":ao(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ha(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Lr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Tn|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(K(153));if(t.child!==null){for(e=t.child,r=an(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=an(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Ag(e,t,r){switch(t.tag){case 3:Hh(t),gs();break;case 5:yh(t);break;case 1:kt(t.type)&&$a(t);break;case 4:eu(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;_e(La,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(_e(Ae,Ae.current&1),t.flags|=128,null):r&t.child.childLanes?Wh(e,t,r):(_e(Ae,Ae.current&1),e=Lr(e,t,r),e!==null?e.sibling:null);_e(Ae,Ae.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return qh(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),_e(Ae,Ae.current),n)break;return null;case 22:case 23:return t.lanes=0,Uh(e,t,r)}return Lr(e,t,r)}var Yh,rc,Qh,Jh;Yh=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};rc=function(){};Qh=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,jn(Sr.current);var a=null;switch(r){case"input":i=So(e,i),n=So(e,n),a=[];break;case"select":i=Me({},i,{value:void 0}),n=Me({},n,{value:void 0}),a=[];break;case"textarea":i=Eo(e,i),n=Eo(e,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=za)}Po(r,n);var l;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(oi.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(o=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(oi.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ee("scroll",e),a||o===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};Jh=function(e,t,r,n){r!==n&&(t.flags|=4)};function Ls(e,t){if(!De)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function lt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Tg(e,t,r){var n=t.pendingProps;switch(Yc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(t),null;case 1:return kt(t.type)&&Ma(),lt(t),null;case 3:return n=t.stateNode,vs(),Ce(St),Ce(dt),ru(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ki(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Zt!==null&&(uc(Zt),Zt=null))),rc(e,t),lt(t),null;case 5:tu(t);var i=jn(bi.current);if(r=t.type,e!==null&&t.stateNode!=null)Qh(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(K(166));return lt(t),null}if(e=jn(Sr.current),Ki(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[pr]=t,n[yi]=a,e=(t.mode&1)!==0,r){case"dialog":Ee("cancel",n),Ee("close",n);break;case"iframe":case"object":case"embed":Ee("load",n);break;case"video":case"audio":for(i=0;i<Js.length;i++)Ee(Js[i],n);break;case"source":Ee("error",n);break;case"img":case"image":case"link":Ee("error",n),Ee("load",n);break;case"details":Ee("toggle",n);break;case"input":Gu(n,a),Ee("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Ee("invalid",n);break;case"textarea":Zu(n,a),Ee("invalid",n)}Po(r,a),i=null;for(var l in a)if(a.hasOwnProperty(l)){var o=a[l];l==="children"?typeof o=="string"?n.textContent!==o&&(a.suppressHydrationWarning!==!0&&Ji(n.textContent,o,e),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&Ji(n.textContent,o,e),i=["children",""+o]):oi.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&Ee("scroll",n)}switch(r){case"input":Vi(n),Xu(n,a,!0);break;case"textarea":Vi(n),ed(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=za)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Nf(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),r==="select"&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[pr]=t,e[yi]=n,Yh(e,t,!1,!1),t.stateNode=e;e:{switch(l=Do(r,n),r){case"dialog":Ee("cancel",e),Ee("close",e),i=n;break;case"iframe":case"object":case"embed":Ee("load",e),i=n;break;case"video":case"audio":for(i=0;i<Js.length;i++)Ee(Js[i],e);i=n;break;case"source":Ee("error",e),i=n;break;case"img":case"image":case"link":Ee("error",e),Ee("load",e),i=n;break;case"details":Ee("toggle",e),i=n;break;case"input":Gu(e,n),i=So(e,n),Ee("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=Me({},n,{value:void 0}),Ee("invalid",e);break;case"textarea":Zu(e,n),i=Eo(e,n),Ee("invalid",e);break;default:i=n}Po(r,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="style"?_f(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Sf(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&ci(e,c):typeof c=="number"&&ci(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(oi.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Ee("scroll",e):c!=null&&Ac(e,a,c,l))}switch(r){case"input":Vi(e),Xu(e,n,!1);break;case"textarea":Vi(e),ed(e);break;case"option":n.value!=null&&e.setAttribute("value",""+on(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?ls(e,!!n.multiple,a,!1):n.defaultValue!=null&&ls(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=za)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return lt(t),null;case 6:if(e&&t.stateNode!=null)Jh(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(K(166));if(r=jn(bi.current),jn(Sr.current),Ki(t)){if(n=t.stateNode,r=t.memoizedProps,n[pr]=t,(a=n.nodeValue!==r)&&(e=Tt,e!==null))switch(e.tag){case 3:Ji(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ji(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[pr]=t,t.stateNode=n}return lt(t),null;case 13:if(Ce(Ae),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(De&&Rt!==null&&t.mode&1&&!(t.flags&128))fh(),gs(),t.flags|=98560,a=!1;else if(a=Ki(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(K(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(K(317));a[pr]=t}else gs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;lt(t),a=!1}else Zt!==null&&(uc(Zt),Zt=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Ae.current&1?We===0&&(We=3):hu())),t.updateQueue!==null&&(t.flags|=4),lt(t),null);case 4:return vs(),rc(e,t),e===null&&xi(t.stateNode.containerInfo),lt(t),null;case 10:return Gc(t.type._context),lt(t),null;case 17:return kt(t.type)&&Ma(),lt(t),null;case 19:if(Ce(Ae),a=t.memoizedState,a===null)return lt(t),null;if(n=(t.flags&128)!==0,l=a.rendering,l===null)if(n)Ls(a,!1);else{if(We!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Ua(e),l!==null){for(t.flags|=128,Ls(a,!1),n=l.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return _e(Ae,Ae.current&1|2),t.child}e=e.sibling}a.tail!==null&&Oe()>ws&&(t.flags|=128,n=!0,Ls(a,!1),t.lanes=4194304)}else{if(!n)if(e=Ua(l),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ls(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!De)return lt(t),null}else 2*Oe()-a.renderingStartTime>ws&&r!==1073741824&&(t.flags|=128,n=!0,Ls(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(r=a.last,r!==null?r.sibling=l:t.child=l,a.last=l)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Oe(),t.sibling=null,r=Ae.current,_e(Ae,n?r&1|2:r&1),t):(lt(t),null);case 22:case 23:return fu(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Dt&1073741824&&(lt(t),t.subtreeFlags&6&&(t.flags|=8192)):lt(t),null;case 24:return null;case 25:return null}throw Error(K(156,t.tag))}function zg(e,t){switch(Yc(t),t.tag){case 1:return kt(t.type)&&Ma(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return vs(),Ce(St),Ce(dt),ru(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return tu(t),null;case 13:if(Ce(Ae),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(K(340));gs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ce(Ae),null;case 4:return vs(),null;case 10:return Gc(t.type._context),null;case 22:case 23:return fu(),null;case 24:return null;default:return null}}var Zi=!1,ot=!1,Mg=typeof WeakSet=="function"?WeakSet:Set,le=null;function ss(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Fe(e,t,n)}else r.current=null}function nc(e,t,r){try{r()}catch(n){Fe(e,t,n)}}var Bd=!1;function $g(e,t){if(Io=Ra,e=eh(),Wc(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var l=0,o=-1,c=-1,u=0,m=0,h=e,f=null;t:for(;;){for(var j;h!==r||i!==0&&h.nodeType!==3||(o=l+i),h!==a||n!==0&&h.nodeType!==3||(c=l+n),h.nodeType===3&&(l+=h.nodeValue.length),(j=h.firstChild)!==null;)f=h,h=j;for(;;){if(h===e)break t;if(f===r&&++u===i&&(o=l),f===a&&++m===n&&(c=l),(j=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=j}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Vo={focusedElem:e,selectionRange:r},Ra=!1,le=t;le!==null;)if(t=le,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,le=e;else for(;le!==null;){t=le;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var b=y.memoizedProps,w=y.memoizedState,x=t.stateNode,d=x.getSnapshotBeforeUpdate(t.elementType===t.type?b:Kt(t.type,b),w);x.__reactInternalSnapshotBeforeUpdate=d}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(N){Fe(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,le=e;break}le=t.return}return y=Bd,Bd=!1,y}function ni(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&nc(t,r,a)}i=i.next}while(i!==n)}}function hl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function sc(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Kh(e){var t=e.alternate;t!==null&&(e.alternate=null,Kh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[pr],delete t[yi],delete t[Ho],delete t[yg],delete t[vg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Gh(e){return e.tag===5||e.tag===3||e.tag===4}function Hd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Gh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ic(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=za));else if(n!==4&&(e=e.child,e!==null))for(ic(e,t,r),e=e.sibling;e!==null;)ic(e,t,r),e=e.sibling}function ac(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(ac(e,t,r),e=e.sibling;e!==null;)ac(e,t,r),e=e.sibling}var et=null,Xt=!1;function Br(e,t,r){for(r=r.child;r!==null;)Xh(e,t,r),r=r.sibling}function Xh(e,t,r){if(Nr&&typeof Nr.onCommitFiberUnmount=="function")try{Nr.onCommitFiberUnmount(al,r)}catch{}switch(r.tag){case 5:ot||ss(r,t);case 6:var n=et,i=Xt;et=null,Br(e,t,r),et=n,Xt=i,et!==null&&(Xt?(e=et,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):et.removeChild(r.stateNode));break;case 18:et!==null&&(Xt?(e=et,r=r.stateNode,e.nodeType===8?Zl(e.parentNode,r):e.nodeType===1&&Zl(e,r),fi(e)):Zl(et,r.stateNode));break;case 4:n=et,i=Xt,et=r.stateNode.containerInfo,Xt=!0,Br(e,t,r),et=n,Xt=i;break;case 0:case 11:case 14:case 15:if(!ot&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&nc(r,t,l),i=i.next}while(i!==n)}Br(e,t,r);break;case 1:if(!ot&&(ss(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Fe(r,t,o)}Br(e,t,r);break;case 21:Br(e,t,r);break;case 22:r.mode&1?(ot=(n=ot)||r.memoizedState!==null,Br(e,t,r),ot=n):Br(e,t,r);break;default:Br(e,t,r)}}function Wd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Mg),t.forEach(function(n){var i=Wg.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Qt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:et=o.stateNode,Xt=!1;break e;case 3:et=o.stateNode.containerInfo,Xt=!0;break e;case 4:et=o.stateNode.containerInfo,Xt=!0;break e}o=o.return}if(et===null)throw Error(K(160));Xh(a,l,i),et=null,Xt=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){Fe(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Zh(t,e),t=t.sibling}function Zh(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Qt(t,e),ur(e),n&4){try{ni(3,e,e.return),hl(3,e)}catch(b){Fe(e,e.return,b)}try{ni(5,e,e.return)}catch(b){Fe(e,e.return,b)}}break;case 1:Qt(t,e),ur(e),n&512&&r!==null&&ss(r,r.return);break;case 5:if(Qt(t,e),ur(e),n&512&&r!==null&&ss(r,r.return),e.flags&32){var i=e.stateNode;try{ci(i,"")}catch(b){Fe(e,e.return,b)}}if(n&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,l=r!==null?r.memoizedProps:a,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&wf(i,a),Do(o,l);var u=Do(o,a);for(l=0;l<c.length;l+=2){var m=c[l],h=c[l+1];m==="style"?_f(i,h):m==="dangerouslySetInnerHTML"?Sf(i,h):m==="children"?ci(i,h):Ac(i,m,h,u)}switch(o){case"input":ko(i,a);break;case"textarea":jf(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var j=a.value;j!=null?ls(i,!!a.multiple,j,!1):f!==!!a.multiple&&(a.defaultValue!=null?ls(i,!!a.multiple,a.defaultValue,!0):ls(i,!!a.multiple,a.multiple?[]:"",!1))}i[yi]=a}catch(b){Fe(e,e.return,b)}}break;case 6:if(Qt(t,e),ur(e),n&4){if(e.stateNode===null)throw Error(K(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(b){Fe(e,e.return,b)}}break;case 3:if(Qt(t,e),ur(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{fi(t.containerInfo)}catch(b){Fe(e,e.return,b)}break;case 4:Qt(t,e),ur(e);break;case 13:Qt(t,e),ur(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(du=Oe())),n&4&&Wd(e);break;case 22:if(m=r!==null&&r.memoizedState!==null,e.mode&1?(ot=(u=ot)||m,Qt(t,e),ot=u):Qt(t,e),ur(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!m&&e.mode&1)for(le=e,m=e.child;m!==null;){for(h=le=m;le!==null;){switch(f=le,j=f.child,f.tag){case 0:case 11:case 14:case 15:ni(4,f,f.return);break;case 1:ss(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(b){Fe(n,r,b)}}break;case 5:ss(f,f.return);break;case 22:if(f.memoizedState!==null){Yd(h);continue}}j!==null?(j.return=f,le=j):Yd(h)}m=m.sibling}e:for(m=null,h=e;;){if(h.tag===5){if(m===null){m=h;try{i=h.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=h.stateNode,c=h.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=kf("display",l))}catch(b){Fe(e,e.return,b)}}}else if(h.tag===6){if(m===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(b){Fe(e,e.return,b)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Qt(t,e),ur(e),n&4&&Wd(e);break;case 21:break;default:Qt(t,e),ur(e)}}function ur(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Gh(r)){var n=r;break e}r=r.return}throw Error(K(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(ci(i,""),n.flags&=-33);var a=Hd(e);ac(e,a,i);break;case 3:case 4:var l=n.stateNode.containerInfo,o=Hd(e);ic(e,o,l);break;default:throw Error(K(161))}}catch(c){Fe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Fg(e,t,r){le=e,ep(e)}function ep(e,t,r){for(var n=(e.mode&1)!==0;le!==null;){var i=le,a=i.child;if(i.tag===22&&n){var l=i.memoizedState!==null||Zi;if(!l){var o=i.alternate,c=o!==null&&o.memoizedState!==null||ot;o=Zi;var u=ot;if(Zi=l,(ot=c)&&!u)for(le=i;le!==null;)l=le,c=l.child,l.tag===22&&l.memoizedState!==null?Qd(i):c!==null?(c.return=l,le=c):Qd(i);for(;a!==null;)le=a,ep(a),a=a.sibling;le=i,Zi=o,ot=u}qd(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,le=a):qd(e)}}function qd(e){for(;le!==null;){var t=le;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ot||hl(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ot)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Kt(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Dd(t,a,n);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Dd(t,l,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var m=u.memoizedState;if(m!==null){var h=m.dehydrated;h!==null&&fi(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}ot||t.flags&512&&sc(t)}catch(f){Fe(t,t.return,f)}}if(t===e){le=null;break}if(r=t.sibling,r!==null){r.return=t.return,le=r;break}le=t.return}}function Yd(e){for(;le!==null;){var t=le;if(t===e){le=null;break}var r=t.sibling;if(r!==null){r.return=t.return,le=r;break}le=t.return}}function Qd(e){for(;le!==null;){var t=le;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{hl(4,t)}catch(c){Fe(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(c){Fe(t,i,c)}}var a=t.return;try{sc(t)}catch(c){Fe(t,a,c)}break;case 5:var l=t.return;try{sc(t)}catch(c){Fe(t,l,c)}}}catch(c){Fe(t,t.return,c)}if(t===e){le=null;break}var o=t.sibling;if(o!==null){o.return=t.return,le=o;break}le=t.return}}var Og=Math.ceil,Wa=Ur.ReactCurrentDispatcher,cu=Ur.ReactCurrentOwner,Bt=Ur.ReactCurrentBatchConfig,ye=0,Xe=null,Ue=null,nt=0,Dt=0,is=mn(0),We=0,Si=null,Tn=0,pl=0,uu=0,si=null,wt=null,du=0,ws=1/0,Pr=null,qa=!1,lc=null,nn=null,ea=!1,Gr=null,Ya=0,ii=0,oc=null,pa=-1,xa=0;function xt(){return ye&6?Oe():pa!==-1?pa:pa=Oe()}function sn(e){return e.mode&1?ye&2&&nt!==0?nt&-nt:wg.transition!==null?(xa===0&&(xa=Of()),xa):(e=Se,e!==0||(e=window.event,e=e===void 0?16:Wf(e.type)),e):1}function nr(e,t,r,n){if(50<ii)throw ii=0,oc=null,Error(K(185));Di(e,r,n),(!(ye&2)||e!==Xe)&&(e===Xe&&(!(ye&2)&&(pl|=r),We===4&&Qr(e,nt)),_t(e,n),r===1&&ye===0&&!(t.mode&1)&&(ws=Oe()+500,dl&&fn()))}function _t(e,t){var r=e.callbackNode;wx(e,t);var n=Da(e,e===Xe?nt:0);if(n===0)r!==null&&nd(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&nd(r),t===1)e.tag===0?bg(Jd.bind(null,e)):uh(Jd.bind(null,e)),xg(function(){!(ye&6)&&fn()}),r=null;else{switch(Lf(n)){case 1:r=Fc;break;case 4:r=$f;break;case 16:r=Pa;break;case 536870912:r=Ff;break;default:r=Pa}r=op(r,tp.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function tp(e,t){if(pa=-1,xa=0,ye&6)throw Error(K(327));var r=e.callbackNode;if(ms()&&e.callbackNode!==r)return null;var n=Da(e,e===Xe?nt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Qa(e,n);else{t=n;var i=ye;ye|=2;var a=np();(Xe!==e||nt!==t)&&(Pr=null,ws=Oe()+500,_n(e,t));do try{Vg();break}catch(o){rp(e,o)}while(!0);Kc(),Wa.current=a,ye=i,Ue!==null?t=0:(Xe=null,nt=0,t=We)}if(t!==0){if(t===2&&(i=Mo(e),i!==0&&(n=i,t=cc(e,i))),t===1)throw r=Si,_n(e,0),Qr(e,n),_t(e,Oe()),r;if(t===6)Qr(e,n);else{if(i=e.current.alternate,!(n&30)&&!Lg(i)&&(t=Qa(e,n),t===2&&(a=Mo(e),a!==0&&(n=a,t=cc(e,a))),t===1))throw r=Si,_n(e,0),Qr(e,n),_t(e,Oe()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(K(345));case 2:gn(e,wt,Pr);break;case 3:if(Qr(e,n),(n&130023424)===n&&(t=du+500-Oe(),10<t)){if(Da(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){xt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Bo(gn.bind(null,e,wt,Pr),t);break}gn(e,wt,Pr);break;case 4:if(Qr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var l=31-rr(n);a=1<<l,l=t[l],l>i&&(i=l),n&=~a}if(n=i,n=Oe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Og(n/1960))-n,10<n){e.timeoutHandle=Bo(gn.bind(null,e,wt,Pr),n);break}gn(e,wt,Pr);break;case 5:gn(e,wt,Pr);break;default:throw Error(K(329))}}}return _t(e,Oe()),e.callbackNode===r?tp.bind(null,e):null}function cc(e,t){var r=si;return e.current.memoizedState.isDehydrated&&(_n(e,t).flags|=256),e=Qa(e,t),e!==2&&(t=wt,wt=r,t!==null&&uc(t)),e}function uc(e){wt===null?wt=e:wt.push.apply(wt,e)}function Lg(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qr(e,t){for(t&=~uu,t&=~pl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-rr(t),n=1<<r;e[r]=-1,t&=~n}}function Jd(e){if(ye&6)throw Error(K(327));ms();var t=Da(e,0);if(!(t&1))return _t(e,Oe()),null;var r=Qa(e,t);if(e.tag!==0&&r===2){var n=Mo(e);n!==0&&(t=n,r=cc(e,n))}if(r===1)throw r=Si,_n(e,0),Qr(e,t),_t(e,Oe()),r;if(r===6)throw Error(K(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,gn(e,wt,Pr),_t(e,Oe()),null}function mu(e,t){var r=ye;ye|=1;try{return e(t)}finally{ye=r,ye===0&&(ws=Oe()+500,dl&&fn())}}function zn(e){Gr!==null&&Gr.tag===0&&!(ye&6)&&ms();var t=ye;ye|=1;var r=Bt.transition,n=Se;try{if(Bt.transition=null,Se=1,e)return e()}finally{Se=n,Bt.transition=r,ye=t,!(ye&6)&&fn()}}function fu(){Dt=is.current,Ce(is)}function _n(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,pg(r)),Ue!==null)for(r=Ue.return;r!==null;){var n=r;switch(Yc(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ma();break;case 3:vs(),Ce(St),Ce(dt),ru();break;case 5:tu(n);break;case 4:vs();break;case 13:Ce(Ae);break;case 19:Ce(Ae);break;case 10:Gc(n.type._context);break;case 22:case 23:fu()}r=r.return}if(Xe=e,Ue=e=an(e.current,null),nt=Dt=t,We=0,Si=null,uu=pl=Tn=0,wt=si=null,wn!==null){for(t=0;t<wn.length;t++)if(r=wn[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var l=a.next;a.next=i,n.next=l}r.pending=n}wn=null}return e}function rp(e,t){do{var r=Ue;try{if(Kc(),ma.current=Ha,Ba){for(var n=ze.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Ba=!1}if(An=0,Ke=He=ze=null,ri=!1,wi=0,cu.current=null,r===null||r.return===null){We=1,Si=t,Ue=null;break}e:{var a=e,l=r.return,o=r,c=t;if(t=nt,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,m=o,h=m.tag;if(!(m.mode&1)&&(h===0||h===11||h===15)){var f=m.alternate;f?(m.updateQueue=f.updateQueue,m.memoizedState=f.memoizedState,m.lanes=f.lanes):(m.updateQueue=null,m.memoizedState=null)}var j=$d(l);if(j!==null){j.flags&=-257,Fd(j,l,o,a,t),j.mode&1&&Md(a,u,t),t=j,c=u;var y=t.updateQueue;if(y===null){var b=new Set;b.add(c),t.updateQueue=b}else y.add(c);break e}else{if(!(t&1)){Md(a,u,t),hu();break e}c=Error(K(426))}}else if(De&&o.mode&1){var w=$d(l);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Fd(w,l,o,a,t),Qc(bs(c,o));break e}}a=c=bs(c,o),We!==4&&(We=2),si===null?si=[a]:si.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var x=Lh(a,c,t);Pd(a,x);break e;case 1:o=c;var d=a.type,p=a.stateNode;if(!(a.flags&128)&&(typeof d.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(nn===null||!nn.has(p)))){a.flags|=65536,t&=-t,a.lanes|=t;var N=Ih(a,o,t);Pd(a,N);break e}}a=a.return}while(a!==null)}ip(r)}catch(C){t=C,Ue===r&&r!==null&&(Ue=r=r.return);continue}break}while(!0)}function np(){var e=Wa.current;return Wa.current=Ha,e===null?Ha:e}function hu(){(We===0||We===3||We===2)&&(We=4),Xe===null||!(Tn&268435455)&&!(pl&268435455)||Qr(Xe,nt)}function Qa(e,t){var r=ye;ye|=2;var n=np();(Xe!==e||nt!==t)&&(Pr=null,_n(e,t));do try{Ig();break}catch(i){rp(e,i)}while(!0);if(Kc(),ye=r,Wa.current=n,Ue!==null)throw Error(K(261));return Xe=null,nt=0,We}function Ig(){for(;Ue!==null;)sp(Ue)}function Vg(){for(;Ue!==null&&!mx();)sp(Ue)}function sp(e){var t=lp(e.alternate,e,Dt);e.memoizedProps=e.pendingProps,t===null?ip(e):Ue=t,cu.current=null}function ip(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=zg(r,t),r!==null){r.flags&=32767,Ue=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{We=6,Ue=null;return}}else if(r=Tg(r,t,Dt),r!==null){Ue=r;return}if(t=t.sibling,t!==null){Ue=t;return}Ue=t=e}while(t!==null);We===0&&(We=5)}function gn(e,t,r){var n=Se,i=Bt.transition;try{Bt.transition=null,Se=1,Ug(e,t,r,n)}finally{Bt.transition=i,Se=n}return null}function Ug(e,t,r,n){do ms();while(Gr!==null);if(ye&6)throw Error(K(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(K(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(jx(e,a),e===Xe&&(Ue=Xe=null,nt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ea||(ea=!0,op(Pa,function(){return ms(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Bt.transition,Bt.transition=null;var l=Se;Se=1;var o=ye;ye|=4,cu.current=null,$g(e,r),Zh(r,e),og(Vo),Ra=!!Io,Vo=Io=null,e.current=r,Fg(r),fx(),ye=o,Se=l,Bt.transition=a}else e.current=r;if(ea&&(ea=!1,Gr=e,Ya=i),a=e.pendingLanes,a===0&&(nn=null),xx(r.stateNode),_t(e,Oe()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(qa)throw qa=!1,e=lc,lc=null,e;return Ya&1&&e.tag!==0&&ms(),a=e.pendingLanes,a&1?e===oc?ii++:(ii=0,oc=e):ii=0,fn(),null}function ms(){if(Gr!==null){var e=Lf(Ya),t=Bt.transition,r=Se;try{if(Bt.transition=null,Se=16>e?16:e,Gr===null)var n=!1;else{if(e=Gr,Gr=null,Ya=0,ye&6)throw Error(K(331));var i=ye;for(ye|=4,le=e.current;le!==null;){var a=le,l=a.child;if(le.flags&16){var o=a.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(le=u;le!==null;){var m=le;switch(m.tag){case 0:case 11:case 15:ni(8,m,a)}var h=m.child;if(h!==null)h.return=m,le=h;else for(;le!==null;){m=le;var f=m.sibling,j=m.return;if(Kh(m),m===u){le=null;break}if(f!==null){f.return=j,le=f;break}le=j}}}var y=a.alternate;if(y!==null){var b=y.child;if(b!==null){y.child=null;do{var w=b.sibling;b.sibling=null,b=w}while(b!==null)}}le=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,le=l;else e:for(;le!==null;){if(a=le,a.flags&2048)switch(a.tag){case 0:case 11:case 15:ni(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,le=x;break e}le=a.return}}var d=e.current;for(le=d;le!==null;){l=le;var p=l.child;if(l.subtreeFlags&2064&&p!==null)p.return=l,le=p;else e:for(l=d;le!==null;){if(o=le,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:hl(9,o)}}catch(C){Fe(o,o.return,C)}if(o===l){le=null;break e}var N=o.sibling;if(N!==null){N.return=o.return,le=N;break e}le=o.return}}if(ye=i,fn(),Nr&&typeof Nr.onPostCommitFiberRoot=="function")try{Nr.onPostCommitFiberRoot(al,e)}catch{}n=!0}return n}finally{Se=r,Bt.transition=t}}return!1}function Kd(e,t,r){t=bs(r,t),t=Lh(e,t,1),e=rn(e,t,1),t=xt(),e!==null&&(Di(e,1,t),_t(e,t))}function Fe(e,t,r){if(e.tag===3)Kd(e,e,r);else for(;t!==null;){if(t.tag===3){Kd(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(nn===null||!nn.has(n))){e=bs(r,e),e=Ih(t,e,1),t=rn(t,e,1),e=xt(),t!==null&&(Di(t,1,e),_t(t,e));break}}t=t.return}}function Bg(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=xt(),e.pingedLanes|=e.suspendedLanes&r,Xe===e&&(nt&r)===r&&(We===4||We===3&&(nt&130023424)===nt&&500>Oe()-du?_n(e,0):uu|=r),_t(e,t)}function ap(e,t){t===0&&(e.mode&1?(t=Hi,Hi<<=1,!(Hi&130023424)&&(Hi=4194304)):t=1);var r=xt();e=Or(e,t),e!==null&&(Di(e,t,r),_t(e,r))}function Hg(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),ap(e,r)}function Wg(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(K(314))}n!==null&&n.delete(t),ap(e,r)}var lp;lp=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||St.current)Nt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Nt=!1,Ag(e,t,r);Nt=!!(e.flags&131072)}else Nt=!1,De&&t.flags&1048576&&dh(t,Oa,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ha(e,t),e=t.pendingProps;var i=xs(t,dt.current);ds(t,r),i=su(null,t,n,e,i,r);var a=iu();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,kt(n)?(a=!0,$a(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Zc(t),i.updater=fl,t.stateNode=i,i._reactInternals=t,Ko(t,n,e,r),t=Zo(null,t,n,!0,a,r)):(t.tag=0,De&&a&&qc(t),ft(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ha(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=Yg(n),e=Kt(n,e),i){case 0:t=Xo(null,t,n,e,r);break e;case 1:t=Id(null,t,n,e,r);break e;case 11:t=Od(null,t,n,e,r);break e;case 14:t=Ld(null,t,n,Kt(n.type,e),r);break e}throw Error(K(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Kt(n,i),Xo(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Kt(n,i),Id(e,t,n,i,r);case 3:e:{if(Hh(t),e===null)throw Error(K(387));n=t.pendingProps,a=t.memoizedState,i=a.element,gh(e,t),Va(t,n,null,r);var l=t.memoizedState;if(n=l.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=bs(Error(K(423)),t),t=Vd(e,t,n,r,i);break e}else if(n!==i){i=bs(Error(K(424)),t),t=Vd(e,t,n,r,i);break e}else for(Rt=tn(t.stateNode.containerInfo.firstChild),Tt=t,De=!0,Zt=null,r=ph(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(gs(),n===i){t=Lr(e,t,r);break e}ft(e,t,n,r)}t=t.child}return t;case 5:return yh(t),e===null&&Yo(t),n=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,l=i.children,Uo(n,i)?l=null:a!==null&&Uo(n,a)&&(t.flags|=32),Bh(e,t),ft(e,t,l,r),t.child;case 6:return e===null&&Yo(t),null;case 13:return Wh(e,t,r);case 4:return eu(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=ys(t,null,n,r):ft(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Kt(n,i),Od(e,t,n,i,r);case 7:return ft(e,t,t.pendingProps,r),t.child;case 8:return ft(e,t,t.pendingProps.children,r),t.child;case 12:return ft(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,l=i.value,_e(La,n._currentValue),n._currentValue=l,a!==null)if(sr(a.value,l)){if(a.children===i.children&&!St.current){t=Lr(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){l=a.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=Tr(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var m=u.pending;m===null?c.next=c:(c.next=m.next,m.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),Qo(a.return,r,t),o.lanes|=r;break}c=c.next}}else if(a.tag===10)l=a.type===t.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(K(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),Qo(l,r,t),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===t){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}ft(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,ds(t,r),i=Ht(i),n=n(i),t.flags|=1,ft(e,t,n,r),t.child;case 14:return n=t.type,i=Kt(n,t.pendingProps),i=Kt(n.type,i),Ld(e,t,n,i,r);case 15:return Vh(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Kt(n,i),ha(e,t),t.tag=1,kt(n)?(e=!0,$a(t)):e=!1,ds(t,r),Oh(t,n,i),Ko(t,n,i,r),Zo(null,t,n,!0,e,r);case 19:return qh(e,t,r);case 22:return Uh(e,t,r)}throw Error(K(156,t.tag))};function op(e,t){return Mf(e,t)}function qg(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ut(e,t,r,n){return new qg(e,t,r,n)}function pu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Yg(e){if(typeof e=="function")return pu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===zc)return 11;if(e===Mc)return 14}return 2}function an(e,t){var r=e.alternate;return r===null?(r=Ut(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ga(e,t,r,n,i,a){var l=2;if(n=e,typeof e=="function")pu(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Jn:return En(r.children,i,a,t);case Tc:l=8,i|=8;break;case bo:return e=Ut(12,r,t,i|2),e.elementType=bo,e.lanes=a,e;case wo:return e=Ut(13,r,t,i),e.elementType=wo,e.lanes=a,e;case jo:return e=Ut(19,r,t,i),e.elementType=jo,e.lanes=a,e;case yf:return xl(r,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case xf:l=10;break e;case gf:l=9;break e;case zc:l=11;break e;case Mc:l=14;break e;case Wr:l=16,n=null;break e}throw Error(K(130,e==null?e:typeof e,""))}return t=Ut(l,r,t,i),t.elementType=e,t.type=n,t.lanes=a,t}function En(e,t,r,n){return e=Ut(7,e,n,t),e.lanes=r,e}function xl(e,t,r,n){return e=Ut(22,e,n,t),e.elementType=yf,e.lanes=r,e.stateNode={isHidden:!1},e}function lo(e,t,r){return e=Ut(6,e,null,t),e.lanes=r,e}function oo(e,t,r){return t=Ut(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Qg(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ul(0),this.expirationTimes=Ul(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ul(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function xu(e,t,r,n,i,a,l,o,c){return e=new Qg(e,t,r,o,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Ut(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zc(a),e}function Jg(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qn,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function cp(e){if(!e)return cn;e=e._reactInternals;e:{if(On(e)!==e||e.tag!==1)throw Error(K(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(kt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(K(171))}if(e.tag===1){var r=e.type;if(kt(r))return ch(e,r,t)}return t}function up(e,t,r,n,i,a,l,o,c){return e=xu(r,n,!0,e,i,a,l,o,c),e.context=cp(null),r=e.current,n=xt(),i=sn(r),a=Tr(n,i),a.callback=t??null,rn(r,a,i),e.current.lanes=i,Di(e,i,n),_t(e,n),e}function gl(e,t,r,n){var i=t.current,a=xt(),l=sn(i);return r=cp(r),t.context===null?t.context=r:t.pendingContext=r,t=Tr(a,l),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=rn(i,t,l),e!==null&&(nr(e,i,l,a),da(e,i,l)),l}function Ja(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Gd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function gu(e,t){Gd(e,t),(e=e.alternate)&&Gd(e,t)}function Kg(){return null}var dp=typeof reportError=="function"?reportError:function(e){console.error(e)};function yu(e){this._internalRoot=e}yl.prototype.render=yu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(K(409));gl(e,t,null,null)};yl.prototype.unmount=yu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zn(function(){gl(null,e,null,null)}),t[Fr]=null}};function yl(e){this._internalRoot=e}yl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Uf();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Yr.length&&t!==0&&t<Yr[r].priority;r++);Yr.splice(r,0,e),r===0&&Hf(e)}};function vu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function vl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Xd(){}function Gg(e,t,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var u=Ja(l);a.call(u)}}var l=up(t,n,e,0,null,!1,!1,"",Xd);return e._reactRootContainer=l,e[Fr]=l.current,xi(e.nodeType===8?e.parentNode:e),zn(),l}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var u=Ja(c);o.call(u)}}var c=xu(e,0,!1,null,null,!1,!1,"",Xd);return e._reactRootContainer=c,e[Fr]=c.current,xi(e.nodeType===8?e.parentNode:e),zn(function(){gl(t,c,r,n)}),c}function bl(e,t,r,n,i){var a=r._reactRootContainer;if(a){var l=a;if(typeof i=="function"){var o=i;i=function(){var c=Ja(l);o.call(c)}}gl(t,l,e,i)}else l=Gg(r,t,e,i,n);return Ja(l)}If=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Qs(t.pendingLanes);r!==0&&(Oc(t,r|1),_t(t,Oe()),!(ye&6)&&(ws=Oe()+500,fn()))}break;case 13:zn(function(){var n=Or(e,1);if(n!==null){var i=xt();nr(n,e,1,i)}}),gu(e,1)}};Lc=function(e){if(e.tag===13){var t=Or(e,134217728);if(t!==null){var r=xt();nr(t,e,134217728,r)}gu(e,134217728)}};Vf=function(e){if(e.tag===13){var t=sn(e),r=Or(e,t);if(r!==null){var n=xt();nr(r,e,t,n)}gu(e,t)}};Uf=function(){return Se};Bf=function(e,t){var r=Se;try{return Se=e,t()}finally{Se=r}};Ao=function(e,t,r){switch(t){case"input":if(ko(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=ul(n);if(!i)throw Error(K(90));bf(n),ko(n,i)}}}break;case"textarea":jf(e,r);break;case"select":t=r.value,t!=null&&ls(e,!!r.multiple,t,!1)}};Pf=mu;Df=zn;var Xg={usingClientEntryPoint:!1,Events:[Ai,Zn,ul,Ef,Cf,mu]},Is={findFiberByHostInstance:bn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Zg={bundleType:Is.bundleType,version:Is.version,rendererPackageName:Is.rendererPackageName,rendererConfig:Is.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ur.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Tf(e),e===null?null:e.stateNode},findFiberByHostInstance:Is.findFiberByHostInstance||Kg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ta=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ta.isDisabled&&ta.supportsFiber)try{al=ta.inject(Zg),Nr=ta}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xg;$t.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vu(t))throw Error(K(200));return Jg(e,t,null,r)};$t.createRoot=function(e,t){if(!vu(e))throw Error(K(299));var r=!1,n="",i=dp;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=xu(e,1,!1,null,null,r,!1,n,i),e[Fr]=t.current,xi(e.nodeType===8?e.parentNode:e),new yu(t)};$t.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(K(188)):(e=Object.keys(e).join(","),Error(K(268,e)));return e=Tf(t),e=e===null?null:e.stateNode,e};$t.flushSync=function(e){return zn(e)};$t.hydrate=function(e,t,r){if(!vl(t))throw Error(K(200));return bl(null,e,t,!0,r)};$t.hydrateRoot=function(e,t,r){if(!vu(e))throw Error(K(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",l=dp;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=up(t,null,e,1,r??null,i,!1,a,l),e[Fr]=t.current,xi(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new yl(t)};$t.render=function(e,t,r){if(!vl(t))throw Error(K(200));return bl(null,e,t,!1,r)};$t.unmountComponentAtNode=function(e){if(!vl(e))throw Error(K(40));return e._reactRootContainer?(zn(function(){bl(null,null,e,!1,function(){e._reactRootContainer=null,e[Fr]=null})}),!0):!1};$t.unstable_batchedUpdates=mu;$t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!vl(r))throw Error(K(200));if(e==null||e._reactInternals===void 0)throw Error(K(38));return bl(e,t,r,!1,n)};$t.version="18.3.1-next-f1338f8080-20240426";function mp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mp)}catch(e){console.error(e)}}mp(),mf.exports=$t;var ey=mf.exports,fp,Zd=ey;fp=Zd.createRoot,Zd.hydrateRoot;/**
 * react-router v7.7.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var em="popstate";function ty(e={}){function t(n,i){let{pathname:a,search:l,hash:o}=n.location;return dc("",{pathname:a,search:l,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:ki(i)}return ny(t,r,null,e)}function Re(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ir(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function ry(){return Math.random().toString(36).substring(2,10)}function tm(e,t){return{usr:e.state,key:e.key,idx:t}}function dc(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Es(t):t,state:r,key:t&&t.key||n||ry()}}function ki({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Es(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function ny(e,t,r,n={}){let{window:i=document.defaultView,v5Compat:a=!1}=n,l=i.history,o="POP",c=null,u=m();u==null&&(u=0,l.replaceState({...l.state,idx:u},""));function m(){return(l.state||{idx:null}).idx}function h(){o="POP";let w=m(),x=w==null?null:w-u;u=w,c&&c({action:o,location:b.location,delta:x})}function f(w,x){o="PUSH";let d=dc(b.location,w,x);u=m()+1;let p=tm(d,u),N=b.createHref(d);try{l.pushState(p,"",N)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(N)}a&&c&&c({action:o,location:b.location,delta:1})}function j(w,x){o="REPLACE";let d=dc(b.location,w,x);u=m();let p=tm(d,u),N=b.createHref(d);l.replaceState(p,"",N),a&&c&&c({action:o,location:b.location,delta:0})}function y(w){return sy(w)}let b={get action(){return o},get location(){return e(i,l)},listen(w){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(em,h),c=w,()=>{i.removeEventListener(em,h),c=null}},createHref(w){return t(i,w)},createURL:y,encodeLocation(w){let x=y(w);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:j,go(w){return l.go(w)}};return b}function sy(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Re(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:ki(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function hp(e,t,r="/"){return iy(e,t,r,!1)}function iy(e,t,r,n){let i=typeof t=="string"?Es(t):t,a=Ir(i.pathname||"/",r);if(a==null)return null;let l=pp(e);ay(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let u=gy(a);o=py(l[c],u,n)}return o}function pp(e,t=[],r=[],n=""){let i=(a,l,o)=>{let c={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};c.relativePath.startsWith("/")&&(Re(c.relativePath.startsWith(n),`Absolute route path "${c.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(n.length));let u=zr([n,c.relativePath]),m=r.concat(c);a.children&&a.children.length>0&&(Re(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),pp(a.children,t,m,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:fy(u,a.index),routesMeta:m})};return e.forEach((a,l)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))i(a,l);else for(let c of xp(a.path))i(a,l,c)}),t}function xp(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let l=xp(n.join("/")),o=[];return o.push(...l.map(c=>c===""?a:[a,c].join("/"))),i&&o.push(...l),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function ay(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:hy(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var ly=/^:[\w-]+$/,oy=3,cy=2,uy=1,dy=10,my=-2,rm=e=>e==="*";function fy(e,t){let r=e.split("/"),n=r.length;return r.some(rm)&&(n+=my),t&&(n+=cy),r.filter(i=>!rm(i)).reduce((i,a)=>i+(ly.test(a)?oy:a===""?uy:dy),n)}function hy(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function py(e,t,r=!1){let{routesMeta:n}=e,i={},a="/",l=[];for(let o=0;o<n.length;++o){let c=n[o],u=o===n.length-1,m=a==="/"?t:t.slice(a.length)||"/",h=Ka({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},m),f=c.route;if(!h&&u&&r&&!n[n.length-1].route.index&&(h=Ka({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},m)),!h)return null;Object.assign(i,h.params),l.push({params:i,pathname:zr([a,h.pathname]),pathnameBase:wy(zr([a,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(a=zr([a,h.pathnameBase]))}return l}function Ka(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=xy(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let a=i[0],l=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((u,{paramName:m,isOptional:h},f)=>{if(m==="*"){let y=o[f]||"";l=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const j=o[f];return h&&!j?u[m]=void 0:u[m]=(j||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:l,pattern:e}}function xy(e,t=!1,r=!0){ir(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function gy(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ir(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Ir(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function yy(e,t="/"){let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?Es(e):e;return{pathname:r?r.startsWith("/")?r:vy(r,t):t,search:jy(n),hash:Ny(i)}}function vy(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function co(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function by(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function bu(e){let t=by(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function wu(e,t,r,n=!1){let i;typeof e=="string"?i=Es(e):(i={...e},Re(!i.pathname||!i.pathname.includes("?"),co("?","pathname","search",i)),Re(!i.pathname||!i.pathname.includes("#"),co("#","pathname","hash",i)),Re(!i.search||!i.search.includes("#"),co("#","search","hash",i)));let a=e===""||i.pathname==="",l=a?"/":i.pathname,o;if(l==null)o=r;else{let h=t.length-1;if(!n&&l.startsWith("..")){let f=l.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}o=h>=0?t[h]:"/"}let c=yy(i,o),u=l&&l!=="/"&&l.endsWith("/"),m=(a||l===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||m)&&(c.pathname+="/"),c}var zr=e=>e.join("/").replace(/\/\/+/g,"/"),wy=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),jy=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Ny=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Sy(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var gp=["POST","PUT","PATCH","DELETE"];new Set(gp);var ky=["GET",...gp];new Set(ky);var Cs=g.createContext(null);Cs.displayName="DataRouter";var wl=g.createContext(null);wl.displayName="DataRouterState";g.createContext(!1);var yp=g.createContext({isTransitioning:!1});yp.displayName="ViewTransition";var _y=g.createContext(new Map);_y.displayName="Fetchers";var Ey=g.createContext(null);Ey.displayName="Await";var ar=g.createContext(null);ar.displayName="Navigation";var zi=g.createContext(null);zi.displayName="Location";var lr=g.createContext({outlet:null,matches:[],isDataRoute:!1});lr.displayName="Route";var ju=g.createContext(null);ju.displayName="RouteError";function Cy(e,{relative:t}={}){Re(Ps(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=g.useContext(ar),{hash:i,pathname:a,search:l}=Mi(e,{relative:t}),o=a;return r!=="/"&&(o=a==="/"?r:zr([r,a])),n.createHref({pathname:o,search:l,hash:i})}function Ps(){return g.useContext(zi)!=null}function Ot(){return Re(Ps(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(zi).location}var vp="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bp(e){g.useContext(ar).static||g.useLayoutEffect(e)}function it(){let{isDataRoute:e}=g.useContext(lr);return e?Vy():Py()}function Py(){Re(Ps(),"useNavigate() may be used only in the context of a <Router> component.");let e=g.useContext(Cs),{basename:t,navigator:r}=g.useContext(ar),{matches:n}=g.useContext(lr),{pathname:i}=Ot(),a=JSON.stringify(bu(n)),l=g.useRef(!1);return bp(()=>{l.current=!0}),g.useCallback((c,u={})=>{if(ir(l.current,vp),!l.current)return;if(typeof c=="number"){r.go(c);return}let m=wu(c,JSON.parse(a),i,u.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:zr([t,m.pathname])),(u.replace?r.replace:r.push)(m,u.state,u)},[t,r,a,i,e])}g.createContext(null);function Ln(){let{matches:e}=g.useContext(lr),t=e[e.length-1];return t?t.params:{}}function Mi(e,{relative:t}={}){let{matches:r}=g.useContext(lr),{pathname:n}=Ot(),i=JSON.stringify(bu(r));return g.useMemo(()=>wu(e,JSON.parse(i),n,t==="path"),[e,i,n,t])}function Dy(e,t){return wp(e,t)}function wp(e,t,r,n){var x;Re(Ps(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=g.useContext(ar),{matches:a}=g.useContext(lr),l=a[a.length-1],o=l?l.params:{},c=l?l.pathname:"/",u=l?l.pathnameBase:"/",m=l&&l.route;{let d=m&&m.path||"";jp(c,!m||d.endsWith("*")||d.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${d}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${d}"> to <Route path="${d==="/"?"*":`${d}/*`}">.`)}let h=Ot(),f;if(t){let d=typeof t=="string"?Es(t):t;Re(u==="/"||((x=d.pathname)==null?void 0:x.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${d.pathname}" was given in the \`location\` prop.`),f=d}else f=h;let j=f.pathname||"/",y=j;if(u!=="/"){let d=u.replace(/^\//,"").split("/");y="/"+j.replace(/^\//,"").split("/").slice(d.length).join("/")}let b=hp(e,{pathname:y});ir(m||b!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),ir(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=My(b&&b.map(d=>Object.assign({},d,{params:Object.assign({},o,d.params),pathname:zr([u,i.encodeLocation?i.encodeLocation(d.pathname).pathname:d.pathname]),pathnameBase:d.pathnameBase==="/"?u:zr([u,i.encodeLocation?i.encodeLocation(d.pathnameBase).pathname:d.pathnameBase])})),a,r,n);return t&&w?g.createElement(zi.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},w):w}function Ry(){let e=Iy(),t=Sy(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=g.createElement(g.Fragment,null,g.createElement("p",null,"💿 Hey developer 👋"),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:a},"ErrorBoundary")," or"," ",g.createElement("code",{style:a},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),r?g.createElement("pre",{style:i},r):null,l)}var Ay=g.createElement(Ry,null),Ty=class extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?g.createElement(lr.Provider,{value:this.props.routeContext},g.createElement(ju.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function zy({routeContext:e,match:t,children:r}){let n=g.useContext(Cs);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),g.createElement(lr.Provider,{value:e},r)}function My(e,t=[],r=null,n=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,a=r==null?void 0:r.errors;if(a!=null){let c=i.findIndex(u=>u.route.id&&(a==null?void 0:a[u.route.id])!==void 0);Re(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let l=!1,o=-1;if(r)for(let c=0;c<i.length;c++){let u=i[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(o=c),u.route.id){let{loaderData:m,errors:h}=r,f=u.route.loader&&!m.hasOwnProperty(u.route.id)&&(!h||h[u.route.id]===void 0);if(u.route.lazy||f){l=!0,o>=0?i=i.slice(0,o+1):i=[i[0]];break}}}return i.reduceRight((c,u,m)=>{let h,f=!1,j=null,y=null;r&&(h=a&&u.route.id?a[u.route.id]:void 0,j=u.route.errorElement||Ay,l&&(o<0&&m===0?(jp("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,y=null):o===m&&(f=!0,y=u.route.hydrateFallbackElement||null)));let b=t.concat(i.slice(0,m+1)),w=()=>{let x;return h?x=j:f?x=y:u.route.Component?x=g.createElement(u.route.Component,null):u.route.element?x=u.route.element:x=c,g.createElement(zy,{match:u,routeContext:{outlet:c,matches:b,isDataRoute:r!=null},children:x})};return r&&(u.route.ErrorBoundary||u.route.errorElement||m===0)?g.createElement(Ty,{location:r.location,revalidation:r.revalidation,component:j,error:h,children:w(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):w()},null)}function Nu(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $y(e){let t=g.useContext(Cs);return Re(t,Nu(e)),t}function Fy(e){let t=g.useContext(wl);return Re(t,Nu(e)),t}function Oy(e){let t=g.useContext(lr);return Re(t,Nu(e)),t}function Su(e){let t=Oy(e),r=t.matches[t.matches.length-1];return Re(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function Ly(){return Su("useRouteId")}function Iy(){var n;let e=g.useContext(ju),t=Fy("useRouteError"),r=Su("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function Vy(){let{router:e}=$y("useNavigate"),t=Su("useNavigate"),r=g.useRef(!1);return bp(()=>{r.current=!0}),g.useCallback(async(i,a={})=>{ir(r.current,vp),r.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...a}))},[e,t])}var nm={};function jp(e,t,r){!t&&!nm[e]&&(nm[e]=!0,ir(!1,r))}g.memo(Uy);function Uy({routes:e,future:t,state:r}){return wp(e,void 0,r,t)}function mc({to:e,replace:t,state:r,relative:n}){Re(Ps(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=g.useContext(ar);ir(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=g.useContext(lr),{pathname:l}=Ot(),o=it(),c=wu(e,bu(a),l,n==="path"),u=JSON.stringify(c);return g.useEffect(()=>{o(JSON.parse(u),{replace:t,state:r,relative:n})},[o,u,n,t,r]),null}function $e(e){Re(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function By({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:i,static:a=!1}){Re(!Ps(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),o=g.useMemo(()=>({basename:l,navigator:i,static:a,future:{}}),[l,i,a]);typeof r=="string"&&(r=Es(r));let{pathname:c="/",search:u="",hash:m="",state:h=null,key:f="default"}=r,j=g.useMemo(()=>{let y=Ir(c,l);return y==null?null:{location:{pathname:y,search:u,hash:m,state:h,key:f},navigationType:n}},[l,c,u,m,h,f,n]);return ir(j!=null,`<Router basename="${l}"> is not able to match the URL "${c}${u}${m}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:g.createElement(ar.Provider,{value:o},g.createElement(zi.Provider,{children:t,value:j}))}function Hy({children:e,location:t}){return Dy(fc(e),t)}function fc(e,t=[]){let r=[];return g.Children.forEach(e,(n,i)=>{if(!g.isValidElement(n))return;let a=[...t,i];if(n.type===g.Fragment){r.push.apply(r,fc(n.props.children,a));return}Re(n.type===$e,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Re(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=fc(n.props.children,a)),r.push(l)}),r}var ya="get",va="application/x-www-form-urlencoded";function jl(e){return e!=null&&typeof e.tagName=="string"}function Wy(e){return jl(e)&&e.tagName.toLowerCase()==="button"}function qy(e){return jl(e)&&e.tagName.toLowerCase()==="form"}function Yy(e){return jl(e)&&e.tagName.toLowerCase()==="input"}function Qy(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Jy(e,t){return e.button===0&&(!t||t==="_self")&&!Qy(e)}var ra=null;function Ky(){if(ra===null)try{new FormData(document.createElement("form"),0),ra=!1}catch{ra=!0}return ra}var Gy=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function uo(e){return e!=null&&!Gy.has(e)?(ir(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${va}"`),null):e}function Xy(e,t){let r,n,i,a,l;if(qy(e)){let o=e.getAttribute("action");n=o?Ir(o,t):null,r=e.getAttribute("method")||ya,i=uo(e.getAttribute("enctype"))||va,a=new FormData(e)}else if(Wy(e)||Yy(e)&&(e.type==="submit"||e.type==="image")){let o=e.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||o.getAttribute("action");if(n=c?Ir(c,t):null,r=e.getAttribute("formmethod")||o.getAttribute("method")||ya,i=uo(e.getAttribute("formenctype"))||uo(o.getAttribute("enctype"))||va,a=new FormData(o,e),!Ky()){let{name:u,type:m,value:h}=e;if(m==="image"){let f=u?`${u}.`:"";a.append(`${f}x`,"0"),a.append(`${f}y`,"0")}else u&&a.append(u,h)}}else{if(jl(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=ya,n=null,i=va,l=e}return a&&i==="text/plain"&&(l=a,a=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ku(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Zy(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&Ir(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function ev(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function tv(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function rv(e,t,r){let n=await Promise.all(e.map(async i=>{let a=t.routes[i.route.id];if(a){let l=await ev(a,r);return l.links?l.links():[]}return[]}));return av(n.flat(1).filter(tv).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function sm(e,t,r,n,i,a){let l=(c,u)=>r[u]?c.route.id!==r[u].route.id:!0,o=(c,u)=>{var m;return r[u].pathname!==c.pathname||((m=r[u].route.path)==null?void 0:m.endsWith("*"))&&r[u].params["*"]!==c.params["*"]};return a==="assets"?t.filter((c,u)=>l(c,u)||o(c,u)):a==="data"?t.filter((c,u)=>{var h;let m=n.routes[c.route.id];if(!m||!m.hasLoader)return!1;if(l(c,u)||o(c,u))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((h=r[0])==null?void 0:h.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function nv(e,t,{includeHydrateFallback:r}={}){return sv(e.map(n=>{let i=t.routes[n.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function sv(e){return[...new Set(e)]}function iv(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function av(e,t){let r=new Set;return new Set(t),e.reduce((n,i)=>{let a=JSON.stringify(iv(i));return r.has(a)||(r.add(a),n.push({key:a,link:i})),n},[])}function Np(){let e=g.useContext(Cs);return ku(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function lv(){let e=g.useContext(wl);return ku(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var _u=g.createContext(void 0);_u.displayName="FrameworkContext";function Sp(){let e=g.useContext(_u);return ku(e,"You must render this element inside a <HydratedRouter> element"),e}function ov(e,t){let r=g.useContext(_u),[n,i]=g.useState(!1),[a,l]=g.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:u,onMouseLeave:m,onTouchStart:h}=t,f=g.useRef(null);g.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let b=x=>{x.forEach(d=>{l(d.isIntersecting)})},w=new IntersectionObserver(b,{threshold:.5});return f.current&&w.observe(f.current),()=>{w.disconnect()}}},[e]),g.useEffect(()=>{if(n){let b=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(b)}}},[n]);let j=()=>{i(!0)},y=()=>{i(!1),l(!1)};return r?e!=="intent"?[a,f,{}]:[a,f,{onFocus:Vs(o,j),onBlur:Vs(c,y),onMouseEnter:Vs(u,j),onMouseLeave:Vs(m,y),onTouchStart:Vs(h,j)}]:[!1,f,{}]}function Vs(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function cv({page:e,...t}){let{router:r}=Np(),n=g.useMemo(()=>hp(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?g.createElement(dv,{page:e,matches:n,...t}):null}function uv(e){let{manifest:t,routeModules:r}=Sp(),[n,i]=g.useState([]);return g.useEffect(()=>{let a=!1;return rv(e,t,r).then(l=>{a||i(l)}),()=>{a=!0}},[e,t,r]),n}function dv({page:e,matches:t,...r}){let n=Ot(),{manifest:i,routeModules:a}=Sp(),{basename:l}=Np(),{loaderData:o,matches:c}=lv(),u=g.useMemo(()=>sm(e,t,c,i,n,"data"),[e,t,c,i,n]),m=g.useMemo(()=>sm(e,t,c,i,n,"assets"),[e,t,c,i,n]),h=g.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let y=new Set,b=!1;if(t.forEach(x=>{var p;let d=i.routes[x.route.id];!d||!d.hasLoader||(!u.some(N=>N.route.id===x.route.id)&&x.route.id in o&&((p=a[x.route.id])!=null&&p.shouldRevalidate)||d.hasClientLoader?b=!0:y.add(x.route.id))}),y.size===0)return[];let w=Zy(e,l,"data");return b&&y.size>0&&w.searchParams.set("_routes",t.filter(x=>y.has(x.route.id)).map(x=>x.route.id).join(",")),[w.pathname+w.search]},[l,o,n,i,u,t,e,a]),f=g.useMemo(()=>nv(m,i),[m,i]),j=uv(m);return g.createElement(g.Fragment,null,h.map(y=>g.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...r})),f.map(y=>g.createElement("link",{key:y,rel:"modulepreload",href:y,...r})),j.map(({key:y,link:b})=>g.createElement("link",{key:y,...b})))}function mv(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var kp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{kp&&(window.__reactRouterVersion="7.7.0")}catch{}function fv({basename:e,children:t,window:r}){let n=g.useRef();n.current==null&&(n.current=ty({window:r,v5Compat:!0}));let i=n.current,[a,l]=g.useState({action:i.action,location:i.location}),o=g.useCallback(c=>{g.startTransition(()=>l(c))},[l]);return g.useLayoutEffect(()=>i.listen(o),[i,o]),g.createElement(By,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:i})}var _p=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yr=g.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:i,reloadDocument:a,replace:l,state:o,target:c,to:u,preventScrollReset:m,viewTransition:h,...f},j){let{basename:y}=g.useContext(ar),b=typeof u=="string"&&_p.test(u),w,x=!1;if(typeof u=="string"&&b&&(w=u,kp))try{let P=new URL(window.location.href),S=u.startsWith("//")?new URL(P.protocol+u):new URL(u),M=Ir(S.pathname,y);S.origin===P.origin&&M!=null?u=M+S.search+S.hash:x=!0}catch{ir(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let d=Cy(u,{relative:i}),[p,N,C]=ov(n,f),z=gv(u,{replace:l,state:o,target:c,preventScrollReset:m,relative:i,viewTransition:h});function E(P){t&&t(P),P.defaultPrevented||z(P)}let D=g.createElement("a",{...f,...C,href:w||d,onClick:x||a?t:E,ref:mv(j,N),target:c,"data-discover":!b&&r==="render"?"true":void 0});return p&&!b?g.createElement(g.Fragment,null,D,g.createElement(cv,{page:d})):D});yr.displayName="Link";var hv=g.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:i=!1,style:a,to:l,viewTransition:o,children:c,...u},m){let h=Mi(l,{relative:u.relative}),f=Ot(),j=g.useContext(wl),{navigator:y,basename:b}=g.useContext(ar),w=j!=null&&jv(h)&&o===!0,x=y.encodeLocation?y.encodeLocation(h).pathname:h.pathname,d=f.pathname,p=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;r||(d=d.toLowerCase(),p=p?p.toLowerCase():null,x=x.toLowerCase()),p&&b&&(p=Ir(p,b)||p);const N=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let C=d===x||!i&&d.startsWith(x)&&d.charAt(N)==="/",z=p!=null&&(p===x||!i&&p.startsWith(x)&&p.charAt(x.length)==="/"),E={isActive:C,isPending:z,isTransitioning:w},D=C?t:void 0,P;typeof n=="function"?P=n(E):P=[n,C?"active":null,z?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let S=typeof a=="function"?a(E):a;return g.createElement(yr,{...u,"aria-current":D,className:P,ref:m,style:S,to:l,viewTransition:o},typeof c=="function"?c(E):c)});hv.displayName="NavLink";var pv=g.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:i,state:a,method:l=ya,action:o,onSubmit:c,relative:u,preventScrollReset:m,viewTransition:h,...f},j)=>{let y=bv(),b=wv(o,{relative:u}),w=l.toLowerCase()==="get"?"get":"post",x=typeof o=="string"&&_p.test(o),d=p=>{if(c&&c(p),p.defaultPrevented)return;p.preventDefault();let N=p.nativeEvent.submitter,C=(N==null?void 0:N.getAttribute("formmethod"))||l;y(N||p.currentTarget,{fetcherKey:t,method:C,navigate:r,replace:i,state:a,relative:u,preventScrollReset:m,viewTransition:h})};return g.createElement("form",{ref:j,method:w,action:b,onSubmit:n?c:d,...f,"data-discover":!x&&e==="render"?"true":void 0})});pv.displayName="Form";function xv(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ep(e){let t=g.useContext(Cs);return Re(t,xv(e)),t}function gv(e,{target:t,replace:r,state:n,preventScrollReset:i,relative:a,viewTransition:l}={}){let o=it(),c=Ot(),u=Mi(e,{relative:a});return g.useCallback(m=>{if(Jy(m,t)){m.preventDefault();let h=r!==void 0?r:ki(c)===ki(u);o(e,{replace:h,state:n,preventScrollReset:i,relative:a,viewTransition:l})}},[c,o,u,r,n,t,e,i,a,l])}var yv=0,vv=()=>`__${String(++yv)}__`;function bv(){let{router:e}=Ep("useSubmit"),{basename:t}=g.useContext(ar),r=Ly();return g.useCallback(async(n,i={})=>{let{action:a,method:l,encType:o,formData:c,body:u}=Xy(n,t);if(i.navigate===!1){let m=i.fetcherKey||vv();await e.fetch(m,r,i.action||a,{preventScrollReset:i.preventScrollReset,formData:c,body:u,formMethod:i.method||l,formEncType:i.encType||o,flushSync:i.flushSync})}else await e.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:c,body:u,formMethod:i.method||l,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,r])}function wv(e,{relative:t}={}){let{basename:r}=g.useContext(ar),n=g.useContext(lr);Re(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),a={...Mi(e||".",{relative:t})},l=Ot();if(e==null){a.search=l.search;let o=new URLSearchParams(a.search),c=o.getAll("index");if(c.some(m=>m==="")){o.delete("index"),c.filter(h=>h).forEach(h=>o.append("index",h));let m=o.toString();a.search=m?`?${m}`:""}}return(!e||e===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(a.pathname=a.pathname==="/"?r:zr([r,a.pathname])),ki(a)}function jv(e,t={}){let r=g.useContext(yp);Re(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Ep("useViewTransitionState"),i=Mi(e,{relative:t.relative});if(!r.isTransitioning)return!1;let a=Ir(r.currentLocation.pathname,n)||r.currentLocation.pathname,l=Ir(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Ka(i.pathname,l)!=null||Ka(i.pathname,a)!=null}function Cp(e,t){return function(){return e.apply(t,arguments)}}const{toString:Nv}=Object.prototype,{getPrototypeOf:Eu}=Object,{iterator:Nl,toStringTag:Pp}=Symbol,Sl=(e=>t=>{const r=Nv.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),or=e=>(e=e.toLowerCase(),t=>Sl(t)===e),kl=e=>t=>typeof t===e,{isArray:Ds}=Array,_i=kl("undefined");function Sv(e){return e!==null&&!_i(e)&&e.constructor!==null&&!_i(e.constructor)&&Et(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Dp=or("ArrayBuffer");function kv(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Dp(e.buffer),t}const _v=kl("string"),Et=kl("function"),Rp=kl("number"),_l=e=>e!==null&&typeof e=="object",Ev=e=>e===!0||e===!1,ba=e=>{if(Sl(e)!=="object")return!1;const t=Eu(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Pp in e)&&!(Nl in e)},Cv=or("Date"),Pv=or("File"),Dv=or("Blob"),Rv=or("FileList"),Av=e=>_l(e)&&Et(e.pipe),Tv=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Et(e.append)&&((t=Sl(e))==="formdata"||t==="object"&&Et(e.toString)&&e.toString()==="[object FormData]"))},zv=or("URLSearchParams"),[Mv,$v,Fv,Ov]=["ReadableStream","Request","Response","Headers"].map(or),Lv=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function $i(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,i;if(typeof e!="object"&&(e=[e]),Ds(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{const a=r?Object.getOwnPropertyNames(e):Object.keys(e),l=a.length;let o;for(n=0;n<l;n++)o=a[n],t.call(null,e[o],o,e)}}function Ap(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,i;for(;n-- >0;)if(i=r[n],t===i.toLowerCase())return i;return null}const Nn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Tp=e=>!_i(e)&&e!==Nn;function hc(){const{caseless:e}=Tp(this)&&this||{},t={},r=(n,i)=>{const a=e&&Ap(t,i)||i;ba(t[a])&&ba(n)?t[a]=hc(t[a],n):ba(n)?t[a]=hc({},n):Ds(n)?t[a]=n.slice():t[a]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&$i(arguments[n],r);return t}const Iv=(e,t,r,{allOwnKeys:n}={})=>($i(t,(i,a)=>{r&&Et(i)?e[a]=Cp(i,r):e[a]=i},{allOwnKeys:n}),e),Vv=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Uv=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},Bv=(e,t,r,n)=>{let i,a,l;const o={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)l=i[a],(!n||n(l,e,t))&&!o[l]&&(t[l]=e[l],o[l]=!0);e=r!==!1&&Eu(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},Hv=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},Wv=e=>{if(!e)return null;if(Ds(e))return e;let t=e.length;if(!Rp(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},qv=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Eu(Uint8Array)),Yv=(e,t)=>{const n=(e&&e[Nl]).call(e);let i;for(;(i=n.next())&&!i.done;){const a=i.value;t.call(e,a[0],a[1])}},Qv=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},Jv=or("HTMLFormElement"),Kv=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),im=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Gv=or("RegExp"),zp=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};$i(r,(i,a)=>{let l;(l=t(i,a,e))!==!1&&(n[a]=l||i)}),Object.defineProperties(e,n)},Xv=e=>{zp(e,(t,r)=>{if(Et(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(Et(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Zv=(e,t)=>{const r={},n=i=>{i.forEach(a=>{r[a]=!0})};return Ds(e)?n(e):n(String(e).split(t)),r},eb=()=>{},tb=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function rb(e){return!!(e&&Et(e.append)&&e[Pp]==="FormData"&&e[Nl])}const nb=e=>{const t=new Array(10),r=(n,i)=>{if(_l(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[i]=n;const a=Ds(n)?[]:{};return $i(n,(l,o)=>{const c=r(l,i+1);!_i(c)&&(a[o]=c)}),t[i]=void 0,a}}return n};return r(e,0)},sb=or("AsyncFunction"),ib=e=>e&&(_l(e)||Et(e))&&Et(e.then)&&Et(e.catch),Mp=((e,t)=>e?setImmediate:t?((r,n)=>(Nn.addEventListener("message",({source:i,data:a})=>{i===Nn&&a===r&&n.length&&n.shift()()},!1),i=>{n.push(i),Nn.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Et(Nn.postMessage)),ab=typeof queueMicrotask<"u"?queueMicrotask.bind(Nn):typeof process<"u"&&process.nextTick||Mp,lb=e=>e!=null&&Et(e[Nl]),$={isArray:Ds,isArrayBuffer:Dp,isBuffer:Sv,isFormData:Tv,isArrayBufferView:kv,isString:_v,isNumber:Rp,isBoolean:Ev,isObject:_l,isPlainObject:ba,isReadableStream:Mv,isRequest:$v,isResponse:Fv,isHeaders:Ov,isUndefined:_i,isDate:Cv,isFile:Pv,isBlob:Dv,isRegExp:Gv,isFunction:Et,isStream:Av,isURLSearchParams:zv,isTypedArray:qv,isFileList:Rv,forEach:$i,merge:hc,extend:Iv,trim:Lv,stripBOM:Vv,inherits:Uv,toFlatObject:Bv,kindOf:Sl,kindOfTest:or,endsWith:Hv,toArray:Wv,forEachEntry:Yv,matchAll:Qv,isHTMLForm:Jv,hasOwnProperty:im,hasOwnProp:im,reduceDescriptors:zp,freezeMethods:Xv,toObjectSet:Zv,toCamelCase:Kv,noop:eb,toFiniteNumber:tb,findKey:Ap,global:Nn,isContextDefined:Tp,isSpecCompliantForm:rb,toJSONObject:nb,isAsyncFn:sb,isThenable:ib,setImmediate:Mp,asap:ab,isIterable:lb};function fe(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}$.inherits(fe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$.toJSONObject(this.config),code:this.code,status:this.status}}});const $p=fe.prototype,Fp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Fp[e]={value:e}});Object.defineProperties(fe,Fp);Object.defineProperty($p,"isAxiosError",{value:!0});fe.from=(e,t,r,n,i,a)=>{const l=Object.create($p);return $.toFlatObject(e,l,function(c){return c!==Error.prototype},o=>o!=="isAxiosError"),fe.call(l,e.message,t,r,n,i),l.cause=e,l.name=e.name,a&&Object.assign(l,a),l};const ob=null;function pc(e){return $.isPlainObject(e)||$.isArray(e)}function Op(e){return $.endsWith(e,"[]")?e.slice(0,-2):e}function am(e,t,r){return e?e.concat(t).map(function(i,a){return i=Op(i),!r&&a?"["+i+"]":i}).join(r?".":""):t}function cb(e){return $.isArray(e)&&!e.some(pc)}const ub=$.toFlatObject($,{},null,function(t){return/^is[A-Z]/.test(t)});function El(e,t,r){if(!$.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=$.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,w){return!$.isUndefined(w[b])});const n=r.metaTokens,i=r.visitor||m,a=r.dots,l=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&$.isSpecCompliantForm(t);if(!$.isFunction(i))throw new TypeError("visitor must be a function");function u(y){if(y===null)return"";if($.isDate(y))return y.toISOString();if($.isBoolean(y))return y.toString();if(!c&&$.isBlob(y))throw new fe("Blob is not supported. Use a Buffer instead.");return $.isArrayBuffer(y)||$.isTypedArray(y)?c&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function m(y,b,w){let x=y;if(y&&!w&&typeof y=="object"){if($.endsWith(b,"{}"))b=n?b:b.slice(0,-2),y=JSON.stringify(y);else if($.isArray(y)&&cb(y)||($.isFileList(y)||$.endsWith(b,"[]"))&&(x=$.toArray(y)))return b=Op(b),x.forEach(function(p,N){!($.isUndefined(p)||p===null)&&t.append(l===!0?am([b],N,a):l===null?b:b+"[]",u(p))}),!1}return pc(y)?!0:(t.append(am(w,b,a),u(y)),!1)}const h=[],f=Object.assign(ub,{defaultVisitor:m,convertValue:u,isVisitable:pc});function j(y,b){if(!$.isUndefined(y)){if(h.indexOf(y)!==-1)throw Error("Circular reference detected in "+b.join("."));h.push(y),$.forEach(y,function(x,d){(!($.isUndefined(x)||x===null)&&i.call(t,x,$.isString(d)?d.trim():d,b,f))===!0&&j(x,b?b.concat(d):[d])}),h.pop()}}if(!$.isObject(e))throw new TypeError("data must be an object");return j(e),t}function lm(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Cu(e,t){this._pairs=[],e&&El(e,this,t)}const Lp=Cu.prototype;Lp.append=function(t,r){this._pairs.push([t,r])};Lp.toString=function(t){const r=t?function(n){return t.call(this,n,lm)}:lm;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function db(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ip(e,t,r){if(!t)return e;const n=r&&r.encode||db;$.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let a;if(i?a=i(t,r):a=$.isURLSearchParams(t)?t.toString():new Cu(t,r).toString(n),a){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class om{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){$.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Vp={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},mb=typeof URLSearchParams<"u"?URLSearchParams:Cu,fb=typeof FormData<"u"?FormData:null,hb=typeof Blob<"u"?Blob:null,pb={isBrowser:!0,classes:{URLSearchParams:mb,FormData:fb,Blob:hb},protocols:["http","https","file","blob","url","data"]},Pu=typeof window<"u"&&typeof document<"u",xc=typeof navigator=="object"&&navigator||void 0,xb=Pu&&(!xc||["ReactNative","NativeScript","NS"].indexOf(xc.product)<0),gb=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",yb=Pu&&window.location.href||"http://localhost",vb=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Pu,hasStandardBrowserEnv:xb,hasStandardBrowserWebWorkerEnv:gb,navigator:xc,origin:yb},Symbol.toStringTag,{value:"Module"})),ct={...vb,...pb};function bb(e,t){return El(e,new ct.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,a){return ct.isNode&&$.isBuffer(r)?(this.append(n,r.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}function wb(e){return $.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function jb(e){const t={},r=Object.keys(e);let n;const i=r.length;let a;for(n=0;n<i;n++)a=r[n],t[a]=e[a];return t}function Up(e){function t(r,n,i,a){let l=r[a++];if(l==="__proto__")return!0;const o=Number.isFinite(+l),c=a>=r.length;return l=!l&&$.isArray(i)?i.length:l,c?($.hasOwnProp(i,l)?i[l]=[i[l],n]:i[l]=n,!o):((!i[l]||!$.isObject(i[l]))&&(i[l]=[]),t(r,n,i[l],a)&&$.isArray(i[l])&&(i[l]=jb(i[l])),!o)}if($.isFormData(e)&&$.isFunction(e.entries)){const r={};return $.forEachEntry(e,(n,i)=>{t(wb(n),i,r,0)}),r}return null}function Nb(e,t,r){if($.isString(e))try{return(t||JSON.parse)(e),$.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(0,JSON.stringify)(e)}const Fi={transitional:Vp,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,a=$.isObject(t);if(a&&$.isHTMLForm(t)&&(t=new FormData(t)),$.isFormData(t))return i?JSON.stringify(Up(t)):t;if($.isArrayBuffer(t)||$.isBuffer(t)||$.isStream(t)||$.isFile(t)||$.isBlob(t)||$.isReadableStream(t))return t;if($.isArrayBufferView(t))return t.buffer;if($.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return bb(t,this.formSerializer).toString();if((o=$.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return El(o?{"files[]":t}:t,c&&new c,this.formSerializer)}}return a||i?(r.setContentType("application/json",!1),Nb(t)):t}],transformResponse:[function(t){const r=this.transitional||Fi.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if($.isResponse(t)||$.isReadableStream(t))return t;if(t&&$.isString(t)&&(n&&!this.responseType||i)){const l=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(o){if(l)throw o.name==="SyntaxError"?fe.from(o,fe.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ct.classes.FormData,Blob:ct.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$.forEach(["delete","get","head","post","put","patch"],e=>{Fi.headers[e]={}});const Sb=$.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),kb=e=>{const t={};let r,n,i;return e&&e.split(`
`).forEach(function(l){i=l.indexOf(":"),r=l.substring(0,i).trim().toLowerCase(),n=l.substring(i+1).trim(),!(!r||t[r]&&Sb[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},cm=Symbol("internals");function Us(e){return e&&String(e).trim().toLowerCase()}function wa(e){return e===!1||e==null?e:$.isArray(e)?e.map(wa):String(e)}function _b(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const Eb=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function mo(e,t,r,n,i){if($.isFunction(n))return n.call(this,t,r);if(i&&(t=r),!!$.isString(t)){if($.isString(n))return t.indexOf(n)!==-1;if($.isRegExp(n))return n.test(t)}}function Cb(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function Pb(e,t){const r=$.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(i,a,l){return this[n].call(this,t,i,a,l)},configurable:!0})})}class Ct{constructor(t){t&&this.set(t)}set(t,r,n){const i=this;function a(o,c,u){const m=Us(c);if(!m)throw new Error("header name must be a non-empty string");const h=$.findKey(i,m);(!h||i[h]===void 0||u===!0||u===void 0&&i[h]!==!1)&&(i[h||c]=wa(o))}const l=(o,c)=>$.forEach(o,(u,m)=>a(u,m,c));if($.isPlainObject(t)||t instanceof this.constructor)l(t,r);else if($.isString(t)&&(t=t.trim())&&!Eb(t))l(kb(t),r);else if($.isObject(t)&&$.isIterable(t)){let o={},c,u;for(const m of t){if(!$.isArray(m))throw TypeError("Object iterator must return a key-value pair");o[u=m[0]]=(c=o[u])?$.isArray(c)?[...c,m[1]]:[c,m[1]]:m[1]}l(o,r)}else t!=null&&a(r,t,n);return this}get(t,r){if(t=Us(t),t){const n=$.findKey(this,t);if(n){const i=this[n];if(!r)return i;if(r===!0)return _b(i);if($.isFunction(r))return r.call(this,i,n);if($.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Us(t),t){const n=$.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||mo(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let i=!1;function a(l){if(l=Us(l),l){const o=$.findKey(n,l);o&&(!r||mo(n,n[o],o,r))&&(delete n[o],i=!0)}}return $.isArray(t)?t.forEach(a):a(t),i}clear(t){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const a=r[n];(!t||mo(this,this[a],a,t,!0))&&(delete this[a],i=!0)}return i}normalize(t){const r=this,n={};return $.forEach(this,(i,a)=>{const l=$.findKey(n,a);if(l){r[l]=wa(i),delete r[a];return}const o=t?Cb(a):String(a).trim();o!==a&&delete r[a],r[o]=wa(i),n[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return $.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=t&&$.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(i=>n.set(i)),n}static accessor(t){const n=(this[cm]=this[cm]={accessors:{}}).accessors,i=this.prototype;function a(l){const o=Us(l);n[o]||(Pb(i,l),n[o]=!0)}return $.isArray(t)?t.forEach(a):a(t),this}}Ct.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);$.reduceDescriptors(Ct.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});$.freezeMethods(Ct);function fo(e,t){const r=this||Fi,n=t||r,i=Ct.from(n.headers);let a=n.data;return $.forEach(e,function(o){a=o.call(r,a,i.normalize(),t?t.status:void 0)}),i.normalize(),a}function Bp(e){return!!(e&&e.__CANCEL__)}function Rs(e,t,r){fe.call(this,e??"canceled",fe.ERR_CANCELED,t,r),this.name="CanceledError"}$.inherits(Rs,fe,{__CANCEL__:!0});function Hp(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new fe("Request failed with status code "+r.status,[fe.ERR_BAD_REQUEST,fe.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Db(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Rb(e,t){e=e||10;const r=new Array(e),n=new Array(e);let i=0,a=0,l;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),m=n[a];l||(l=u),r[i]=c,n[i]=u;let h=a,f=0;for(;h!==i;)f+=r[h++],h=h%e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),u-l<t)return;const j=m&&u-m;return j?Math.round(f*1e3/j):void 0}}function Ab(e,t){let r=0,n=1e3/t,i,a;const l=(u,m=Date.now())=>{r=m,i=null,a&&(clearTimeout(a),a=null),e.apply(null,u)};return[(...u)=>{const m=Date.now(),h=m-r;h>=n?l(u,m):(i=u,a||(a=setTimeout(()=>{a=null,l(i)},n-h)))},()=>i&&l(i)]}const Ga=(e,t,r=3)=>{let n=0;const i=Rb(50,250);return Ab(a=>{const l=a.loaded,o=a.lengthComputable?a.total:void 0,c=l-n,u=i(c),m=l<=o;n=l;const h={loaded:l,total:o,progress:o?l/o:void 0,bytes:c,rate:u||void 0,estimated:u&&o&&m?(o-l)/u:void 0,event:a,lengthComputable:o!=null,[t?"download":"upload"]:!0};e(h)},r)},um=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},dm=e=>(...t)=>$.asap(()=>e(...t)),Tb=ct.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,ct.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(ct.origin),ct.navigator&&/(msie|trident)/i.test(ct.navigator.userAgent)):()=>!0,zb=ct.hasStandardBrowserEnv?{write(e,t,r,n,i,a){const l=[e+"="+encodeURIComponent(t)];$.isNumber(r)&&l.push("expires="+new Date(r).toGMTString()),$.isString(n)&&l.push("path="+n),$.isString(i)&&l.push("domain="+i),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Mb(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function $b(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Wp(e,t,r){let n=!Mb(t);return e&&(n||r==!1)?$b(e,t):t}const mm=e=>e instanceof Ct?{...e}:e;function Mn(e,t){t=t||{};const r={};function n(u,m,h,f){return $.isPlainObject(u)&&$.isPlainObject(m)?$.merge.call({caseless:f},u,m):$.isPlainObject(m)?$.merge({},m):$.isArray(m)?m.slice():m}function i(u,m,h,f){if($.isUndefined(m)){if(!$.isUndefined(u))return n(void 0,u,h,f)}else return n(u,m,h,f)}function a(u,m){if(!$.isUndefined(m))return n(void 0,m)}function l(u,m){if($.isUndefined(m)){if(!$.isUndefined(u))return n(void 0,u)}else return n(void 0,m)}function o(u,m,h){if(h in t)return n(u,m);if(h in e)return n(void 0,u)}const c={url:a,method:a,data:a,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:o,headers:(u,m,h)=>i(mm(u),mm(m),h,!0)};return $.forEach(Object.keys(Object.assign({},e,t)),function(m){const h=c[m]||i,f=h(e[m],t[m],m);$.isUndefined(f)&&h!==o||(r[m]=f)}),r}const qp=e=>{const t=Mn({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:a,headers:l,auth:o}=t;t.headers=l=Ct.from(l),t.url=Ip(Wp(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&l.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let c;if($.isFormData(r)){if(ct.hasStandardBrowserEnv||ct.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((c=l.getContentType())!==!1){const[u,...m]=c?c.split(";").map(h=>h.trim()).filter(Boolean):[];l.setContentType([u||"multipart/form-data",...m].join("; "))}}if(ct.hasStandardBrowserEnv&&(n&&$.isFunction(n)&&(n=n(t)),n||n!==!1&&Tb(t.url))){const u=i&&a&&zb.read(a);u&&l.set(i,u)}return t},Fb=typeof XMLHttpRequest<"u",Ob=Fb&&function(e){return new Promise(function(r,n){const i=qp(e);let a=i.data;const l=Ct.from(i.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:u}=i,m,h,f,j,y;function b(){j&&j(),y&&y(),i.cancelToken&&i.cancelToken.unsubscribe(m),i.signal&&i.signal.removeEventListener("abort",m)}let w=new XMLHttpRequest;w.open(i.method.toUpperCase(),i.url,!0),w.timeout=i.timeout;function x(){if(!w)return;const p=Ct.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),C={data:!o||o==="text"||o==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:p,config:e,request:w};Hp(function(E){r(E),b()},function(E){n(E),b()},C),w=null}"onloadend"in w?w.onloadend=x:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(x)},w.onabort=function(){w&&(n(new fe("Request aborted",fe.ECONNABORTED,e,w)),w=null)},w.onerror=function(){n(new fe("Network Error",fe.ERR_NETWORK,e,w)),w=null},w.ontimeout=function(){let N=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const C=i.transitional||Vp;i.timeoutErrorMessage&&(N=i.timeoutErrorMessage),n(new fe(N,C.clarifyTimeoutError?fe.ETIMEDOUT:fe.ECONNABORTED,e,w)),w=null},a===void 0&&l.setContentType(null),"setRequestHeader"in w&&$.forEach(l.toJSON(),function(N,C){w.setRequestHeader(C,N)}),$.isUndefined(i.withCredentials)||(w.withCredentials=!!i.withCredentials),o&&o!=="json"&&(w.responseType=i.responseType),u&&([f,y]=Ga(u,!0),w.addEventListener("progress",f)),c&&w.upload&&([h,j]=Ga(c),w.upload.addEventListener("progress",h),w.upload.addEventListener("loadend",j)),(i.cancelToken||i.signal)&&(m=p=>{w&&(n(!p||p.type?new Rs(null,e,w):p),w.abort(),w=null)},i.cancelToken&&i.cancelToken.subscribe(m),i.signal&&(i.signal.aborted?m():i.signal.addEventListener("abort",m)));const d=Db(i.url);if(d&&ct.protocols.indexOf(d)===-1){n(new fe("Unsupported protocol "+d+":",fe.ERR_BAD_REQUEST,e));return}w.send(a||null)})},Lb=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,i;const a=function(u){if(!i){i=!0,o();const m=u instanceof Error?u:this.reason;n.abort(m instanceof fe?m:new Rs(m instanceof Error?m.message:m))}};let l=t&&setTimeout(()=>{l=null,a(new fe(`timeout ${t} of ms exceeded`,fe.ETIMEDOUT))},t);const o=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(a):u.removeEventListener("abort",a)}),e=null)};e.forEach(u=>u.addEventListener("abort",a));const{signal:c}=n;return c.unsubscribe=()=>$.asap(o),c}},Ib=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,i;for(;n<r;)i=n+t,yield e.slice(n,i),n=i},Vb=async function*(e,t){for await(const r of Ub(e))yield*Ib(r,t)},Ub=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},fm=(e,t,r,n)=>{const i=Vb(e,t);let a=0,l,o=c=>{l||(l=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:u,value:m}=await i.next();if(u){o(),c.close();return}let h=m.byteLength;if(r){let f=a+=h;r(f)}c.enqueue(new Uint8Array(m))}catch(u){throw o(u),u}},cancel(c){return o(c),i.return()}},{highWaterMark:2})},Cl=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Yp=Cl&&typeof ReadableStream=="function",Bb=Cl&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Qp=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Hb=Yp&&Qp(()=>{let e=!1;const t=new Request(ct.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),hm=64*1024,gc=Yp&&Qp(()=>$.isReadableStream(new Response("").body)),Xa={stream:gc&&(e=>e.body)};Cl&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Xa[t]&&(Xa[t]=$.isFunction(e[t])?r=>r[t]():(r,n)=>{throw new fe(`Response type '${t}' is not supported`,fe.ERR_NOT_SUPPORT,n)})})})(new Response);const Wb=async e=>{if(e==null)return 0;if($.isBlob(e))return e.size;if($.isSpecCompliantForm(e))return(await new Request(ct.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if($.isArrayBufferView(e)||$.isArrayBuffer(e))return e.byteLength;if($.isURLSearchParams(e)&&(e=e+""),$.isString(e))return(await Bb(e)).byteLength},qb=async(e,t)=>{const r=$.toFiniteNumber(e.getContentLength());return r??Wb(t)},Yb=Cl&&(async e=>{let{url:t,method:r,data:n,signal:i,cancelToken:a,timeout:l,onDownloadProgress:o,onUploadProgress:c,responseType:u,headers:m,withCredentials:h="same-origin",fetchOptions:f}=qp(e);u=u?(u+"").toLowerCase():"text";let j=Lb([i,a&&a.toAbortSignal()],l),y;const b=j&&j.unsubscribe&&(()=>{j.unsubscribe()});let w;try{if(c&&Hb&&r!=="get"&&r!=="head"&&(w=await qb(m,n))!==0){let C=new Request(t,{method:"POST",body:n,duplex:"half"}),z;if($.isFormData(n)&&(z=C.headers.get("content-type"))&&m.setContentType(z),C.body){const[E,D]=um(w,Ga(dm(c)));n=fm(C.body,hm,E,D)}}$.isString(h)||(h=h?"include":"omit");const x="credentials"in Request.prototype;y=new Request(t,{...f,signal:j,method:r.toUpperCase(),headers:m.normalize().toJSON(),body:n,duplex:"half",credentials:x?h:void 0});let d=await fetch(y,f);const p=gc&&(u==="stream"||u==="response");if(gc&&(o||p&&b)){const C={};["status","statusText","headers"].forEach(P=>{C[P]=d[P]});const z=$.toFiniteNumber(d.headers.get("content-length")),[E,D]=o&&um(z,Ga(dm(o),!0))||[];d=new Response(fm(d.body,hm,E,()=>{D&&D(),b&&b()}),C)}u=u||"text";let N=await Xa[$.findKey(Xa,u)||"text"](d,e);return!p&&b&&b(),await new Promise((C,z)=>{Hp(C,z,{data:N,headers:Ct.from(d.headers),status:d.status,statusText:d.statusText,config:e,request:y})})}catch(x){throw b&&b(),x&&x.name==="TypeError"&&/Load failed|fetch/i.test(x.message)?Object.assign(new fe("Network Error",fe.ERR_NETWORK,e,y),{cause:x.cause||x}):fe.from(x,x&&x.code,e,y)}}),yc={http:ob,xhr:Ob,fetch:Yb};$.forEach(yc,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const pm=e=>`- ${e}`,Qb=e=>$.isFunction(e)||e===null||e===!1,Jp={getAdapter:e=>{e=$.isArray(e)?e:[e];const{length:t}=e;let r,n;const i={};for(let a=0;a<t;a++){r=e[a];let l;if(n=r,!Qb(r)&&(n=yc[(l=String(r)).toLowerCase()],n===void 0))throw new fe(`Unknown adapter '${l}'`);if(n)break;i[l||"#"+a]=n}if(!n){const a=Object.entries(i).map(([o,c])=>`adapter ${o} `+(c===!1?"is not supported by the environment":"is not available in the build"));let l=t?a.length>1?`since :
`+a.map(pm).join(`
`):" "+pm(a[0]):"as no adapter specified";throw new fe("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return n},adapters:yc};function ho(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Rs(null,e)}function xm(e){return ho(e),e.headers=Ct.from(e.headers),e.data=fo.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Jp.getAdapter(e.adapter||Fi.adapter)(e).then(function(n){return ho(e),n.data=fo.call(e,e.transformResponse,n),n.headers=Ct.from(n.headers),n},function(n){return Bp(n)||(ho(e),n&&n.response&&(n.response.data=fo.call(e,e.transformResponse,n.response),n.response.headers=Ct.from(n.response.headers))),Promise.reject(n)})}const Kp="1.10.0",Pl={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Pl[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const gm={};Pl.transitional=function(t,r,n){function i(a,l){return"[Axios v"+Kp+"] Transitional option '"+a+"'"+l+(n?". "+n:"")}return(a,l,o)=>{if(t===!1)throw new fe(i(l," has been removed"+(r?" in "+r:"")),fe.ERR_DEPRECATED);return r&&!gm[l]&&(gm[l]=!0,console.warn(i(l," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(a,l,o):!0}};Pl.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function Jb(e,t,r){if(typeof e!="object")throw new fe("options must be an object",fe.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const a=n[i],l=t[a];if(l){const o=e[a],c=o===void 0||l(o,a,e);if(c!==!0)throw new fe("option "+a+" must be "+c,fe.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new fe("Unknown option "+a,fe.ERR_BAD_OPTION)}}const ja={assertOptions:Jb,validators:Pl},dr=ja.validators;class Cn{constructor(t){this.defaults=t||{},this.interceptors={request:new om,response:new om}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?a&&!String(n.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+a):n.stack=a}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Mn(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:a}=r;n!==void 0&&ja.assertOptions(n,{silentJSONParsing:dr.transitional(dr.boolean),forcedJSONParsing:dr.transitional(dr.boolean),clarifyTimeoutError:dr.transitional(dr.boolean)},!1),i!=null&&($.isFunction(i)?r.paramsSerializer={serialize:i}:ja.assertOptions(i,{encode:dr.function,serialize:dr.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),ja.assertOptions(r,{baseUrl:dr.spelling("baseURL"),withXsrfToken:dr.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let l=a&&$.merge(a.common,a[r.method]);a&&$.forEach(["delete","get","head","post","put","patch","common"],y=>{delete a[y]}),r.headers=Ct.concat(l,a);const o=[];let c=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(r)===!1||(c=c&&b.synchronous,o.unshift(b.fulfilled,b.rejected))});const u=[];this.interceptors.response.forEach(function(b){u.push(b.fulfilled,b.rejected)});let m,h=0,f;if(!c){const y=[xm.bind(this),void 0];for(y.unshift.apply(y,o),y.push.apply(y,u),f=y.length,m=Promise.resolve(r);h<f;)m=m.then(y[h++],y[h++]);return m}f=o.length;let j=r;for(h=0;h<f;){const y=o[h++],b=o[h++];try{j=y(j)}catch(w){b.call(this,w);break}}try{m=xm.call(this,j)}catch(y){return Promise.reject(y)}for(h=0,f=u.length;h<f;)m=m.then(u[h++],u[h++]);return m}getUri(t){t=Mn(this.defaults,t);const r=Wp(t.baseURL,t.url,t.allowAbsoluteUrls);return Ip(r,t.params,t.paramsSerializer)}}$.forEach(["delete","get","head","options"],function(t){Cn.prototype[t]=function(r,n){return this.request(Mn(n||{},{method:t,url:r,data:(n||{}).data}))}});$.forEach(["post","put","patch"],function(t){function r(n){return function(a,l,o){return this.request(Mn(o||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:l}))}}Cn.prototype[t]=r(),Cn.prototype[t+"Form"]=r(!0)});class Du{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(a){r=a});const n=this;this.promise.then(i=>{if(!n._listeners)return;let a=n._listeners.length;for(;a-- >0;)n._listeners[a](i);n._listeners=null}),this.promise.then=i=>{let a;const l=new Promise(o=>{n.subscribe(o),a=o}).then(i);return l.cancel=function(){n.unsubscribe(a)},l},t(function(a,l,o){n.reason||(n.reason=new Rs(a,l,o),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new Du(function(i){t=i}),cancel:t}}}function Kb(e){return function(r){return e.apply(null,r)}}function Gb(e){return $.isObject(e)&&e.isAxiosError===!0}const vc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(vc).forEach(([e,t])=>{vc[t]=e});function Gp(e){const t=new Cn(e),r=Cp(Cn.prototype.request,t);return $.extend(r,Cn.prototype,t,{allOwnKeys:!0}),$.extend(r,t,null,{allOwnKeys:!0}),r.create=function(i){return Gp(Mn(e,i))},r}const Be=Gp(Fi);Be.Axios=Cn;Be.CanceledError=Rs;Be.CancelToken=Du;Be.isCancel=Bp;Be.VERSION=Kp;Be.toFormData=El;Be.AxiosError=fe;Be.Cancel=Be.CanceledError;Be.all=function(t){return Promise.all(t)};Be.spread=Kb;Be.isAxiosError=Gb;Be.mergeConfig=Mn;Be.AxiosHeaders=Ct;Be.formToJSON=e=>Up($.isHTMLForm(e)?new FormData(e):e);Be.getAdapter=Jp.getAdapter;Be.HttpStatusCode=vc;Be.default=Be;const Yn="http://192.168.1.114:8000",we=Be.create({baseURL:Yn,headers:{"Content-Type":"application/json"}});we.interceptors.request.use(e=>{const t=localStorage.getItem("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));we.interceptors.response.use(e=>e,e=>{var t;return((t=e.response)==null?void 0:t.status)===401&&(localStorage.removeItem("access_token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)});const na={login:async e=>(await we.post("/auth/login",{email:e.email,password:e.password})).data,getCurrentUser:async()=>{const e=localStorage.getItem("access_token");if(!e)throw new Error("Token manquant");return(await we.get("/users/me",{headers:{Authorization:`Bearer ${e}`}})).data},logout:()=>{localStorage.removeItem("access_token"),localStorage.removeItem("user")}},Ge={getAll:async(e=1,t=10)=>(await we.get(`/patients?page=${e}&size=${t}`)).data,getById:async e=>(await we.get(`/patients/id/${e}`)).data,getByCin:async e=>(await we.get(`/patients/cin/${e}`)).data,create:async e=>(await we.post("/patients",e)).data,update:async(e,t)=>(console.log("🔧 API update appelé avec ID:",e),(await we.put(`/patients/id/${e}`,t)).data),delete:async e=>{await we.delete(`/patients/id/${e}`)},search:async e=>(await we.get(`/patients/search?q=${encodeURIComponent(e)}`)).data,getPatientConsultations:async e=>(await we.get(`/patients/id/${e}/consultations`)).data,getPatientAppointments:async e=>(await we.get(`/patients/id/${e}/appointments`)).data,getByMedecin:async(e,t=1,r=50)=>{const n=await fetch(`${Yn}/patients/medecin/${e}?page=${t}&limit=${r}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(!n.ok){const i=await n.json().catch(()=>({}));throw new Error(i.detail||`Erreur ${n.status}`)}return n.json()},async uploadPhoto(e,t){const r=new FormData;r.append("photo",t);const n=await fetch(`${Yn}/patients/id/${e}/photo`,{method:"POST",headers:{Authorization:`Bearer ${po()}`},body:r});if(!n.ok){const i=await n.json().catch(()=>({}));throw new Error(i.detail||"Erreur lors de l'upload de la photo")}return n.json()},getPhotoUrl(e){return`${Yn}/patients/id/${e}/photo`},async deletePhoto(e){const t=await fetch(`${Yn}/patients/id/${e}/photo`,{method:"DELETE",headers:{Authorization:`Bearer ${po()}`,"Content-Type":"application/json"}});if(!t.ok){const r=await t.json().catch(()=>({}));throw new Error(r.detail||"Erreur lors de la suppression de la photo")}return t.json()},async hasPhoto(e){try{return(await fetch(`${Yn}/patients/id/${e}/photo`,{method:"HEAD",headers:{Authorization:`Bearer ${po()}`}})).ok}catch{return!1}}},js={getAll:async(e=1,t=10)=>(await we.get(`/consultations?page=${e}&size=${t}`)).data,getByPatient:async e=>(await we.get(`/consultations/patient/${e}`)).data,getById:async e=>(await we.get(`/consultations/${e}`)).data,create:async e=>(await we.post("/consultations",e)).data,update:async(e,t)=>(await we.put(`/consultations/${e}`,t)).data,delete:async e=>{await we.delete(`/consultations/${e}`)}},At={getAll:async(e=1,t=10)=>(await we.get(`/appointments?page=${e}&size=${t}`)).data,getByDate:async e=>(await we.get(`/appointments/date/${e}`)).data,getById:async e=>(await we.get(`/appointments/${e}`)).data,create:async e=>(await we.post("/appointments",e)).data,update:async(e,t)=>(await we.put(`/appointments/${e}`,t)).data,delete:async e=>{await we.delete(`/appointments/${e}`)}},vr={create:async e=>(await we.post("/users",e)).data,getAll:async()=>(console.log("🔑 Token dans localStorage:",localStorage.getItem("access_token")),(await we.get("/users/")).data),getById:async e=>(await we.get(`/users/${e}`)).data,update:async(e,t)=>(await we.put(`/users/${e}`,t)).data,delete:async e=>{await we.delete(`/users/${e}`)}};function po(){return localStorage.getItem("access_token")||""}const Xp=g.createContext(void 0),Xb=({children:e})=>{const[t,r]=g.useState(null),[n,i]=g.useState(null),[a,l]=g.useState(!0);g.useEffect(()=>{(async()=>{try{const h=localStorage.getItem("access_token");if(h){i(h);try{const f=await na.getCurrentUser();r(f),localStorage.setItem("user",JSON.stringify(f))}catch(f){console.error("Token invalide:",f),c()}}}catch(h){console.error("Erreur lors de l'initialisation:",h),c()}finally{l(!1)}})()},[]);const o=async m=>{try{l(!0);const h=await na.login(m);localStorage.setItem("access_token",h.access_token),i(h.access_token);const f=await na.getCurrentUser();localStorage.setItem("user",JSON.stringify(f)),r(f)}catch(h){throw localStorage.removeItem("access_token"),localStorage.removeItem("user"),console.error("Erreur de connexion:",h),h}finally{l(!1)}},c=()=>{na.logout(),localStorage.removeItem("access_token"),localStorage.removeItem("user"),i(null),r(null),window.location.href="/login"},u={user:t,token:n,loading:a,login:o,logout:c,isAuthenticated:!!t&&!!n,isMedecin:(t==null?void 0:t.role)==="medecin",isSecretaire:(t==null?void 0:t.role)==="secretaire",isAdmin:(t==null?void 0:t.role)==="admin"};return s.jsx(Xp.Provider,{value:u,children:e})},mt=()=>{const e=g.useContext(Xp);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Zb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),pe=(e,t)=>{const r=g.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:o="",children:c,...u},m)=>g.createElement("svg",{ref:m,...Zb,width:i,height:i,stroke:n,strokeWidth:l?Number(a)*24/Number(i):a,className:["lucide",`lucide-${ew(e)}`,o].join(" "),...u},[...t.map(([h,f])=>g.createElement(h,f)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=pe("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=pe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=pe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=pe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=pe("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=pe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=pe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=pe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=pe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=pe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=pe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=pe("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=pe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=pe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zp=pe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ym=pe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=pe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=pe("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=pe("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=pe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=pe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=pe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=pe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=pe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=pe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=pe("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=pe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=pe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=pe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=pe("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0=pe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vm=pe("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=pe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=pe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=pe("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=pe("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Ye=({children:e})=>{const{user:t,logout:r,isMedecin:n,isAdmin:i,isSecretaire:a}=mt(),l=it(),o=Ot(),[c,u]=g.useState(!1),m=()=>{r(),l("/login")},f=i?[{name:"Dashboard Admin",href:"/admin/dashboard",icon:vn},{name:"Gestion Utilisateurs",href:"/admin/users",icon:Vt}]:n?[{name:"Tableau de bord",href:"/dashboard",icon:vn},{name:"Patients",href:"/patients",icon:Vt},{name:"Consultations",href:"/consultations",icon:zt},{name:"Rendez-vous",href:"/rendez-vous",icon:Te},{name:"Calendrier",href:"/calendar",icon:Te},{name:"Ajouter Secrétaire",href:"/users/nouveau",icon:e0}]:a?[{name:"Tableau de bord",href:"/dashboard",icon:vn},{name:"Patients",href:"/patients",icon:Vt},{name:"Rendez-vous",href:"/rendez-vous",icon:Te},{name:"Calendrier",href:"/calendar",icon:Te}]:[],j=()=>i?"CHU Admin":n?`Dr. ${(t==null?void 0:t.nom)||"Médecin"}`:a?`Sc. ${t==null?void 0:t.nom}`:"CHU Connect",y=()=>i?"text-red-600":n?"text-blue-600":a?"text-green-600":"text-blue-600",b=()=>i?"bg-red-100 text-red-700":n?"bg-blue-100 text-blue-700":a?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700",x=i?Ks:qt;return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsxs("div",{className:"lg:hidden",children:[s.jsxs("div",{className:"flex items-center justify-between bg-white px-4 py-3 shadow-sm",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[i?s.jsx(Ks,{className:`h-6 w-6 ${y()}`}):s.jsx(vn,{className:`h-6 w-6 ${y()}`}),s.jsx("span",{className:"text-lg font-semibold text-gray-900",children:j()})]}),s.jsx("button",{onClick:()=>u(!c),className:"rounded-md p-2 text-gray-400 hover:bg-gray-100 hover:text-gray-500",children:c?s.jsx(Yt,{className:"h-6 w-6"}):s.jsx(nw,{className:"h-6 w-6"})})]}),c&&s.jsx("div",{className:"bg-white shadow-lg",children:s.jsxs("nav",{className:"px-4 py-2",children:[f.map(d=>{const p=d.icon,N=o.pathname===d.href;return s.jsxs(yr,{to:d.href,onClick:()=>u(!1),className:`flex items-center space-x-3 rounded-md px-3 py-2 text-sm font-medium transition-colors ${N?b():"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[s.jsx(p,{className:"h-5 w-5"}),s.jsx("span",{children:d.name})]},d.name)}),s.jsx("div",{className:"border-t border-gray-200 pt-2 mt-2",children:s.jsxs("button",{onClick:m,className:"flex w-full items-center space-x-3 rounded-md px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900",children:[s.jsx(ym,{className:"h-5 w-5"}),s.jsx("span",{children:"Déconnexion"})]})})]})})]}),s.jsxs("div",{className:"hidden lg:flex h-screen",children:[s.jsxs("div",{className:"flex flex-col w-64 bg-white shadow-lg",children:[s.jsxs("div",{className:"flex items-center px-6 py-4 border-b border-gray-200",children:[i?s.jsx(Ks,{className:`h-8 w-8 ${y()}`}):s.jsx(vn,{className:`h-8 w-8 ${y()}`}),s.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900",children:j()})]}),s.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2",children:f.map(d=>{const p=d.icon,N=o.pathname===d.href;return s.jsxs(yr,{to:d.href,className:`flex items-center space-x-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors ${N?b():"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[s.jsx(p,{className:"h-5 w-5"}),s.jsx("span",{children:d.name})]},d.name)})}),s.jsxs("div",{className:"border-t border-gray-200 p-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full ${i?"bg-red-100":n?"bg-blue-100":"bg-green-100"}`,children:s.jsx(x,{className:`h-4 w-4 ${y()}`})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t==null?void 0:t.nom}),s.jsxs("p",{className:"text-xs text-gray-500 capitalize flex items-center",children:[i&&s.jsx(Ks,{className:"h-3 w-3 mr-1"}),(t==null?void 0:t.role)==="admin"?"Administrateur":(t==null?void 0:t.role)==="medecin"?"Médecin":"Secrétaire"]})]})]}),s.jsxs("button",{onClick:m,className:"flex w-full items-center space-x-2 rounded-md px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors",children:[s.jsx(ym,{className:"h-4 w-4"}),s.jsx("span",{children:"Déconnexion"})]})]})]}),s.jsx("div",{className:"flex-1 overflow-auto",children:s.jsx("main",{className:"p-6",children:e})})]}),s.jsx("div",{className:"lg:hidden",children:s.jsx("main",{className:"p-4",children:e})})]})},Qe=({children:e,allowedRoles:t})=>{const{isAuthenticated:r,user:n,loading:i}=mt(),a=Ot();if(i)return s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!r)return s.jsx(mc,{to:"/login",state:{from:a},replace:!0});if(t&&n&&!t.includes(n.role)){let l="/dashboard";switch(n.role){case"admin":l="/admin/users";break;case"medecin":l="/dashboard";break;case"secretaire":l="/dashboard";break;default:l="/dashboard"}return console.log(`Accès refusé à ${a.pathname} pour ${n.role}, redirection vers ${l}`),s.jsx(mc,{to:l,replace:!0})}return s.jsx(s.Fragment,{children:e})};var Oi=e=>e.type==="checkbox",Sn=e=>e instanceof Date,ht=e=>e==null;const t0=e=>typeof e=="object";var Le=e=>!ht(e)&&!Array.isArray(e)&&t0(e)&&!Sn(e),uw=e=>Le(e)&&e.target?Oi(e.target)?e.target.checked:e.target.value:e,dw=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,mw=(e,t)=>e.has(dw(t)),fw=e=>{const t=e.constructor&&e.constructor.prototype;return Le(t)&&t.hasOwnProperty("isPrototypeOf")},Au=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Je(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(Au&&(e instanceof Blob||n))&&(r||Le(e)))if(t=r?[]:{},!r&&!fw(e))t=e;else for(const i in e)e.hasOwnProperty(i)&&(t[i]=Je(e[i]));else return e;return t}var Dl=e=>/^\w*$/.test(e),Ve=e=>e===void 0,Tu=e=>Array.isArray(e)?e.filter(Boolean):[],zu=e=>Tu(e.replace(/["|']|\]/g,"").split(/\.|\[/)),oe=(e,t,r)=>{if(!t||!Le(e))return r;const n=(Dl(t)?[t]:zu(t)).reduce((i,a)=>ht(i)?i:i[a],e);return Ve(n)||n===e?Ve(e[t])?r:e[t]:n},fr=e=>typeof e=="boolean",ke=(e,t,r)=>{let n=-1;const i=Dl(t)?[t]:zu(t),a=i.length,l=a-1;for(;++n<a;){const o=i[n];let c=r;if(n!==l){const u=e[o];c=Le(u)||Array.isArray(u)?u:isNaN(+i[n+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;e[o]=c,e=e[o]}};const bm={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},er={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Er={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},hw=Jt.createContext(null);hw.displayName="HookFormContext";var pw=(e,t,r,n=!0)=>{const i={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(i,a,{get:()=>{const l=a;return t._proxyFormState[l]!==er.all&&(t._proxyFormState[l]=!n||er.all),e[l]}});return i};const xw=typeof window<"u"?g.useLayoutEffect:g.useEffect;var jr=e=>typeof e=="string",gw=(e,t,r,n,i)=>jr(e)?(n&&t.watch.add(e),oe(r,e,i)):Array.isArray(e)?e.map(a=>(n&&t.watch.add(a),oe(r,a))):(n&&(t.watchAll=!0),r),r0=(e,t,r,n,i)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:i||!0}}:{},ai=e=>Array.isArray(e)?e:[e],wm=()=>{let e=[];return{get observers(){return e},next:i=>{for(const a of e)a.next&&a.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(a=>a!==i)}}),unsubscribe:()=>{e=[]}}},jc=e=>ht(e)||!t0(e);function Jr(e,t,r=new WeakSet){if(jc(e)||jc(t))return e===t;if(Sn(e)&&Sn(t))return e.getTime()===t.getTime();const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const a of n){const l=e[a];if(!i.includes(a))return!1;if(a!=="ref"){const o=t[a];if(Sn(l)&&Sn(o)||Le(l)&&Le(o)||Array.isArray(l)&&Array.isArray(o)?!Jr(l,o,r):l!==o)return!1}}return!0}var bt=e=>Le(e)&&!Object.keys(e).length,Mu=e=>e.type==="file",tr=e=>typeof e=="function",Za=e=>{if(!Au)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},n0=e=>e.type==="select-multiple",$u=e=>e.type==="radio",yw=e=>$u(e)||Oi(e),xo=e=>Za(e)&&e.isConnected;function vw(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Ve(e)?n++:e[t[n++]];return e}function bw(e){for(const t in e)if(e.hasOwnProperty(t)&&!Ve(e[t]))return!1;return!0}function Ie(e,t){const r=Array.isArray(t)?t:Dl(t)?[t]:zu(t),n=r.length===1?e:vw(e,r),i=r.length-1,a=r[i];return n&&delete n[a],i!==0&&(Le(n)&&bt(n)||Array.isArray(n)&&bw(n))&&Ie(e,r.slice(0,-1)),e}var s0=e=>{for(const t in e)if(tr(e[t]))return!0;return!1};function el(e,t={}){const r=Array.isArray(e);if(Le(e)||r)for(const n in e)Array.isArray(e[n])||Le(e[n])&&!s0(e[n])?(t[n]=Array.isArray(e[n])?[]:{},el(e[n],t[n])):ht(e[n])||(t[n]=!0);return t}function i0(e,t,r){const n=Array.isArray(e);if(Le(e)||n)for(const i in e)Array.isArray(e[i])||Le(e[i])&&!s0(e[i])?Ve(t)||jc(r[i])?r[i]=Array.isArray(e[i])?el(e[i],[]):{...el(e[i])}:i0(e[i],ht(t)?{}:t[i],r[i]):r[i]=!Jr(e[i],t[i]);return r}var Hs=(e,t)=>i0(e,t,el(t));const jm={value:!1,isValid:!1},Nm={value:!0,isValid:!0};var a0=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Ve(e[0].attributes.value)?Ve(e[0].value)||e[0].value===""?Nm:{value:e[0].value,isValid:!0}:Nm:jm}return jm},l0=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Ve(e)?e:t?e===""?NaN:e&&+e:r&&jr(e)?new Date(e):n?n(e):e;const Sm={isValid:!1,value:null};var o0=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,Sm):Sm;function km(e){const t=e.ref;return Mu(t)?t.files:$u(t)?o0(e.refs).value:n0(t)?[...t.selectedOptions].map(({value:r})=>r):Oi(t)?a0(e.refs).value:l0(Ve(t.value)?e.ref.value:t.value,e)}var ww=(e,t,r,n)=>{const i={};for(const a of e){const l=oe(t,a);l&&ke(i,a,l._f)}return{criteriaMode:r,names:[...e],fields:i,shouldUseNativeValidation:n}},tl=e=>e instanceof RegExp,Ws=e=>Ve(e)?e:tl(e)?e.source:Le(e)?tl(e.value)?e.value.source:e.value:e,_m=e=>({isOnSubmit:!e||e===er.onSubmit,isOnBlur:e===er.onBlur,isOnChange:e===er.onChange,isOnAll:e===er.all,isOnTouch:e===er.onTouched});const Em="AsyncFunction";var jw=e=>!!e&&!!e.validate&&!!(tr(e.validate)&&e.validate.constructor.name===Em||Le(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Em)),Nw=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Cm=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const li=(e,t,r,n)=>{for(const i of r||Object.keys(e)){const a=oe(e,i);if(a){const{_f:l,...o}=a;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],i)&&!n)return!0;if(l.ref&&t(l.ref,l.name)&&!n)return!0;if(li(o,t))break}else if(Le(o)&&li(o,t))break}}};function Pm(e,t,r){const n=oe(e,r);if(n||Dl(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const a=i.join("."),l=oe(t,a),o=oe(e,a);if(l&&!Array.isArray(l)&&r!==a)return{name:r};if(o&&o.type)return{name:a,error:o};if(o&&o.root&&o.root.type)return{name:`${a}.root`,error:o.root};i.pop()}return{name:r}}var Sw=(e,t,r,n)=>{r(e);const{name:i,...a}=e;return bt(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(l=>t[l]===(!n||er.all))},kw=(e,t,r)=>!e||!t||e===t||ai(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),_w=(e,t,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(t||e):(r?n.isOnBlur:i.isOnBlur)?!e:(r?n.isOnChange:i.isOnChange)?e:!0,Ew=(e,t)=>!Tu(oe(e,t)).length&&Ie(e,t),Cw=(e,t,r)=>{const n=ai(oe(e,r));return ke(n,"root",t[r]),ke(e,r,n),e},Na=e=>jr(e);function Dm(e,t,r="validate"){if(Na(e)||Array.isArray(e)&&e.every(Na)||fr(e)&&!e)return{type:r,message:Na(e)?e:"",ref:t}}var Hn=e=>Le(e)&&!tl(e)?e:{value:e,message:""},Rm=async(e,t,r,n,i,a)=>{const{ref:l,refs:o,required:c,maxLength:u,minLength:m,min:h,max:f,pattern:j,validate:y,name:b,valueAsNumber:w,mount:x}=e._f,d=oe(r,b);if(!x||t.has(b))return{};const p=o?o[0]:l,N=R=>{i&&p.reportValidity&&(p.setCustomValidity(fr(R)?"":R||""),p.reportValidity())},C={},z=$u(l),E=Oi(l),D=z||E,P=(w||Mu(l))&&Ve(l.value)&&Ve(d)||Za(l)&&l.value===""||d===""||Array.isArray(d)&&!d.length,S=r0.bind(null,b,n,C),M=(R,B,te,U=Er.maxLength,W=Er.minLength)=>{const O=R?B:te;C[b]={type:R?U:W,message:O,ref:l,...S(R?U:W,O)}};if(a?!Array.isArray(d)||!d.length:c&&(!D&&(P||ht(d))||fr(d)&&!d||E&&!a0(o).isValid||z&&!o0(o).isValid)){const{value:R,message:B}=Na(c)?{value:!!c,message:c}:Hn(c);if(R&&(C[b]={type:Er.required,message:B,ref:p,...S(Er.required,B)},!n))return N(B),C}if(!P&&(!ht(h)||!ht(f))){let R,B;const te=Hn(f),U=Hn(h);if(!ht(d)&&!isNaN(d)){const W=l.valueAsNumber||d&&+d;ht(te.value)||(R=W>te.value),ht(U.value)||(B=W<U.value)}else{const W=l.valueAsDate||new Date(d),O=X=>new Date(new Date().toDateString()+" "+X),H=l.type=="time",J=l.type=="week";jr(te.value)&&d&&(R=H?O(d)>O(te.value):J?d>te.value:W>new Date(te.value)),jr(U.value)&&d&&(B=H?O(d)<O(U.value):J?d<U.value:W<new Date(U.value))}if((R||B)&&(M(!!R,te.message,U.message,Er.max,Er.min),!n))return N(C[b].message),C}if((u||m)&&!P&&(jr(d)||a&&Array.isArray(d))){const R=Hn(u),B=Hn(m),te=!ht(R.value)&&d.length>+R.value,U=!ht(B.value)&&d.length<+B.value;if((te||U)&&(M(te,R.message,B.message),!n))return N(C[b].message),C}if(j&&!P&&jr(d)){const{value:R,message:B}=Hn(j);if(tl(R)&&!d.match(R)&&(C[b]={type:Er.pattern,message:B,ref:l,...S(Er.pattern,B)},!n))return N(B),C}if(y){if(tr(y)){const R=await y(d,r),B=Dm(R,p);if(B&&(C[b]={...B,...S(Er.validate,B.message)},!n))return N(B.message),C}else if(Le(y)){let R={};for(const B in y){if(!bt(R)&&!n)break;const te=Dm(await y[B](d,r),p,B);te&&(R={...te,...S(B,te.message)},N(te.message),n&&(C[b]=R))}if(!bt(R)&&(C[b]={ref:p,...R},!n))return C}}return N(!0),C};const Pw={mode:er.onSubmit,reValidateMode:er.onChange,shouldFocusError:!0};function Dw(e={}){let t={...Pw,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:tr(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},i=Le(t.defaultValues)||Le(t.values)?Je(t.defaultValues||t.values)||{}:{},a=t.shouldUnregister?{}:Je(i),l={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const m={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...m};const f={array:wm(),state:wm()},j=t.criteriaMode===er.all,y=v=>_=>{clearTimeout(u),u=setTimeout(v,_)},b=async v=>{if(!t.disabled&&(m.isValid||h.isValid||v)){const _=t.resolver?bt((await E()).errors):await P(n,!0);_!==r.isValid&&f.state.next({isValid:_})}},w=(v,_)=>{!t.disabled&&(m.isValidating||m.validatingFields||h.isValidating||h.validatingFields)&&((v||Array.from(o.mount)).forEach(T=>{T&&(_?ke(r.validatingFields,T,_):Ie(r.validatingFields,T))}),f.state.next({validatingFields:r.validatingFields,isValidating:!bt(r.validatingFields)}))},x=(v,_=[],T,q,Q=!0,k=!0)=>{if(q&&T&&!t.disabled){if(l.action=!0,k&&Array.isArray(oe(n,v))){const I=T(oe(n,v),q.argA,q.argB);Q&&ke(n,v,I)}if(k&&Array.isArray(oe(r.errors,v))){const I=T(oe(r.errors,v),q.argA,q.argB);Q&&ke(r.errors,v,I),Ew(r.errors,v)}if((m.touchedFields||h.touchedFields)&&k&&Array.isArray(oe(r.touchedFields,v))){const I=T(oe(r.touchedFields,v),q.argA,q.argB);Q&&ke(r.touchedFields,v,I)}(m.dirtyFields||h.dirtyFields)&&(r.dirtyFields=Hs(i,a)),f.state.next({name:v,isDirty:M(v,_),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else ke(a,v,_)},d=(v,_)=>{ke(r.errors,v,_),f.state.next({errors:r.errors})},p=v=>{r.errors=v,f.state.next({errors:r.errors,isValid:!1})},N=(v,_,T,q)=>{const Q=oe(n,v);if(Q){const k=oe(a,v,Ve(T)?oe(i,v):T);Ve(k)||q&&q.defaultChecked||_?ke(a,v,_?k:km(Q._f)):te(v,k),l.mount&&b()}},C=(v,_,T,q,Q)=>{let k=!1,I=!1;const ae={name:v};if(!t.disabled){if(!T||q){(m.isDirty||h.isDirty)&&(I=r.isDirty,r.isDirty=ae.isDirty=M(),k=I!==ae.isDirty);const ue=Jr(oe(i,v),_);I=!!oe(r.dirtyFields,v),ue?Ie(r.dirtyFields,v):ke(r.dirtyFields,v,!0),ae.dirtyFields=r.dirtyFields,k=k||(m.dirtyFields||h.dirtyFields)&&I!==!ue}if(T){const ue=oe(r.touchedFields,v);ue||(ke(r.touchedFields,v,T),ae.touchedFields=r.touchedFields,k=k||(m.touchedFields||h.touchedFields)&&ue!==T)}k&&Q&&f.state.next(ae)}return k?ae:{}},z=(v,_,T,q)=>{const Q=oe(r.errors,v),k=(m.isValid||h.isValid)&&fr(_)&&r.isValid!==_;if(t.delayError&&T?(c=y(()=>d(v,T)),c(t.delayError)):(clearTimeout(u),c=null,T?ke(r.errors,v,T):Ie(r.errors,v)),(T?!Jr(Q,T):Q)||!bt(q)||k){const I={...q,...k&&fr(_)?{isValid:_}:{},errors:r.errors,name:v};r={...r,...I},f.state.next(I)}},E=async v=>{w(v,!0);const _=await t.resolver(a,t.context,ww(v||o.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return w(v),_},D=async v=>{const{errors:_}=await E(v);if(v)for(const T of v){const q=oe(_,T);q?ke(r.errors,T,q):Ie(r.errors,T)}else r.errors=_;return _},P=async(v,_,T={valid:!0})=>{for(const q in v){const Q=v[q];if(Q){const{_f:k,...I}=Q;if(k){const ae=o.array.has(k.name),ue=Q._f&&jw(Q._f);ue&&m.validatingFields&&w([q],!0);const be=await Rm(Q,o.disabled,a,j,t.shouldUseNativeValidation&&!_,ae);if(ue&&m.validatingFields&&w([q]),be[k.name]&&(T.valid=!1,_))break;!_&&(oe(be,k.name)?ae?Cw(r.errors,be,k.name):ke(r.errors,k.name,be[k.name]):Ie(r.errors,k.name))}!bt(I)&&await P(I,_,T)}}return T.valid},S=()=>{for(const v of o.unMount){const _=oe(n,v);_&&(_._f.refs?_._f.refs.every(T=>!xo(T)):!xo(_._f.ref))&&ie(v)}o.unMount=new Set},M=(v,_)=>!t.disabled&&(v&&_&&ke(a,v,_),!Jr(X(),i)),R=(v,_,T)=>gw(v,o,{...l.mount?a:Ve(_)?i:jr(v)?{[v]:_}:_},T,_),B=v=>Tu(oe(l.mount?a:i,v,t.shouldUnregister?oe(i,v,[]):[])),te=(v,_,T={})=>{const q=oe(n,v);let Q=_;if(q){const k=q._f;k&&(!k.disabled&&ke(a,v,l0(_,k)),Q=Za(k.ref)&&ht(_)?"":_,n0(k.ref)?[...k.ref.options].forEach(I=>I.selected=Q.includes(I.value)):k.refs?Oi(k.ref)?k.refs.forEach(I=>{(!I.defaultChecked||!I.disabled)&&(Array.isArray(Q)?I.checked=!!Q.find(ae=>ae===I.value):I.checked=Q===I.value||!!Q)}):k.refs.forEach(I=>I.checked=I.value===Q):Mu(k.ref)?k.ref.value="":(k.ref.value=Q,k.ref.type||f.state.next({name:v,values:Je(a)})))}(T.shouldDirty||T.shouldTouch)&&C(v,Q,T.shouldTouch,T.shouldDirty,!0),T.shouldValidate&&J(v)},U=(v,_,T)=>{for(const q in _){if(!_.hasOwnProperty(q))return;const Q=_[q],k=v+"."+q,I=oe(n,k);(o.array.has(v)||Le(Q)||I&&!I._f)&&!Sn(Q)?U(k,Q,T):te(k,Q,T)}},W=(v,_,T={})=>{const q=oe(n,v),Q=o.array.has(v),k=Je(_);ke(a,v,k),Q?(f.array.next({name:v,values:Je(a)}),(m.isDirty||m.dirtyFields||h.isDirty||h.dirtyFields)&&T.shouldDirty&&f.state.next({name:v,dirtyFields:Hs(i,a),isDirty:M(v,k)})):q&&!q._f&&!ht(k)?U(v,k,T):te(v,k,T),Cm(v,o)&&f.state.next({...r}),f.state.next({name:l.mount?v:void 0,values:Je(a)})},O=async v=>{l.mount=!0;const _=v.target;let T=_.name,q=!0;const Q=oe(n,T),k=ue=>{q=Number.isNaN(ue)||Sn(ue)&&isNaN(ue.getTime())||Jr(ue,oe(a,T,ue))},I=_m(t.mode),ae=_m(t.reValidateMode);if(Q){let ue,be;const je=_.type?km(Q._f):uw(v),Ze=v.type===bm.BLUR||v.type===bm.FOCUS_OUT,As=!Nw(Q._f)&&!t.resolver&&!oe(r.errors,T)&&!Q._f.deps||_w(Ze,oe(r.touchedFields,T),r.isSubmitted,ae,I),Ml=Cm(T,o,Ze);ke(a,T,je),Ze?(Q._f.onBlur&&Q._f.onBlur(v),c&&c(0)):Q._f.onChange&&Q._f.onChange(v);const $l=C(T,je,Ze),E0=!bt($l)||Ml;if(!Ze&&f.state.next({name:T,type:v.type,values:Je(a)}),As)return(m.isValid||h.isValid)&&(t.mode==="onBlur"?Ze&&b():Ze||b()),E0&&f.state.next({name:T,...Ml?{}:$l});if(!Ze&&Ml&&f.state.next({...r}),t.resolver){const{errors:Bu}=await E([T]);if(k(je),q){const C0=Pm(r.errors,n,T),Hu=Pm(Bu,n,C0.name||T);ue=Hu.error,T=Hu.name,be=bt(Bu)}}else w([T],!0),ue=(await Rm(Q,o.disabled,a,j,t.shouldUseNativeValidation))[T],w([T]),k(je),q&&(ue?be=!1:(m.isValid||h.isValid)&&(be=await P(n,!0)));q&&(Q._f.deps&&J(Q._f.deps),z(T,be,ue,$l))}},H=(v,_)=>{if(oe(r.errors,_)&&v.focus)return v.focus(),1},J=async(v,_={})=>{let T,q;const Q=ai(v);if(t.resolver){const k=await D(Ve(v)?v:Q);T=bt(k),q=v?!Q.some(I=>oe(k,I)):T}else v?(q=(await Promise.all(Q.map(async k=>{const I=oe(n,k);return await P(I&&I._f?{[k]:I}:I)}))).every(Boolean),!(!q&&!r.isValid)&&b()):q=T=await P(n);return f.state.next({...!jr(v)||(m.isValid||h.isValid)&&T!==r.isValid?{}:{name:v},...t.resolver||!v?{isValid:T}:{},errors:r.errors}),_.shouldFocus&&!q&&li(n,H,v?Q:o.mount),q},X=v=>{const _={...l.mount?a:i};return Ve(v)?_:jr(v)?oe(_,v):v.map(T=>oe(_,T))},ne=(v,_)=>({invalid:!!oe((_||r).errors,v),isDirty:!!oe((_||r).dirtyFields,v),error:oe((_||r).errors,v),isValidating:!!oe(r.validatingFields,v),isTouched:!!oe((_||r).touchedFields,v)}),re=v=>{v&&ai(v).forEach(_=>Ie(r.errors,_)),f.state.next({errors:v?r.errors:{}})},me=(v,_,T)=>{const q=(oe(n,v,{_f:{}})._f||{}).ref,Q=oe(r.errors,v)||{},{ref:k,message:I,type:ae,...ue}=Q;ke(r.errors,v,{...ue,..._,ref:q}),f.state.next({name:v,errors:r.errors,isValid:!1}),T&&T.shouldFocus&&q&&q.focus&&q.focus()},se=(v,_)=>tr(v)?f.state.subscribe({next:T=>v(R(void 0,_),T)}):R(v,_,!0),F=v=>f.state.subscribe({next:_=>{kw(v.name,_.name,v.exact)&&Sw(_,v.formState||m,Pe,v.reRenderRoot)&&v.callback({values:{...a},...r,..._})}}).unsubscribe,ee=v=>(l.mount=!0,h={...h,...v.formState},F({...v,formState:h})),ie=(v,_={})=>{for(const T of v?ai(v):o.mount)o.mount.delete(T),o.array.delete(T),_.keepValue||(Ie(n,T),Ie(a,T)),!_.keepError&&Ie(r.errors,T),!_.keepDirty&&Ie(r.dirtyFields,T),!_.keepTouched&&Ie(r.touchedFields,T),!_.keepIsValidating&&Ie(r.validatingFields,T),!t.shouldUnregister&&!_.keepDefaultValue&&Ie(i,T);f.state.next({values:Je(a)}),f.state.next({...r,..._.keepDirty?{isDirty:M()}:{}}),!_.keepIsValid&&b()},A=({disabled:v,name:_})=>{(fr(v)&&l.mount||v||o.disabled.has(_))&&(v?o.disabled.add(_):o.disabled.delete(_))},Y=(v,_={})=>{let T=oe(n,v);const q=fr(_.disabled)||fr(t.disabled);return ke(n,v,{...T||{},_f:{...T&&T._f?T._f:{ref:{name:v}},name:v,mount:!0,..._}}),o.mount.add(v),T?A({disabled:fr(_.disabled)?_.disabled:t.disabled,name:v}):N(v,!0,_.value),{...q?{disabled:_.disabled||t.disabled}:{},...t.progressive?{required:!!_.required,min:Ws(_.min),max:Ws(_.max),minLength:Ws(_.minLength),maxLength:Ws(_.maxLength),pattern:Ws(_.pattern)}:{},name:v,onChange:O,onBlur:O,ref:Q=>{if(Q){Y(v,_),T=oe(n,v);const k=Ve(Q.value)&&Q.querySelectorAll&&Q.querySelectorAll("input,select,textarea")[0]||Q,I=yw(k),ae=T._f.refs||[];if(I?ae.find(ue=>ue===k):k===T._f.ref)return;ke(n,v,{_f:{...T._f,...I?{refs:[...ae.filter(xo),k,...Array.isArray(oe(i,v))?[{}]:[]],ref:{type:k.type,name:v}}:{ref:k}}}),N(v,!1,void 0,k)}else T=oe(n,v,{}),T._f&&(T._f.mount=!1),(t.shouldUnregister||_.shouldUnregister)&&!(mw(o.array,v)&&l.action)&&o.unMount.add(v)}}},Z=()=>t.shouldFocusError&&li(n,H,o.mount),L=v=>{fr(v)&&(f.state.next({disabled:v}),li(n,(_,T)=>{const q=oe(n,T);q&&(_.disabled=q._f.disabled||v,Array.isArray(q._f.refs)&&q._f.refs.forEach(Q=>{Q.disabled=q._f.disabled||v}))},0,!1))},G=(v,_)=>async T=>{let q;T&&(T.preventDefault&&T.preventDefault(),T.persist&&T.persist());let Q=Je(a);if(f.state.next({isSubmitting:!0}),t.resolver){const{errors:k,values:I}=await E();r.errors=k,Q=Je(I)}else await P(n);if(o.disabled.size)for(const k of o.disabled)Ie(Q,k);if(Ie(r.errors,"root"),bt(r.errors)){f.state.next({errors:{}});try{await v(Q,T)}catch(k){q=k}}else _&&await _({...r.errors},T),Z(),setTimeout(Z);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:bt(r.errors)&&!q,submitCount:r.submitCount+1,errors:r.errors}),q)throw q},ce=(v,_={})=>{oe(n,v)&&(Ve(_.defaultValue)?W(v,Je(oe(i,v))):(W(v,_.defaultValue),ke(i,v,Je(_.defaultValue))),_.keepTouched||Ie(r.touchedFields,v),_.keepDirty||(Ie(r.dirtyFields,v),r.isDirty=_.defaultValue?M(v,Je(oe(i,v))):M()),_.keepError||(Ie(r.errors,v),m.isValid&&b()),f.state.next({...r}))},he=(v,_={})=>{const T=v?Je(v):i,q=Je(T),Q=bt(v),k=Q?i:q;if(_.keepDefaultValues||(i=T),!_.keepValues){if(_.keepDirtyValues){const I=new Set([...o.mount,...Object.keys(Hs(i,a))]);for(const ae of Array.from(I))oe(r.dirtyFields,ae)?ke(k,ae,oe(a,ae)):W(ae,oe(k,ae))}else{if(Au&&Ve(v))for(const I of o.mount){const ae=oe(n,I);if(ae&&ae._f){const ue=Array.isArray(ae._f.refs)?ae._f.refs[0]:ae._f.ref;if(Za(ue)){const be=ue.closest("form");if(be){be.reset();break}}}}if(_.keepFieldsRef)for(const I of o.mount)W(I,oe(k,I));else n={}}a=t.shouldUnregister?_.keepDefaultValues?Je(i):{}:Je(k),f.array.next({values:{...k}}),f.state.next({values:{...k}})}o={mount:_.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!m.isValid||!!_.keepIsValid||!!_.keepDirtyValues,l.watch=!!t.shouldUnregister,f.state.next({submitCount:_.keepSubmitCount?r.submitCount:0,isDirty:Q?!1:_.keepDirty?r.isDirty:!!(_.keepDefaultValues&&!Jr(v,i)),isSubmitted:_.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Q?{}:_.keepDirtyValues?_.keepDefaultValues&&a?Hs(i,a):r.dirtyFields:_.keepDefaultValues&&v?Hs(i,v):_.keepDirty?r.dirtyFields:{},touchedFields:_.keepTouched?r.touchedFields:{},errors:_.keepErrors?r.errors:{},isSubmitSuccessful:_.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},xe=(v,_)=>he(tr(v)?v(a):v,_),ve=(v,_={})=>{const T=oe(n,v),q=T&&T._f;if(q){const Q=q.refs?q.refs[0]:q.ref;Q.focus&&(Q.focus(),_.shouldSelect&&tr(Q.select)&&Q.select())}},Pe=v=>{r={...r,...v}},V={control:{register:Y,unregister:ie,getFieldState:ne,handleSubmit:G,setError:me,_subscribe:F,_runSchema:E,_focusError:Z,_getWatch:R,_getDirty:M,_setValid:b,_setFieldArray:x,_setDisabledField:A,_setErrors:p,_getFieldArray:B,_reset:he,_resetDefaultValues:()=>tr(t.defaultValues)&&t.defaultValues().then(v=>{xe(v,t.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:S,_disableForm:L,_subjects:f,_proxyFormState:m,get _fields(){return n},get _formValues(){return a},get _state(){return l},set _state(v){l=v},get _defaultValues(){return i},get _names(){return o},set _names(v){o=v},get _formState(){return r},get _options(){return t},set _options(v){t={...t,...v}}},subscribe:ee,trigger:J,register:Y,handleSubmit:G,watch:se,setValue:W,getValues:X,reset:xe,resetField:ce,clearErrors:re,unregister:ie,setError:me,setFocus:ve,getFieldState:ne};return{...V,formControl:V}}function c0(e={}){const t=Jt.useRef(void 0),r=Jt.useRef(void 0),[n,i]=Jt.useState({isDirty:!1,isValidating:!1,isLoading:tr(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:tr(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!tr(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...o}=Dw(e);t.current={...o,formState:n}}const a=t.current.control;return a._options=e,xw(()=>{const l=a._subscribe({formState:a._proxyFormState,callback:()=>i({...a._formState}),reRenderRoot:!0});return i(o=>({...o,isReady:!0})),a._formState.isReady=!0,l},[a]),Jt.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),Jt.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode)},[a,e.mode,e.reValidateMode]),Jt.useEffect(()=>{e.errors&&(a._setErrors(e.errors),a._focusError())},[a,e.errors]),Jt.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),Jt.useEffect(()=>{if(a._proxyFormState.isDirty){const l=a._getDirty();l!==n.isDirty&&a._subjects.state.next({isDirty:l})}},[a,n.isDirty]),Jt.useEffect(()=>{e.values&&!Jr(e.values,r.current)?(a._reset(e.values,{keepFieldsRef:!0,...a._options.resetOptions}),r.current=e.values,i(l=>({...l}))):a._resetDefaultValues()},[a,e.values]),Jt.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),t.current.formState=pw(n,a),t.current}const Am=(e,t,r)=>{if(e&&"reportValidity"in e){const n=oe(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},u0=(e,t)=>{for(const r in t.fields){const n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?Am(n.ref,r,e):n&&n.refs&&n.refs.forEach(i=>Am(i,r,e))}},Rw=(e,t)=>{t.shouldUseNativeValidation&&u0(e,t);const r={};for(const n in e){const i=oe(t.fields,n),a=Object.assign(e[n]||{},{ref:i&&i.ref});if(Aw(t.names||Object.keys(e),n)){const l=Object.assign({},oe(r,n));ke(l,"root",a),ke(r,n,l)}else ke(r,n,a)}return r},Aw=(e,t)=>{const r=Tm(t);return e.some(n=>Tm(n).match(`^${r}\\.\\d+`))};function Tm(e){return e.replace(/\]|\[/g,"")}function d0(e,t,r){return r===void 0&&(r={}),function(n,i,a){try{return Promise.resolve(function(l,o){try{var c=(t!=null&&t.context,Promise.resolve(e[r.mode==="sync"?"validateSync":"validate"](n,Object.assign({abortEarly:!1},t,{context:i}))).then(function(u){return a.shouldUseNativeValidation&&u0({},a),{values:r.raw?Object.assign({},n):u,errors:{}}}))}catch(u){return o(u)}return c&&c.then?c.then(void 0,o):c}(0,function(l){if(!l.inner)throw l;return{values:{},errors:Rw((o=l,c=!a.shouldUseNativeValidation&&a.criteriaMode==="all",(o.inner||[]).reduce(function(u,m){if(u[m.path]||(u[m.path]={message:m.message,type:m.type}),c){var h=u[m.path].types,f=h&&h[m.type];u[m.path]=r0(m.path,c,u,m.type,f?[].concat(f,m.message):m.message)}return u},{})),a)};var o,c}))}catch(l){return Promise.reject(l)}}}function Vn(e){this._maxSize=e,this.clear()}Vn.prototype.clear=function(){this._size=0,this._values=Object.create(null)};Vn.prototype.get=function(e){return this._values[e]};Vn.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var Tw=/[^.^\]^[]+|(?=\[\]|\.\.)/g,m0=/^\d+$/,zw=/^\d/,Mw=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,$w=/^\s*(['"]?)(.*?)(\1)\s*$/,Fu=512,zm=new Vn(Fu),Mm=new Vn(Fu),$m=new Vn(Fu),Pn={Cache:Vn,split:Nc,normalizePath:go,setter:function(e){var t=go(e);return Mm.get(e)||Mm.set(e,function(n,i){for(var a=0,l=t.length,o=n;a<l-1;){var c=t[a];if(c==="__proto__"||c==="constructor"||c==="prototype")return n;o=o[t[a++]]}o[t[a]]=i})},getter:function(e,t){var r=go(e);return $m.get(e)||$m.set(e,function(i){for(var a=0,l=r.length;a<l;)if(i!=null||!t)i=i[r[a++]];else return;return i})},join:function(e){return e.reduce(function(t,r){return t+(Ou(r)||m0.test(r)?"["+r+"]":(t?".":"")+r)},"")},forEach:function(e,t,r){Fw(Array.isArray(e)?e:Nc(e),t,r)}};function go(e){return zm.get(e)||zm.set(e,Nc(e).map(function(t){return t.replace($w,"$2")}))}function Nc(e){return e.match(Tw)||[""]}function Fw(e,t,r){var n=e.length,i,a,l,o;for(a=0;a<n;a++)i=e[a],i&&(Iw(i)&&(i='"'+i+'"'),o=Ou(i),l=!o&&/^\d+$/.test(i),t.call(r,i,o,l,a,e))}function Ou(e){return typeof e=="string"&&e&&["'",'"'].indexOf(e.charAt(0))!==-1}function Ow(e){return e.match(zw)&&!e.match(m0)}function Lw(e){return Mw.test(e)}function Iw(e){return!Ou(e)&&(Ow(e)||Lw(e))}const Vw=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,Rl=e=>e.match(Vw)||[],Al=e=>e[0].toUpperCase()+e.slice(1),Lu=(e,t)=>Rl(e).join(t).toLowerCase(),f0=e=>Rl(e).reduce((t,r)=>`${t}${t?r[0].toUpperCase()+r.slice(1).toLowerCase():r.toLowerCase()}`,""),Uw=e=>Al(f0(e)),Bw=e=>Lu(e,"_"),Hw=e=>Lu(e,"-"),Ww=e=>Al(Lu(e," ")),qw=e=>Rl(e).map(Al).join(" ");var yo={words:Rl,upperFirst:Al,camelCase:f0,pascalCase:Uw,snakeCase:Bw,kebabCase:Hw,sentenceCase:Ww,titleCase:qw},Iu={exports:{}};Iu.exports=function(e){return h0(Yw(e),e)};Iu.exports.array=h0;function h0(e,t){var r=e.length,n=new Array(r),i={},a=r,l=Qw(t),o=Jw(e);for(t.forEach(function(u){if(!o.has(u[0])||!o.has(u[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});a--;)i[a]||c(e[a],a,new Set);return n;function c(u,m,h){if(h.has(u)){var f;try{f=", node was:"+JSON.stringify(u)}catch{f=""}throw new Error("Cyclic dependency"+f)}if(!o.has(u))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(u));if(!i[m]){i[m]=!0;var j=l.get(u)||new Set;if(j=Array.from(j),m=j.length){h.add(u);do{var y=j[--m];c(y,o.get(y),h)}while(m);h.delete(u)}n[--r]=u}}}function Yw(e){for(var t=new Set,r=0,n=e.length;r<n;r++){var i=e[r];t.add(i[0]),t.add(i[1])}return Array.from(t)}function Qw(e){for(var t=new Map,r=0,n=e.length;r<n;r++){var i=e[r];t.has(i[0])||t.set(i[0],new Set),t.has(i[1])||t.set(i[1],new Set),t.get(i[0]).add(i[1])}return t}function Jw(e){for(var t=new Map,r=0,n=e.length;r<n;r++)t.set(e[r],r);return t}var Kw=Iu.exports;const Gw=Zm(Kw),Xw=Object.prototype.toString,Zw=Error.prototype.toString,ej=RegExp.prototype.toString,tj=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",rj=/^Symbol\((.*)\)(.*)$/;function nj(e){return e!=+e?"NaN":e===0&&1/e<0?"-0":""+e}function Fm(e,t=!1){if(e==null||e===!0||e===!1)return""+e;const r=typeof e;if(r==="number")return nj(e);if(r==="string")return t?`"${e}"`:e;if(r==="function")return"[Function "+(e.name||"anonymous")+"]";if(r==="symbol")return tj.call(e).replace(rj,"Symbol($1)");const n=Xw.call(e).slice(8,-1);return n==="Date"?isNaN(e.getTime())?""+e:e.toISOString(e):n==="Error"||e instanceof Error?"["+Zw.call(e)+"]":n==="RegExp"?ej.call(e):null}function ln(e,t){let r=Fm(e,t);return r!==null?r:JSON.stringify(e,function(n,i){let a=Fm(this[n],t);return a!==null?a:i},2)}function p0(e){return e==null?[]:[].concat(e)}let x0,g0,y0,sj=/\$\{\s*(\w+)\s*\}/g;x0=Symbol.toStringTag;class Om{constructor(t,r,n,i){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[x0]="Error",this.name="ValidationError",this.value=r,this.path=n,this.type=i,this.errors=[],this.inner=[],p0(t).forEach(a=>{if(jt.isError(a)){this.errors.push(...a.errors);const l=a.inner.length?a.inner:[a];this.inner.push(...l)}else this.errors.push(a)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}g0=Symbol.hasInstance;y0=Symbol.toStringTag;class jt extends Error{static formatError(t,r){const n=r.label||r.path||"this";return r=Object.assign({},r,{path:n,originalPath:r.path}),typeof t=="string"?t.replace(sj,(i,a)=>ln(r[a])):typeof t=="function"?t(r):t}static isError(t){return t&&t.name==="ValidationError"}constructor(t,r,n,i,a){const l=new Om(t,r,n,i);if(a)return l;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[y0]="Error",this.name=l.name,this.message=l.message,this.type=l.type,this.value=l.value,this.path=l.path,this.errors=l.errors,this.inner=l.inner,Error.captureStackTrace&&Error.captureStackTrace(this,jt)}static[g0](t){return Om[Symbol.hasInstance](t)||super[Symbol.hasInstance](t)}}let hr={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:e,type:t,value:r,originalValue:n})=>{const i=n!=null&&n!==r?` (cast from the value \`${ln(n,!0)}\`).`:".";return t!=="mixed"?`${e} must be a \`${t}\` type, but the final value was: \`${ln(r,!0)}\``+i:`${e} must match the configured type. The validated value was: \`${ln(r,!0)}\``+i}},vt={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},ij={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},Sc={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},aj={isValue:"${path} field must be ${value}"},Sa={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},lj={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},oj={notType:e=>{const{path:t,value:r,spec:n}=e,i=n.types.length;if(Array.isArray(r)){if(r.length<i)return`${t} tuple value has too few items, expected a length of ${i} but got ${r.length} for value: \`${ln(r,!0)}\``;if(r.length>i)return`${t} tuple value has too many items, expected a length of ${i} but got ${r.length} for value: \`${ln(r,!0)}\``}return jt.formatError(hr.notType,e)}};Object.assign(Object.create(null),{mixed:hr,string:vt,number:ij,date:Sc,object:Sa,array:lj,boolean:aj,tuple:oj});const Vu=e=>e&&e.__isYupSchema__;class rl{static fromOptions(t,r){if(!r.then&&!r.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:n,then:i,otherwise:a}=r,l=typeof n=="function"?n:(...o)=>o.every(c=>c===n);return new rl(t,(o,c)=>{var u;let m=l(...o)?i:a;return(u=m==null?void 0:m(c))!=null?u:c})}constructor(t,r){this.fn=void 0,this.refs=t,this.refs=t,this.fn=r}resolve(t,r){let n=this.refs.map(a=>a.getValue(r==null?void 0:r.value,r==null?void 0:r.parent,r==null?void 0:r.context)),i=this.fn(n,t,r);if(i===void 0||i===t)return t;if(!Vu(i))throw new TypeError("conditions must return a schema object");return i.resolve(r)}}const ia={context:"$",value:"."};class Un{constructor(t,r={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof t!="string")throw new TypeError("ref must be a string, got: "+t);if(this.key=t.trim(),t==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===ia.context,this.isValue=this.key[0]===ia.value,this.isSibling=!this.isContext&&!this.isValue;let n=this.isContext?ia.context:this.isValue?ia.value:"";this.path=this.key.slice(n.length),this.getter=this.path&&Pn.getter(this.path,!0),this.map=r.map}getValue(t,r,n){let i=this.isContext?n:this.isValue?t:r;return this.getter&&(i=this.getter(i||{})),this.map&&(i=this.map(i)),i}cast(t,r){return this.getValue(t,r==null?void 0:r.parent,r==null?void 0:r.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(t){return t&&t.__isYupRef}}Un.prototype.__isYupRef=!0;const kn=e=>e==null;function Wn(e){function t({value:r,path:n="",options:i,originalValue:a,schema:l},o,c){const{name:u,test:m,params:h,message:f,skipAbsent:j}=e;let{parent:y,context:b,abortEarly:w=l.spec.abortEarly,disableStackTrace:x=l.spec.disableStackTrace}=i;function d(M){return Un.isRef(M)?M.getValue(r,y,b):M}function p(M={}){const R=Object.assign({value:r,originalValue:a,label:l.spec.label,path:M.path||n,spec:l.spec,disableStackTrace:M.disableStackTrace||x},h,M.params);for(const te of Object.keys(R))R[te]=d(R[te]);const B=new jt(jt.formatError(M.message||f,R),r,R.path,M.type||u,R.disableStackTrace);return B.params=R,B}const N=w?o:c;let C={path:n,parent:y,type:u,from:i.from,createError:p,resolve:d,options:i,originalValue:a,schema:l};const z=M=>{jt.isError(M)?N(M):M?c(null):N(p())},E=M=>{jt.isError(M)?N(M):o(M)};if(j&&kn(r))return z(!0);let P;try{var S;if(P=m.call(C,r,C),typeof((S=P)==null?void 0:S.then)=="function"){if(i.sync)throw new Error(`Validation test of type: "${C.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(P).then(z,E)}}catch(M){E(M);return}z(P)}return t.OPTIONS=e,t}function cj(e,t,r,n=r){let i,a,l;return t?(Pn.forEach(t,(o,c,u)=>{let m=c?o.slice(1,o.length-1):o;e=e.resolve({context:n,parent:i,value:r});let h=e.type==="tuple",f=u?parseInt(m,10):0;if(e.innerType||h){if(h&&!u)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${l}" must contain an index to the tuple element, e.g. "${l}[0]"`);if(r&&f>=r.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${o}, in the path: ${t}. because there is no value at that index. `);i=r,r=r&&r[f],e=h?e.spec.types[f]:e.innerType}if(!u){if(!e.fields||!e.fields[m])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${l} which is a type: "${e.type}")`);i=r,r=r&&r[m],e=e.fields[m]}a=m,l=c?"["+o+"]":"."+o}),{schema:e,parent:i,parentPath:a}):{parent:i,parentPath:t,schema:e}}class nl extends Set{describe(){const t=[];for(const r of this.values())t.push(Un.isRef(r)?r.describe():r);return t}resolveAll(t){let r=[];for(const n of this.values())r.push(t(n));return r}clone(){return new nl(this.values())}merge(t,r){const n=this.clone();return t.forEach(i=>n.add(i)),r.forEach(i=>n.delete(i)),n}}function as(e,t=new Map){if(Vu(e)||!e||typeof e!="object")return e;if(t.has(e))return t.get(e);let r;if(e instanceof Date)r=new Date(e.getTime()),t.set(e,r);else if(e instanceof RegExp)r=new RegExp(e),t.set(e,r);else if(Array.isArray(e)){r=new Array(e.length),t.set(e,r);for(let n=0;n<e.length;n++)r[n]=as(e[n],t)}else if(e instanceof Map){r=new Map,t.set(e,r);for(const[n,i]of e.entries())r.set(n,as(i,t))}else if(e instanceof Set){r=new Set,t.set(e,r);for(const n of e)r.add(as(n,t))}else if(e instanceof Object){r={},t.set(e,r);for(const[n,i]of Object.entries(e))r[n]=as(i,t)}else throw Error(`Unable to clone ${e}`);return r}class _r{constructor(t){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new nl,this._blacklist=new nl,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(hr.notType)}),this.type=t.type,this._typeCheck=t.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},t==null?void 0:t.spec),this.withMutation(r=>{r.nonNullable()})}get _type(){return this.type}clone(t){if(this._mutate)return t&&Object.assign(this.spec,t),this;const r=Object.create(Object.getPrototypeOf(this));return r.type=this.type,r._typeCheck=this._typeCheck,r._whitelist=this._whitelist.clone(),r._blacklist=this._blacklist.clone(),r.internalTests=Object.assign({},this.internalTests),r.exclusiveTests=Object.assign({},this.exclusiveTests),r.deps=[...this.deps],r.conditions=[...this.conditions],r.tests=[...this.tests],r.transforms=[...this.transforms],r.spec=as(Object.assign({},this.spec,t)),r}label(t){let r=this.clone();return r.spec.label=t,r}meta(...t){if(t.length===0)return this.spec.meta;let r=this.clone();return r.spec.meta=Object.assign(r.spec.meta||{},t[0]),r}withMutation(t){let r=this._mutate;this._mutate=!0;let n=t(this);return this._mutate=r,n}concat(t){if(!t||t===this)return this;if(t.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${t.type}`);let r=this,n=t.clone();const i=Object.assign({},r.spec,n.spec);return n.spec=i,n.internalTests=Object.assign({},r.internalTests,n.internalTests),n._whitelist=r._whitelist.merge(t._whitelist,t._blacklist),n._blacklist=r._blacklist.merge(t._blacklist,t._whitelist),n.tests=r.tests,n.exclusiveTests=r.exclusiveTests,n.withMutation(a=>{t.tests.forEach(l=>{a.test(l.OPTIONS)})}),n.transforms=[...r.transforms,...n.transforms],n}isType(t){return t==null?!!(this.spec.nullable&&t===null||this.spec.optional&&t===void 0):this._typeCheck(t)}resolve(t){let r=this;if(r.conditions.length){let n=r.conditions;r=r.clone(),r.conditions=[],r=n.reduce((i,a)=>a.resolve(i,t),r),r=r.resolve(t)}return r}resolveOptions(t){var r,n,i,a;return Object.assign({},t,{from:t.from||[],strict:(r=t.strict)!=null?r:this.spec.strict,abortEarly:(n=t.abortEarly)!=null?n:this.spec.abortEarly,recursive:(i=t.recursive)!=null?i:this.spec.recursive,disableStackTrace:(a=t.disableStackTrace)!=null?a:this.spec.disableStackTrace})}cast(t,r={}){let n=this.resolve(Object.assign({value:t},r)),i=r.assert==="ignore-optionality",a=n._cast(t,r);if(r.assert!==!1&&!n.isType(a)){if(i&&kn(a))return a;let l=ln(t),o=ln(a);throw new TypeError(`The value of ${r.path||"field"} could not be cast to a value that satisfies the schema type: "${n.type}". 

attempted value: ${l} 
`+(o!==l?`result of cast: ${o}`:""))}return a}_cast(t,r){let n=t===void 0?t:this.transforms.reduce((i,a)=>a.call(this,i,t,this),t);return n===void 0&&(n=this.getDefault(r)),n}_validate(t,r={},n,i){let{path:a,originalValue:l=t,strict:o=this.spec.strict}=r,c=t;o||(c=this._cast(c,Object.assign({assert:!1},r)));let u=[];for(let m of Object.values(this.internalTests))m&&u.push(m);this.runTests({path:a,value:c,originalValue:l,options:r,tests:u},n,m=>{if(m.length)return i(m,c);this.runTests({path:a,value:c,originalValue:l,options:r,tests:this.tests},n,i)})}runTests(t,r,n){let i=!1,{tests:a,value:l,originalValue:o,path:c,options:u}=t,m=b=>{i||(i=!0,r(b,l))},h=b=>{i||(i=!0,n(b,l))},f=a.length,j=[];if(!f)return h([]);let y={value:l,originalValue:o,path:c,options:u,schema:this};for(let b=0;b<a.length;b++){const w=a[b];w(y,m,function(d){d&&(Array.isArray(d)?j.push(...d):j.push(d)),--f<=0&&h(j)})}}asNestedTest({key:t,index:r,parent:n,parentPath:i,originalParent:a,options:l}){const o=t??r;if(o==null)throw TypeError("Must include `key` or `index` for nested validations");const c=typeof o=="number";let u=n[o];const m=Object.assign({},l,{strict:!0,parent:n,value:u,originalValue:a[o],key:void 0,[c?"index":"key"]:o,path:c||o.includes(".")?`${i||""}[${c?o:`"${o}"`}]`:(i?`${i}.`:"")+t});return(h,f,j)=>this.resolve(m)._validate(u,m,f,j)}validate(t,r){var n;let i=this.resolve(Object.assign({},r,{value:t})),a=(n=r==null?void 0:r.disableStackTrace)!=null?n:i.spec.disableStackTrace;return new Promise((l,o)=>i._validate(t,r,(c,u)=>{jt.isError(c)&&(c.value=u),o(c)},(c,u)=>{c.length?o(new jt(c,u,void 0,void 0,a)):l(u)}))}validateSync(t,r){var n;let i=this.resolve(Object.assign({},r,{value:t})),a,l=(n=r==null?void 0:r.disableStackTrace)!=null?n:i.spec.disableStackTrace;return i._validate(t,Object.assign({},r,{sync:!0}),(o,c)=>{throw jt.isError(o)&&(o.value=c),o},(o,c)=>{if(o.length)throw new jt(o,t,void 0,void 0,l);a=c}),a}isValid(t,r){return this.validate(t,r).then(()=>!0,n=>{if(jt.isError(n))return!1;throw n})}isValidSync(t,r){try{return this.validateSync(t,r),!0}catch(n){if(jt.isError(n))return!1;throw n}}_getDefault(t){let r=this.spec.default;return r==null?r:typeof r=="function"?r.call(this,t):as(r)}getDefault(t){return this.resolve(t||{})._getDefault(t)}default(t){return arguments.length===0?this._getDefault():this.clone({default:t})}strict(t=!0){return this.clone({strict:t})}nullability(t,r){const n=this.clone({nullable:t});return n.internalTests.nullable=Wn({message:r,name:"nullable",test(i){return i===null?this.schema.spec.nullable:!0}}),n}optionality(t,r){const n=this.clone({optional:t});return n.internalTests.optionality=Wn({message:r,name:"optionality",test(i){return i===void 0?this.schema.spec.optional:!0}}),n}optional(){return this.optionality(!0)}defined(t=hr.defined){return this.optionality(!1,t)}nullable(){return this.nullability(!0)}nonNullable(t=hr.notNull){return this.nullability(!1,t)}required(t=hr.required){return this.clone().withMutation(r=>r.nonNullable(t).defined(t))}notRequired(){return this.clone().withMutation(t=>t.nullable().optional())}transform(t){let r=this.clone();return r.transforms.push(t),r}test(...t){let r;if(t.length===1?typeof t[0]=="function"?r={test:t[0]}:r=t[0]:t.length===2?r={name:t[0],test:t[1]}:r={name:t[0],message:t[1],test:t[2]},r.message===void 0&&(r.message=hr.default),typeof r.test!="function")throw new TypeError("`test` is a required parameters");let n=this.clone(),i=Wn(r),a=r.exclusive||r.name&&n.exclusiveTests[r.name]===!0;if(r.exclusive&&!r.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return r.name&&(n.exclusiveTests[r.name]=!!r.exclusive),n.tests=n.tests.filter(l=>!(l.OPTIONS.name===r.name&&(a||l.OPTIONS.test===i.OPTIONS.test))),n.tests.push(i),n}when(t,r){!Array.isArray(t)&&typeof t!="string"&&(r=t,t=".");let n=this.clone(),i=p0(t).map(a=>new Un(a));return i.forEach(a=>{a.isSibling&&n.deps.push(a.key)}),n.conditions.push(typeof r=="function"?new rl(i,r):rl.fromOptions(i,r)),n}typeError(t){let r=this.clone();return r.internalTests.typeError=Wn({message:t,name:"typeError",skipAbsent:!0,test(n){return this.schema._typeCheck(n)?!0:this.createError({params:{type:this.schema.type}})}}),r}oneOf(t,r=hr.oneOf){let n=this.clone();return t.forEach(i=>{n._whitelist.add(i),n._blacklist.delete(i)}),n.internalTests.whiteList=Wn({message:r,name:"oneOf",skipAbsent:!0,test(i){let a=this.schema._whitelist,l=a.resolveAll(this.resolve);return l.includes(i)?!0:this.createError({params:{values:Array.from(a).join(", "),resolved:l}})}}),n}notOneOf(t,r=hr.notOneOf){let n=this.clone();return t.forEach(i=>{n._blacklist.add(i),n._whitelist.delete(i)}),n.internalTests.blacklist=Wn({message:r,name:"notOneOf",test(i){let a=this.schema._blacklist,l=a.resolveAll(this.resolve);return l.includes(i)?this.createError({params:{values:Array.from(a).join(", "),resolved:l}}):!0}}),n}strip(t=!0){let r=this.clone();return r.spec.strip=t,r}describe(t){const r=(t?this.resolve(t):this).clone(),{label:n,meta:i,optional:a,nullable:l}=r.spec;return{meta:i,label:n,optional:a,nullable:l,default:r.getDefault(t),type:r.type,oneOf:r._whitelist.describe(),notOneOf:r._blacklist.describe(),tests:r.tests.map(c=>({name:c.OPTIONS.name,params:c.OPTIONS.params})).filter((c,u,m)=>m.findIndex(h=>h.name===c.name)===u)}}}_r.prototype.__isYupSchema__=!0;for(const e of["validate","validateSync"])_r.prototype[`${e}At`]=function(t,r,n={}){const{parent:i,parentPath:a,schema:l}=cj(this,t,r,n.context);return l[e](i&&i[a],Object.assign({},n,{parent:i,path:t}))};for(const e of["equals","is"])_r.prototype[e]=_r.prototype.oneOf;for(const e of["not","nope"])_r.prototype[e]=_r.prototype.notOneOf;const uj=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function dj(e){const t=kc(e);if(!t)return Date.parse?Date.parse(e):Number.NaN;if(t.z===void 0&&t.plusMinus===void 0)return new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond).valueOf();let r=0;return t.z!=="Z"&&t.plusMinus!==void 0&&(r=t.hourOffset*60+t.minuteOffset,t.plusMinus==="+"&&(r=0-r)),Date.UTC(t.year,t.month,t.day,t.hour,t.minute+r,t.second,t.millisecond)}function kc(e){var t,r;const n=uj.exec(e);return n?{year:Cr(n[1]),month:Cr(n[2],1)-1,day:Cr(n[3],1),hour:Cr(n[4]),minute:Cr(n[5]),second:Cr(n[6]),millisecond:n[7]?Cr(n[7].substring(0,3)):0,precision:(t=(r=n[7])==null?void 0:r.length)!=null?t:void 0,z:n[8]||void 0,plusMinus:n[9]||void 0,hourOffset:Cr(n[10]),minuteOffset:Cr(n[11])}:null}function Cr(e,t=0){return Number(e)||t}let mj=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,fj=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,hj=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,pj="^\\d{4}-\\d{2}-\\d{2}",xj="\\d{2}:\\d{2}:\\d{2}",gj="(([+-]\\d{2}(:?\\d{2})?)|Z)",yj=new RegExp(`${pj}T${xj}(\\.\\d+)?${gj}$`),vj=e=>kn(e)||e===e.trim(),bj={}.toString();function Gt(){return new v0}class v0 extends _r{constructor(){super({type:"string",check(t){return t instanceof String&&(t=t.valueOf()),typeof t=="string"}}),this.withMutation(()=>{this.transform((t,r,n)=>{if(!n.spec.coerce||n.isType(t)||Array.isArray(t))return t;const i=t!=null&&t.toString?t.toString():t;return i===bj?t:i})})}required(t){return super.required(t).withMutation(r=>r.test({message:t||hr.required,name:"required",skipAbsent:!0,test:n=>!!n.length}))}notRequired(){return super.notRequired().withMutation(t=>(t.tests=t.tests.filter(r=>r.OPTIONS.name!=="required"),t))}length(t,r=vt.length){return this.test({message:r,name:"length",exclusive:!0,params:{length:t},skipAbsent:!0,test(n){return n.length===this.resolve(t)}})}min(t,r=vt.min){return this.test({message:r,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(n){return n.length>=this.resolve(t)}})}max(t,r=vt.max){return this.test({name:"max",exclusive:!0,message:r,params:{max:t},skipAbsent:!0,test(n){return n.length<=this.resolve(t)}})}matches(t,r){let n=!1,i,a;return r&&(typeof r=="object"?{excludeEmptyString:n=!1,message:i,name:a}=r:i=r),this.test({name:a||"matches",message:i||vt.matches,params:{regex:t},skipAbsent:!0,test:l=>l===""&&n||l.search(t)!==-1})}email(t=vt.email){return this.matches(mj,{name:"email",message:t,excludeEmptyString:!0})}url(t=vt.url){return this.matches(fj,{name:"url",message:t,excludeEmptyString:!0})}uuid(t=vt.uuid){return this.matches(hj,{name:"uuid",message:t,excludeEmptyString:!1})}datetime(t){let r="",n,i;return t&&(typeof t=="object"?{message:r="",allowOffset:n=!1,precision:i=void 0}=t:r=t),this.matches(yj,{name:"datetime",message:r||vt.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:r||vt.datetime_offset,params:{allowOffset:n},skipAbsent:!0,test:a=>{if(!a||n)return!0;const l=kc(a);return l?!!l.z:!1}}).test({name:"datetime_precision",message:r||vt.datetime_precision,params:{precision:i},skipAbsent:!0,test:a=>{if(!a||i==null)return!0;const l=kc(a);return l?l.precision===i:!1}})}ensure(){return this.default("").transform(t=>t===null?"":t)}trim(t=vt.trim){return this.transform(r=>r!=null?r.trim():r).test({message:t,name:"trim",test:vj})}lowercase(t=vt.lowercase){return this.transform(r=>kn(r)?r:r.toLowerCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:r=>kn(r)||r===r.toLowerCase()})}uppercase(t=vt.uppercase){return this.transform(r=>kn(r)?r:r.toUpperCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:r=>kn(r)||r===r.toUpperCase()})}}Gt.prototype=v0.prototype;let wj=new Date(""),jj=e=>Object.prototype.toString.call(e)==="[object Date]";class Tl extends _r{constructor(){super({type:"date",check(t){return jj(t)&&!isNaN(t.getTime())}}),this.withMutation(()=>{this.transform((t,r,n)=>!n.spec.coerce||n.isType(t)||t===null?t:(t=dj(t),isNaN(t)?Tl.INVALID_DATE:new Date(t)))})}prepareParam(t,r){let n;if(Un.isRef(t))n=t;else{let i=this.cast(t);if(!this._typeCheck(i))throw new TypeError(`\`${r}\` must be a Date or a value that can be \`cast()\` to a Date`);n=i}return n}min(t,r=Sc.min){let n=this.prepareParam(t,"min");return this.test({message:r,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(i){return i>=this.resolve(n)}})}max(t,r=Sc.max){let n=this.prepareParam(t,"max");return this.test({message:r,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(i){return i<=this.resolve(n)}})}}Tl.INVALID_DATE=wj;Tl.prototype;function Nj(e,t=[]){let r=[],n=new Set,i=new Set(t.map(([l,o])=>`${l}-${o}`));function a(l,o){let c=Pn.split(l)[0];n.add(c),i.has(`${o}-${c}`)||r.push([o,c])}for(const l of Object.keys(e)){let o=e[l];n.add(l),Un.isRef(o)&&o.isSibling?a(o.path,l):Vu(o)&&"deps"in o&&o.deps.forEach(c=>a(c,l))}return Gw.array(Array.from(n),r).reverse()}function Lm(e,t){let r=1/0;return e.some((n,i)=>{var a;if((a=t.path)!=null&&a.includes(n))return r=i,!0}),r}function b0(e){return(t,r)=>Lm(e,t)-Lm(e,r)}const Sj=(e,t,r)=>{if(typeof e!="string")return e;let n=e;try{n=JSON.parse(e)}catch{}return r.isType(n)?n:e};function ka(e){if("fields"in e){const t={};for(const[r,n]of Object.entries(e.fields))t[r]=ka(n);return e.setFields(t)}if(e.type==="array"){const t=e.optional();return t.innerType&&(t.innerType=ka(t.innerType)),t}return e.type==="tuple"?e.optional().clone({types:e.spec.types.map(ka)}):"optional"in e?e.optional():e}const kj=(e,t)=>{const r=[...Pn.normalizePath(t)];if(r.length===1)return r[0]in e;let n=r.pop(),i=Pn.getter(Pn.join(r),!0)(e);return!!(i&&n in i)};let Im=e=>Object.prototype.toString.call(e)==="[object Object]";function Vm(e,t){let r=Object.keys(e.fields);return Object.keys(t).filter(n=>r.indexOf(n)===-1)}const _j=b0([]);function Uu(e){return new w0(e)}class w0 extends _r{constructor(t){super({type:"object",check(r){return Im(r)||typeof r=="function"}}),this.fields=Object.create(null),this._sortErrors=_j,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{t&&this.shape(t)})}_cast(t,r={}){var n;let i=super._cast(t,r);if(i===void 0)return this.getDefault(r);if(!this._typeCheck(i))return i;let a=this.fields,l=(n=r.stripUnknown)!=null?n:this.spec.noUnknown,o=[].concat(this._nodes,Object.keys(i).filter(h=>!this._nodes.includes(h))),c={},u=Object.assign({},r,{parent:c,__validating:r.__validating||!1}),m=!1;for(const h of o){let f=a[h],j=h in i;if(f){let y,b=i[h];u.path=(r.path?`${r.path}.`:"")+h,f=f.resolve({value:b,context:r.context,parent:c});let w=f instanceof _r?f.spec:void 0,x=w==null?void 0:w.strict;if(w!=null&&w.strip){m=m||h in i;continue}y=!r.__validating||!x?f.cast(i[h],u):i[h],y!==void 0&&(c[h]=y)}else j&&!l&&(c[h]=i[h]);(j!==h in c||c[h]!==i[h])&&(m=!0)}return m?c:i}_validate(t,r={},n,i){let{from:a=[],originalValue:l=t,recursive:o=this.spec.recursive}=r;r.from=[{schema:this,value:l},...a],r.__validating=!0,r.originalValue=l,super._validate(t,r,n,(c,u)=>{if(!o||!Im(u)){i(c,u);return}l=l||u;let m=[];for(let h of this._nodes){let f=this.fields[h];!f||Un.isRef(f)||m.push(f.asNestedTest({options:r,key:h,parent:u,parentPath:r.path,originalParent:l}))}this.runTests({tests:m,value:u,originalValue:l,options:r},n,h=>{i(h.sort(this._sortErrors).concat(c),u)})})}clone(t){const r=super.clone(t);return r.fields=Object.assign({},this.fields),r._nodes=this._nodes,r._excludedEdges=this._excludedEdges,r._sortErrors=this._sortErrors,r}concat(t){let r=super.concat(t),n=r.fields;for(let[i,a]of Object.entries(this.fields)){const l=n[i];n[i]=l===void 0?a:l}return r.withMutation(i=>i.setFields(n,[...this._excludedEdges,...t._excludedEdges]))}_getDefault(t){if("default"in this.spec)return super._getDefault(t);if(!this._nodes.length)return;let r={};return this._nodes.forEach(n=>{var i;const a=this.fields[n];let l=t;(i=l)!=null&&i.value&&(l=Object.assign({},l,{parent:l.value,value:l.value[n]})),r[n]=a&&"getDefault"in a?a.getDefault(l):void 0}),r}setFields(t,r){let n=this.clone();return n.fields=t,n._nodes=Nj(t,r),n._sortErrors=b0(Object.keys(t)),r&&(n._excludedEdges=r),n}shape(t,r=[]){return this.clone().withMutation(n=>{let i=n._excludedEdges;return r.length&&(Array.isArray(r[0])||(r=[r]),i=[...n._excludedEdges,...r]),n.setFields(Object.assign(n.fields,t),i)})}partial(){const t={};for(const[r,n]of Object.entries(this.fields))t[r]="optional"in n&&n.optional instanceof Function?n.optional():n;return this.setFields(t)}deepPartial(){return ka(this)}pick(t){const r={};for(const n of t)this.fields[n]&&(r[n]=this.fields[n]);return this.setFields(r,this._excludedEdges.filter(([n,i])=>t.includes(n)&&t.includes(i)))}omit(t){const r=[];for(const n of Object.keys(this.fields))t.includes(n)||r.push(n);return this.pick(r)}from(t,r,n){let i=Pn.getter(t,!0);return this.transform(a=>{if(!a)return a;let l=a;return kj(a,t)&&(l=Object.assign({},a),n||delete l[t],l[r]=i(a)),l})}json(){return this.transform(Sj)}exact(t){return this.test({name:"exact",exclusive:!0,message:t||Sa.exact,test(r){if(r==null)return!0;const n=Vm(this.schema,r);return n.length===0||this.createError({params:{properties:n.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(t=!0,r=Sa.noUnknown){typeof t!="boolean"&&(r=t,t=!0);let n=this.test({name:"noUnknown",exclusive:!0,message:r,test(i){if(i==null)return!0;const a=Vm(this.schema,i);return!t||a.length===0||this.createError({params:{unknown:a.join(", ")}})}});return n.spec.noUnknown=t,n}unknown(t=!0,r=Sa.noUnknown){return this.noUnknown(!t,r)}transformKeys(t){return this.transform(r=>{if(!r)return r;const n={};for(const i of Object.keys(r))n[t(i)]=r[i];return n})}camelCase(){return this.transformKeys(yo.camelCase)}snakeCase(){return this.transformKeys(yo.snakeCase)}constantCase(){return this.transformKeys(t=>yo.snakeCase(t).toUpperCase())}describe(t){const r=(t?this.resolve(t):this).clone(),n=super.describe(t);n.fields={};for(const[a,l]of Object.entries(r.fields)){var i;let o=t;(i=o)!=null&&i.value&&(o=Object.assign({},o,{parent:o.value,value:o.value[a]})),n.fields[a]=l.describe(o)}return n}}Uu.prototype=w0.prototype;const pt=({size:e="md",className:t=""})=>{const r={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return s.jsx("div",{className:`animate-spin rounded-full border-b-2 border-blue-600 ${r[e]} ${t}`})},pn=({message:e,onDismiss:t,className:r=""})=>s.jsx("div",{className:`bg-red-50 border border-red-200 rounded-md p-4 ${r}`,children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(Ns,{className:"h-5 w-5 text-red-400"})}),s.jsx("div",{className:"ml-3 flex-1",children:s.jsx("p",{className:"text-sm text-red-700",children:e})}),t&&s.jsx("div",{className:"ml-auto pl-3",children:s.jsx("div",{className:"-mx-1.5 -my-1.5",children:s.jsx("button",{onClick:t,className:"inline-flex rounded-md bg-red-50 p-1.5 text-red-500 hover:bg-red-100",children:s.jsx(Yt,{className:"h-3 w-3"})})})})]})}),Ej=Uu({email:Gt().email("L'email doit être valide").required("L'email est requis"),password:Gt().required("Le mot de passe est requis")}).required(),Cj=()=>{var b,w;const[e,t]=g.useState(!1),[r,n]=g.useState(null),{login:i,loading:a,user:l}=mt(),o=it();(w=(b=Ot().state)==null?void 0:b.from)!=null&&w.pathname;const{register:u,handleSubmit:m,formState:{errors:h,isSubmitting:f}}=c0({resolver:d0(Ej)}),j=x=>{switch(x){case"admin":return"/admin/users";case"medecin":return"/dashboard";case"secretaire":return"/dashboard";default:return"/dashboard"}},y=async x=>{var d,p,N;try{n(null),await i(x),setTimeout(()=>{const C=l||JSON.parse(localStorage.getItem("user")||"{}"),z=j(C.role);console.log("User role:",C.role),console.log("Redirect to:",z),o(z,{replace:!0})},100)}catch(C){((d=C.response)==null?void 0:d.status)===401?n("Email ou mot de passe incorrect"):(N=(p=C.response)==null?void 0:p.data)!=null&&N.detail?n(C.response.data.detail):n("Une erreur est survenue lors de la connexion")}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"max-w-md w-full space-y-8",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-blue-100 mb-4",children:s.jsx(vn,{className:"h-8 w-8 text-blue-600"})}),s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"CHUConnect"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Connectez-vous à votre compte"})]}),r&&s.jsx(pn,{message:r,onDismiss:()=>n(null),className:"mt-6"}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:m(y),children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),s.jsx("input",{...u("email"),type:"email",autoComplete:"email",id:"email",className:"mt-1 appearance-none rounded-lg relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Votre email"}),h.email&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.email.message})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),s.jsxs("div",{className:"mt-1 relative",children:[s.jsx("input",{...u("password"),type:e?"text":"password",autoComplete:"current-password",id:"password",className:"appearance-none rounded-lg relative block w-full px-3 py-2 pr-10 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Votre mot de passe"}),s.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>t(!e),tabIndex:-1,"aria-label":e?"Masquer le mot de passe":"Afficher le mot de passe",children:e?s.jsx(Ru,{className:"h-4 w-4 text-gray-400"}):s.jsx(kr,{className:"h-4 w-4 text-gray-400"})})]}),h.password&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.password.message})]})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:f||a,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f||a?s.jsxs(s.Fragment,{children:[s.jsx(pt,{size:"sm",className:"mr-2"}),"Connexion..."]}):"Se connecter"})})]})]})})})},j0=6048e5,Pj=864e5,Um=Symbol.for("constructDateFrom");function un(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&Um in e?e[Um](t):e instanceof Date?new e.constructor(t):new Date(t)}function cr(e,t){return un(t||e,e)}let Dj={};function zl(){return Dj}function Ci(e,t){var o,c,u,m;const r=zl(),n=(t==null?void 0:t.weekStartsOn)??((c=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((m=(u=r.locale)==null?void 0:u.options)==null?void 0:m.weekStartsOn)??0,i=cr(e,t==null?void 0:t.in),a=i.getDay(),l=(a<n?7:0)+a-n;return i.setDate(i.getDate()-l),i.setHours(0,0,0,0),i}function sl(e,t){return Ci(e,{...t,weekStartsOn:1})}function N0(e,t){const r=cr(e,t==null?void 0:t.in),n=r.getFullYear(),i=un(r,0);i.setFullYear(n+1,0,4),i.setHours(0,0,0,0);const a=sl(i),l=un(r,0);l.setFullYear(n,0,4),l.setHours(0,0,0,0);const o=sl(l);return r.getTime()>=a.getTime()?n+1:r.getTime()>=o.getTime()?n:n-1}function Bm(e){const t=cr(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Rj(e,...t){const r=un.bind(null,t.find(n=>typeof n=="object"));return t.map(r)}function Hm(e,t){const r=cr(e,t==null?void 0:t.in);return r.setHours(0,0,0,0),r}function Aj(e,t,r){const[n,i]=Rj(r==null?void 0:r.in,e,t),a=Hm(n),l=Hm(i),o=+a-Bm(a),c=+l-Bm(l);return Math.round((o-c)/Pj)}function Tj(e,t){const r=N0(e,t),n=un(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),sl(n)}function zj(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Mj(e){return!(!zj(e)&&typeof e!="number"||isNaN(+cr(e)))}function $j(e,t){const r=cr(e,t==null?void 0:t.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Fj={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Oj=(e,t,r)=>{let n;const i=Fj[e];return typeof i=="string"?n=i:t===1?n=i.one:n=i.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function hs(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const Lj={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ij={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Vj={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Uj={date:hs({formats:Lj,defaultWidth:"full"}),time:hs({formats:Ij,defaultWidth:"full"}),dateTime:hs({formats:Vj,defaultWidth:"full"})},Bj={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Hj=(e,t,r,n)=>Bj[e];function xr(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let i;if(n==="formatting"&&e.formattingValues){const l=e.defaultFormattingWidth||e.defaultWidth,o=r!=null&&r.width?String(r.width):l;i=e.formattingValues[o]||e.formattingValues[l]}else{const l=e.defaultWidth,o=r!=null&&r.width?String(r.width):e.defaultWidth;i=e.values[o]||e.values[l]}const a=e.argumentCallback?e.argumentCallback(t):t;return i[a]}}const Wj={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},qj={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Yj={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Qj={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Jj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Kj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Gj=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Xj={ordinalNumber:Gj,era:xr({values:Wj,defaultWidth:"wide"}),quarter:xr({values:qj,defaultWidth:"wide",argumentCallback:e=>e-1}),month:xr({values:Yj,defaultWidth:"wide"}),day:xr({values:Qj,defaultWidth:"wide"}),dayPeriod:xr({values:Jj,defaultWidth:"wide",formattingValues:Kj,defaultFormattingWidth:"wide"})};function gr(e){return(t,r={})=>{const n=r.width,i=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],a=t.match(i);if(!a)return null;const l=a[0],o=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(o)?e1(o,h=>h.test(l)):Zj(o,h=>h.test(l));let u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const m=t.slice(l.length);return{value:u,rest:m}}}function Zj(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function e1(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function S0(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const i=n[0],a=t.match(e.parsePattern);if(!a)return null;let l=e.valueCallback?e.valueCallback(a[0]):a[0];l=r.valueCallback?r.valueCallback(l):l;const o=t.slice(i.length);return{value:l,rest:o}}}const t1=/^(\d+)(th|st|nd|rd)?/i,r1=/\d+/i,n1={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},s1={any:[/^b/i,/^(a|c)/i]},i1={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},a1={any:[/1/i,/2/i,/3/i,/4/i]},l1={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},o1={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},c1={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},u1={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},d1={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},m1={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},f1={ordinalNumber:S0({matchPattern:t1,parsePattern:r1,valueCallback:e=>parseInt(e,10)}),era:gr({matchPatterns:n1,defaultMatchWidth:"wide",parsePatterns:s1,defaultParseWidth:"any"}),quarter:gr({matchPatterns:i1,defaultMatchWidth:"wide",parsePatterns:a1,defaultParseWidth:"any",valueCallback:e=>e+1}),month:gr({matchPatterns:l1,defaultMatchWidth:"wide",parsePatterns:o1,defaultParseWidth:"any"}),day:gr({matchPatterns:c1,defaultMatchWidth:"wide",parsePatterns:u1,defaultParseWidth:"any"}),dayPeriod:gr({matchPatterns:d1,defaultMatchWidth:"any",parsePatterns:m1,defaultParseWidth:"any"})},h1={code:"en-US",formatDistance:Oj,formatLong:Uj,formatRelative:Hj,localize:Xj,match:f1,options:{weekStartsOn:0,firstWeekContainsDate:1}};function p1(e,t){const r=cr(e,t==null?void 0:t.in);return Aj(r,$j(r))+1}function x1(e,t){const r=cr(e,t==null?void 0:t.in),n=+sl(r)-+Tj(r);return Math.round(n/j0)+1}function k0(e,t){var m,h,f,j;const r=cr(e,t==null?void 0:t.in),n=r.getFullYear(),i=zl(),a=(t==null?void 0:t.firstWeekContainsDate)??((h=(m=t==null?void 0:t.locale)==null?void 0:m.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((j=(f=i.locale)==null?void 0:f.options)==null?void 0:j.firstWeekContainsDate)??1,l=un((t==null?void 0:t.in)||e,0);l.setFullYear(n+1,0,a),l.setHours(0,0,0,0);const o=Ci(l,t),c=un((t==null?void 0:t.in)||e,0);c.setFullYear(n,0,a),c.setHours(0,0,0,0);const u=Ci(c,t);return+r>=+o?n+1:+r>=+u?n:n-1}function g1(e,t){var o,c,u,m;const r=zl(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(u=r.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??1,i=k0(e,t),a=un((t==null?void 0:t.in)||e,0);return a.setFullYear(i,0,n),a.setHours(0,0,0,0),Ci(a,t)}function y1(e,t){const r=cr(e,t==null?void 0:t.in),n=+Ci(r,t)-+g1(r,t);return Math.round(n/j0)+1}function Ne(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Hr={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return Ne(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Ne(r+1,2)},d(e,t){return Ne(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Ne(e.getHours()%12||12,t.length)},H(e,t){return Ne(e.getHours(),t.length)},m(e,t){return Ne(e.getMinutes(),t.length)},s(e,t){return Ne(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return Ne(i,t.length)}},qn={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Wm={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return Hr.y(e,t)},Y:function(e,t,r,n){const i=k0(e,n),a=i>0?i:1-i;if(t==="YY"){const l=a%100;return Ne(l,2)}return t==="Yo"?r.ordinalNumber(a,{unit:"year"}):Ne(a,t.length)},R:function(e,t){const r=N0(e);return Ne(r,t.length)},u:function(e,t){const r=e.getFullYear();return Ne(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Ne(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Ne(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Hr.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return Ne(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const i=y1(e,n);return t==="wo"?r.ordinalNumber(i,{unit:"week"}):Ne(i,t.length)},I:function(e,t,r){const n=x1(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):Ne(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Hr.d(e,t)},D:function(e,t,r){const n=p1(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Ne(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const i=e.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return Ne(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const i=e.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return Ne(a,t.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),i=n===0?7:n;switch(t){case"i":return String(i);case"ii":return Ne(i,t.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let i;switch(n===12?i=qn.noon:n===0?i=qn.midnight:i=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let i;switch(n>=17?i=qn.evening:n>=12?i=qn.afternoon:n>=4?i=qn.morning:i=qn.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Hr.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Hr.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Ne(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):Ne(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Hr.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Hr.s(e,t)},S:function(e,t){return Hr.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return Ym(n);case"XXXX":case"XX":return yn(n);case"XXXXX":case"XXX":default:return yn(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return Ym(n);case"xxxx":case"xx":return yn(n);case"xxxxx":case"xxx":default:return yn(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+qm(n,":");case"OOOO":default:return"GMT"+yn(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+qm(n,":");case"zzzz":default:return"GMT"+yn(n,":")}},t:function(e,t,r){const n=Math.trunc(+e/1e3);return Ne(n,t.length)},T:function(e,t,r){return Ne(+e,t.length)}};function qm(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),i=Math.trunc(n/60),a=n%60;return a===0?r+String(i):r+String(i)+t+Ne(a,2)}function Ym(e,t){return e%60===0?(e>0?"-":"+")+Ne(Math.abs(e)/60,2):yn(e,t)}function yn(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),i=Ne(Math.trunc(n/60),2),a=Ne(n%60,2);return r+i+t+a}const Qm=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},_0=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},v1=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return Qm(e,t);let a;switch(n){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",Qm(n,t)).replace("{{time}}",_0(i,t))},b1={p:_0,P:v1},w1=/^D+$/,j1=/^Y+$/,N1=["D","DD","YY","YYYY"];function S1(e){return w1.test(e)}function k1(e){return j1.test(e)}function _1(e,t,r){const n=E1(e,t,r);if(console.warn(n),N1.includes(e))throw new RangeError(n)}function E1(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const C1=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,P1=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,D1=/^'([^]*?)'?$/,R1=/''/g,A1=/[a-zA-Z]/;function tt(e,t,r){var m,h,f,j,y,b,w,x;const n=zl(),i=(r==null?void 0:r.locale)??n.locale??h1,a=(r==null?void 0:r.firstWeekContainsDate)??((h=(m=r==null?void 0:r.locale)==null?void 0:m.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((j=(f=n.locale)==null?void 0:f.options)==null?void 0:j.firstWeekContainsDate)??1,l=(r==null?void 0:r.weekStartsOn)??((b=(y=r==null?void 0:r.locale)==null?void 0:y.options)==null?void 0:b.weekStartsOn)??n.weekStartsOn??((x=(w=n.locale)==null?void 0:w.options)==null?void 0:x.weekStartsOn)??0,o=cr(e,r==null?void 0:r.in);if(!Mj(o))throw new RangeError("Invalid time value");let c=t.match(P1).map(d=>{const p=d[0];if(p==="p"||p==="P"){const N=b1[p];return N(d,i.formatLong)}return d}).join("").match(C1).map(d=>{if(d==="''")return{isToken:!1,value:"'"};const p=d[0];if(p==="'")return{isToken:!1,value:T1(d)};if(Wm[p])return{isToken:!0,value:d};if(p.match(A1))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:d}});i.localize.preprocessor&&(c=i.localize.preprocessor(o,c));const u={firstWeekContainsDate:a,weekStartsOn:l,locale:i};return c.map(d=>{if(!d.isToken)return d.value;const p=d.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&k1(p)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&S1(p))&&_1(p,t,String(e));const N=Wm[p[0]];return N(o,p,i.localize,u)}).join("")}function T1(e){const t=e.match(D1);return t?t[1].replace(R1,"'"):e}const z1={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},M1=(e,t,r)=>{let n;const i=z1[e];return typeof i=="string"?n=i:t===1?n=i.one:n=i.other.replace("{{count}}",String(t)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"dans "+n:"il y a "+n:n},$1={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},F1={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},O1={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},L1={date:hs({formats:$1,defaultWidth:"full"}),time:hs({formats:F1,defaultWidth:"full"}),dateTime:hs({formats:O1,defaultWidth:"full"})},I1={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},V1=(e,t,r,n)=>I1[e],U1={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},B1={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},H1={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},W1={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},q1={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},Y1=(e,t)=>{const r=Number(e),n=t==null?void 0:t.unit;if(r===0)return"0";const i=["year","week","hour","minute","second"];let a;return r===1?a=n&&i.includes(n)?"ère":"er":a="ème",r+a},Q1=["MMM","MMMM"],J1={preprocessor:(e,t)=>e.getDate()===1||!t.some(n=>n.isToken&&Q1.includes(n.value))?t:t.map(n=>n.isToken&&n.value==="do"?{isToken:!0,value:"d"}:n),ordinalNumber:Y1,era:xr({values:U1,defaultWidth:"wide"}),quarter:xr({values:B1,defaultWidth:"wide",argumentCallback:e=>e-1}),month:xr({values:H1,defaultWidth:"wide"}),day:xr({values:W1,defaultWidth:"wide"}),dayPeriod:xr({values:q1,defaultWidth:"wide"})},K1=/^(\d+)(ième|ère|ème|er|e)?/i,G1=/\d+/i,X1={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},Z1={any:[/^av/i,/^ap/i]},eN={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},tN={any:[/1/i,/2/i,/3/i,/4/i]},rN={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},nN={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},sN={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},iN={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},aN={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},lN={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},oN={ordinalNumber:S0({matchPattern:K1,parsePattern:G1,valueCallback:e=>parseInt(e)}),era:gr({matchPatterns:X1,defaultMatchWidth:"wide",parsePatterns:Z1,defaultParseWidth:"any"}),quarter:gr({matchPatterns:eN,defaultMatchWidth:"wide",parsePatterns:tN,defaultParseWidth:"any",valueCallback:e=>e+1}),month:gr({matchPatterns:rN,defaultMatchWidth:"wide",parsePatterns:nN,defaultParseWidth:"any"}),day:gr({matchPatterns:sN,defaultMatchWidth:"wide",parsePatterns:iN,defaultParseWidth:"any"}),dayPeriod:gr({matchPatterns:aN,defaultMatchWidth:"any",parsePatterns:lN,defaultParseWidth:"any"})},rt={code:"fr",formatDistance:M1,formatLong:L1,formatRelative:V1,localize:J1,match:oN,options:{weekStartsOn:1,firstWeekContainsDate:4}},cN=()=>{const{user:e,isMedecin:t}=mt(),[r,n]=g.useState(null),[i,a]=g.useState([]),[l,o]=g.useState(!0),[c,u]=g.useState(null),[m,h]=g.useState([]),f=it();g.useEffect(()=>{b()},[]);const j="http://192.168.1.114:8000",y=async()=>{var d,p;const w=(e==null?void 0:e._id)||(e==null?void 0:e.id),x=e==null?void 0:e.role;if(console.log("🎯 Détermination du médecin cible:",{userId:w,userRole:x}),x==="medecin")return console.log("👨‍⚕️ Utilisateur est médecin, ID:",w),w;if(x==="secretaire")try{const N=await fetch(`${j}/users/${w}`);if(!N.ok)throw new Error(`HTTP error! status: ${N.status}`);const C=await N.json(),z=C.medecin_id||((d=C.medecin)==null?void 0:d.id)||((p=C.medecin)==null?void 0:p._id);return console.log("👩‍💼 Secrétaire - médecin associé ID:",z),z||(console.error("❌ Aucun médecin associé trouvé pour la secrétaire"),null)}catch(N){return console.error("❌ Erreur lors de la récupération du médecin associé:",N),null}return console.log("⚠️ Rôle utilisateur non reconnu:",x),null},b=async()=>{try{o(!0),u(null);const w=await y();if(!w){u("Impossible de déterminer le médecin associé");return}console.log("📊 DASHBOARD DEBUG START:"),console.log("- Utilisateur connecté:",e),console.log("- ID médecin cible:",w);const d=new Date().toISOString().split("T")[0];console.log("- Date aujourd'hui:",d);const p={totalPatients:0,consultationsToday:0,rendezVousToday:0,totalConsultations:0},N=[];try{console.log("🔄 Chargement des patients du médecin...");const C=await Ge.getAll(1,200);console.log("✅ Tous les patients chargés:",C);const z=C.items.filter(E=>{var S,M;const P=(E.medecin_id||((S=E.medecin)==null?void 0:S.id)||((M=E.medecin)==null?void 0:M._id))===w;return P&&console.log(`✅ Patient ${E.nom} ${E.prenom} appartient au médecin`),P});console.log(`📊 Patients du médecin: ${z.length} sur ${C.items.length}`),p.totalPatients=z.length,h(z)}catch(C){console.error("❌ Erreur patients:",C),p.totalPatients=0,h([])}try{console.log("🔄 Chargement des consultations du médecin...");const C=await js.getAll(1,200);if(console.log("✅ Toutes les consultations chargées:",C),C&&C.items){const z=C.items.filter(D=>{if(!D.medecin_id||D.medecin_id==="default_medecin_id")return!1;const P=D.medecin_id===w;return P&&console.log(`✅ Consultation ${D.id} appartient au médecin`),P});console.log(`📊 Consultations du médecin: ${z.length} sur ${C.items.length}`),p.totalConsultations=z.length;const E=z.filter(D=>{try{if(!D.date_consultation)return!1;const P=new Date(D.date_consultation);return isNaN(P.getTime())?!1:P.toISOString().split("T")[0]===d}catch{return!1}});console.log(`📅 Consultations du médecin aujourd'hui: ${E.length}`),p.consultationsToday=E.length,z.slice(0,3).forEach(D=>{try{if(!D.date_consultation)return;const P=new Date(D.date_consultation);if(isNaN(P.getTime()))return;const S=m.find(R=>R.id===D.patient_id)||D.patient,M=S?`${S.prenom||"Prénom"} ${S.nom||"Nom"}`:"Patient inconnu";N.push({id:D.id||D._id||`consultation-${Date.now()}`,type:"consultation",title:"Consultation ajoutée",subtitle:`Patient: ${M}`,time:tt(P,"dd MMM yyyy à HH:mm",{locale:rt}),icon:s.jsx(zt,{className:"h-4 w-4 text-purple-600"})})}catch(P){console.warn("Erreur lors de l'ajout de consultation à l'activité:",P)}})}}catch(C){console.error("❌ Erreur consultations:",C),p.totalConsultations=0,p.consultationsToday=0}try{console.log("🔄 Chargement des rendez-vous du médecin...");const C=await At.getAll(1,200);if(console.log("✅ Tous les rendez-vous chargés:",C),C&&C.items){const z=C.items.filter(D=>{const P=D.medecin_id===w;return P&&console.log(`✅ RDV ${D.id} appartient au médecin`),P});console.log(`📊 Rendez-vous du médecin: ${z.length} sur ${C.items.length}`);const E=z.filter(D=>{try{if(!D.date_rendez_vous)return!1;const P=new Date(D.date_rendez_vous);if(isNaN(P.getTime()))return!1;const S=P.toISOString().split("T")[0],M=S===d,R=D.statut==="programme"||D.statut==="programmé";return console.log(`🔍 RDV ${D.id}: date=${S}, today=${d}, isToday=${M}, statut=${D.statut}, isProgramme=${R}`),M&&R}catch{return!1}});console.log(`📅 RDV du médecin aujourd'hui (programmés): ${E.length}`),p.rendezVousToday=E.length,z.slice(0,2).forEach(D=>{try{if(!D.date_rendez_vous)return;const P=new Date(D.date_rendez_vous);if(D.heure&&typeof D.heure=="string"){const[B,te]=D.heure.split(":");B&&te&&P.setHours(parseInt(B),parseInt(te),0,0)}if(isNaN(P.getTime()))return;const S=m.find(B=>B.id===D.patient_id)||D.patient,M=S?`${S.prenom||"Prénom"} ${S.nom||"Nom"}`:"Patient inconnu",R=D.statut==="programme"||D.statut==="programmé"?s.jsx(qe,{className:"h-4 w-4 text-blue-600"}):D.statut==="termine"?s.jsx(ut,{className:"h-4 w-4 text-green-600"}):s.jsx(cw,{className:"h-4 w-4 text-red-600"});N.push({id:D.id||D._id||`rdv-${Date.now()}`,type:"rendez-vous",title:`RDV ${D.statut||"statut inconnu"}`,subtitle:`Patient: ${M}`,time:tt(P,"dd MMM yyyy à HH:mm",{locale:rt}),icon:R})}catch(P){console.warn("Erreur lors de l'ajout de RDV à l'activité:",P)}})}}catch(C){console.error("❌ Erreur rendez-vous:",C),p.rendezVousToday=0}console.log("📊 Statistiques finales du médecin:",p);try{N.sort((C,z)=>new Date(z.time).getTime()-new Date(C.time).getTime())}catch(C){console.warn("Erreur lors du tri des activités:",C)}n(p),a(N.slice(0,5))}catch(w){console.error("💥 ERREUR GLOBALE DASHBOARD:",w);let x="Impossible de charger les données du tableau de bord";w.message&&(x+=` (${w.message})`),u(x)}finally{o(!1)}};return l?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(pt,{size:"lg"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Tableau de bord"}),s.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Bienvenue, ",e==null?void 0:e.nom," (",e==null?void 0:e.role,")",(e==null?void 0:e.role)==="secretaire"&&s.jsx("span",{className:"ml-2 text-blue-600",children:"- Données du médecin associé"})]})]}),c&&s.jsx(pn,{message:c,onDismiss:()=>u(null)}),r&&s.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[s.jsx("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg border border-gray-200 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(Vt,{className:"h-8 w-8 text-blue-600"})}),s.jsx("div",{className:"ml-4 w-0 flex-1",children:s.jsxs("dl",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:(e==null?void 0:e.role)==="secretaire"?"Patients du Médecin":"Mes Patients"}),s.jsx("dd",{className:"text-2xl font-semibold text-gray-900",children:r.totalPatients})]})})]}),s.jsx("div",{className:"mt-2",children:s.jsx("button",{onClick:()=>f("/patients"),className:"text-xs text-blue-600 hover:text-blue-800",children:"Voir tous les patients →"})})]})}),s.jsx("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg border border-gray-200 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(Te,{className:"h-8 w-8 text-green-600"})}),s.jsx("div",{className:"ml-4 w-0 flex-1",children:s.jsxs("dl",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"RDV Aujourd'hui"}),s.jsx("dd",{className:"text-2xl font-semibold text-gray-900",children:r.rendezVousToday})]})})]}),s.jsxs("div",{className:"mt-2",children:[s.jsx("span",{className:"text-xs text-gray-500",children:"Statut: Programmé"}),s.jsx("button",{onClick:()=>f("/rendez-vous"),className:"block text-xs text-green-600 hover:text-green-800 mt-1",children:"Voir tous les RDV →"})]})]})}),t&&s.jsx("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg border border-gray-200 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(zt,{className:"h-8 w-8 text-purple-600"})}),s.jsx("div",{className:"ml-4 w-0 flex-1",children:s.jsxs("dl",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Mes Consultations"}),s.jsx("dd",{className:"text-2xl font-semibold text-gray-900",children:r.totalConsultations})]})})]}),s.jsx("div",{className:"mt-2",children:s.jsx("button",{onClick:()=>f("/consultations"),className:"text-xs text-purple-600 hover:text-purple-800",children:"Voir mes consultations →"})})]})}),t&&s.jsx("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg border border-gray-200 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(bc,{className:"h-8 w-8 text-orange-600"})}),s.jsx("div",{className:"ml-4 w-0 flex-1",children:s.jsxs("dl",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Consultations Aujourd'hui"}),s.jsx("dd",{className:"text-2xl font-semibold text-gray-900",children:r.consultationsToday})]})})]}),s.jsx("div",{className:"mt-2",children:s.jsx("span",{className:"text-xs text-gray-500",children:tt(new Date,"dd MMMM yyyy",{locale:rt})})})]})})]}),s.jsxs("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Actions rapides"})}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[s.jsx("button",{onClick:()=>f("/patients/nouveau"),className:"relative rounded-lg border border-gray-200 bg-white px-6 py-4 shadow-sm hover:border-gray-300 hover:shadow-md transition-all",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Vt,{className:"h-6 w-6 text-blue-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Nouveau Patient"})]})}),t&&s.jsx("button",{onClick:()=>f("/consultations/nouvelle"),className:"relative rounded-lg border border-gray-200 bg-white px-6 py-4 shadow-sm hover:border-gray-300 hover:shadow-md transition-all",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(zt,{className:"h-6 w-6 text-purple-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Nouvelle Consultation"})]})}),s.jsx("button",{onClick:()=>f("/rendez-vous/nouveau"),className:"relative rounded-lg border border-gray-200 bg-white px-6 py-4 shadow-sm hover:border-gray-300 hover:shadow-md transition-all",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Te,{className:"h-6 w-6 text-green-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Nouveau RDV"})]})})]})})]}),s.jsxs("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Activité récente",(e==null?void 0:e.role)==="secretaire"&&s.jsx("span",{className:"ml-2 text-sm text-blue-600 font-normal",children:"(du médecin associé)"})]})}),s.jsx("div",{className:"p-6",children:i.length>0?s.jsx("div",{className:"space-y-4",children:i.map(w=>s.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0 mt-1",children:w.icon}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:w.title}),s.jsx("p",{className:"text-sm text-gray-500 truncate",children:w.subtitle}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:w.time})]}),s.jsx("div",{className:"flex-shrink-0",children:s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${w.type==="consultation"?"bg-purple-100 text-purple-800":w.type==="rendez-vous"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:w.type==="consultation"?"Consultation":w.type==="rendez-vous"?"RDV":"Patient"})})]},w.id))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(qe,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Aucune activité récente"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:(e==null?void 0:e.role)==="secretaire"?"Les activités récentes du médecin associé apparaîtront ici":"Vos activités récentes apparaîtront ici"})]})})]})]})},uN=()=>{const{isMedecin:e,user:t}=mt(),[r,n]=g.useState([]),[i,a]=g.useState([]),[l,o]=g.useState(!0),[c,u]=g.useState(null),[m,h]=g.useState(""),[f,j]=g.useState(1),[y,b]=g.useState(1);g.useEffect(()=>{console.log("✅ PatientsPage chargé !"),console.log("Utilisateur connecté:",t),console.log("Est médecin:",e),w()},[f,t]),g.useEffect(()=>{x()},[m,r]);const w=async()=>{try{o(!0),u(null),console.log("=== DEBUG loadPatients ==="),console.log("user:",t),console.log("isMedecin:",e);const S=await Ge.getAll(f,50);console.log("✅ Patients chargés:",S.items),n(S.items||[]),b(S.pages||1)}catch(S){console.error("❌ Erreur lors du chargement des patients:",S),console.error("❌ Message d'erreur:",S.message),S.message.includes("403")?u("Accès non autorisé - Vérifiez vos permissions"):S.message.includes("400")?u("Données utilisateur incomplètes - Contactez l'administrateur"):u(`Impossible de charger les patients: ${S.message}`),n([])}finally{o(!1)}},x=g.useCallback(()=>{if(!m.trim()){a(r);return}const S=m.toLowerCase().trim(),M=r.filter(R=>{var O,H;const B=`${R.prenom} ${R.nom}`.toLowerCase(),te=`${R.nom} ${R.prenom}`.toLowerCase(),U=((O=R.cin)==null?void 0:O.toLowerCase())||"",W=((H=R.telephone)==null?void 0:H.toLowerCase())||"";return B.includes(S)||te.includes(S)||U.includes(S)||W.includes(S)||R.nom.toLowerCase().includes(S)||R.prenom.toLowerCase().includes(S)});a(M)},[m,r]),d=()=>{h("")},p=e||t&&t.role==="secretaire",N=e||t&&t.role==="secretaire",C=e||t&&t.role==="secretaire",z=async S=>{if(p&&window.confirm("Êtes-vous sûr de vouloir supprimer ce patient ?"))try{await Ge.delete(S),n(M=>M.filter(R=>R.id!==S)),a(M=>M.filter(R=>R.id!==S))}catch(M){console.error("Erreur lors de la suppression:",M),u("Impossible de supprimer le patient")}},E=()=>e?"Mes Patients":t&&t.role==="secretaire"?"Gestion des Patients":"Patients",D=()=>e?"Gérer les informations de vos patients":t&&t.role==="secretaire"?"Gérer les patients du cabinet":"Consulter les patients",P={total:r.length,filtered:i.length,isSearching:m.trim().length>0};return N?l&&r.length===0?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(pt,{size:"lg"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:E()}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:P.isSearching?s.jsxs(s.Fragment,{children:[P.filtered," résultat",P.filtered!==1?"s":""," sur ",P.total," ","patient",P.total!==1?"s":""]}):s.jsxs(s.Fragment,{children:[D()," (",P.total," patient",P.total!==1?"s":"",")"]})})]}),C&&s.jsx("div",{className:"mt-4 sm:mt-0",children:s.jsxs(yr,{to:"/patients/nouveau",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 transition-colors",children:[s.jsx(Vr,{className:"h-4 w-4 mr-2"}),"Nouveau Patient"]})})]}),s.jsx("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Vt,{className:"h-5 w-5 text-gray-400"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Rechercher un patient"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx($n,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",placeholder:"Rechercher par nom, prénom, CIN ou téléphone...",value:m,onChange:S=>h(S.target.value),className:"block w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm"}),m&&s.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:s.jsx("button",{onClick:d,className:"text-gray-400 hover:text-gray-600 focus:outline-none",children:s.jsx(Yt,{className:"h-5 w-5"})})})]}),P.isSearching&&s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"text-gray-600",children:[s.jsx("span",{className:"font-medium text-blue-600",children:P.filtered})," ","résultat",P.filtered!==1?"s":""," trouvé",P.filtered!==1?"s":"",' pour "',m,'"']}),P.filtered===0&&s.jsx("div",{className:"text-gray-500",children:"Essayez avec d'autres termes de recherche"})]})]})}),c&&s.jsx(pn,{message:c,onDismiss:()=>u(null)}),s.jsx("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 overflow-hidden",children:i.length===0?s.jsx("div",{className:"text-center py-12",children:P.isSearching?s.jsxs(s.Fragment,{children:[s.jsx($n,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Aucun résultat trouvé"}),s.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:['Aucun patient ne correspond à votre recherche "',m,'"']}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{onClick:d,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:"Voir tous les patients"})})]}):s.jsxs(s.Fragment,{children:[s.jsx(Vt,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Aucun patient"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Commencez par ajouter votre premier patient"}),C&&s.jsx("div",{className:"mt-6",children:s.jsxs(yr,{to:"/patients/nouveau",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[s.jsx(Vr,{className:"h-4 w-4 mr-2"}),"Ajouter le premier patient"]})})]})}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Patient"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CIN"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Genre"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date de naissance"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map((S,M)=>{const R=B=>{if(!m.trim())return B;const te=new RegExp(`(${m.trim()})`,"gi");return B.split(te).map((W,O)=>te.test(W)?s.jsx("mark",{className:"bg-yellow-200 px-1 rounded",children:W},O):W)};return s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:R(`${S.prenom} ${S.nom}`)})})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:R(S.cin)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:S.genre==="M"?"Masculin":"Féminin"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(S.date_naissance).toLocaleDateString("fr-FR")}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:S.telephone?R(S.telephone):"-"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[s.jsx(yr,{to:`/patients/id/${S.id}`,className:"text-blue-600 hover:text-blue-900 p-1 rounded-full hover:bg-blue-50 transition-colors",title:"Voir les détails",children:s.jsx(kr,{className:"h-4 w-4"})}),p&&s.jsxs(s.Fragment,{children:[s.jsx(yr,{to:`/patients/id/${S.id}/modifier`,className:"text-green-600 hover:text-green-900 p-1 rounded-full hover:bg-green-50 transition-colors",title:"Modifier le patient",children:s.jsx(wr,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>S.id&&z(S.id),className:"text-red-600 hover:text-red-900 p-1 rounded-full hover:bg-red-50 transition-colors",title:"Supprimer le patient",children:s.jsx(Pt,{className:"h-4 w-4"})})]})]})})]},S.id||`patient-${M}`)})})]})})}),y>1&&s.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6 rounded-lg shadow-sm",children:[s.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[s.jsx("button",{onClick:()=>j(Math.max(1,f-1)),disabled:f===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Précédent"}),s.jsx("button",{onClick:()=>j(Math.min(y,f+1)),disabled:f===y,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Suivant"})]}),s.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[s.jsx("div",{children:s.jsxs("p",{className:"text-sm text-gray-700",children:["Page ",s.jsx("span",{className:"font-medium",children:f})," sur"," ",s.jsx("span",{className:"font-medium",children:y})]})}),s.jsx("div",{children:s.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[s.jsx("button",{onClick:()=>j(Math.max(1,f-1)),disabled:f===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Précédent"}),s.jsx("button",{onClick:()=>j(Math.min(y,f+1)),disabled:f===y,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Suivant"})]})})]})]})]}):s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Accès non autorisé"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Vous n'avez pas l'autorisation de voir cette page."})]})})},Jm="http://192.168.1.114:8000",dN=Uu({nom:Gt().required("Le nom est requis").min(2,"Le nom doit contenir au moins 2 caractères"),prenom:Gt().required("Le prénom est requis").min(2,"Le prénom doit contenir au moins 2 caractères"),cin:Gt().required("Le CIN est requis").matches(/^[A-Z]{1,2}[0-9]{6}$/,"Format CIN invalide (ex: A123456)"),genre:Gt().required("Le genre est requis").oneOf(["M","F"],"Genre invalide"),date_naissance:Gt().required("La date de naissance est requise"),telephone:Gt().matches(/^[0-9+\-\s()]*$/,"Format de téléphone invalide").nullable(),adresse:Gt().nullable(),email:Gt().email("Format email invalide").nullable()}),Km=()=>{const{id:e}=Ln(),t=it(),{isMedecin:r,user:n}=mt(),[i,a]=g.useState(!1),[l,o]=g.useState(null),[c,u]=g.useState(null),[m,h]=g.useState(!!e),[f,j]=g.useState(null),[y,b]=g.useState(null),[w,x]=g.useState(null),[d,p]=g.useState(null),[N,C]=g.useState(!1),z=g.useRef(null),E=!!e,D=E?"Modifier le patient":"Nouveau patient";g.useEffect(()=>{n&&(async()=>{console.log("=== RÉCUPÉRATION MEDECIN_ID ==="),console.log("user:",n),console.log("user.role:",n==null?void 0:n.role),console.log("user.medecin_id:",n==null?void 0:n.medecin_id);try{if(r){const re=(n==null?void 0:n._id)||(n==null?void 0:n.id);console.log("👨‍⚕️ Médecin - ID:",re),j(re)}else if(n&&n.role==="secretaire")if(n.medecin_id&&n.medecin_id!==null)console.log("👩‍💼 Secrétaire - medecin_id depuis contexte:",n.medecin_id),j(n.medecin_id);else{console.log("⚠️ medecin_id null - récupération depuis API");const re=await fetch(`${Jm}/users/me`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json"}});if(re.ok){const me=await re.json();console.log("✅ Données complètes:",me),me.medecin_id?(j(me.medecin_id),console.log("✅ medecin_id récupéré:",me.medecin_id)):(console.log("❌ medecin_id toujours null dans les données API"),o("Erreur: Secrétaire non associée à un médecin. Contactez l'administrateur."))}else console.log("❌ Erreur lors de la récupération des données utilisateur"),o("Erreur lors de la récupération des données utilisateur")}}catch(re){console.error("❌ Erreur fetchCompleteMedecinId:",re),o("Erreur lors de la récupération des informations du médecin")}})()},[n,r]),g.useEffect(()=>{if(console.log("=== VÉRIFICATION D'ACCÈS PATIENT FORM ==="),console.log("user:",n),console.log("isMedecin:",r),console.log("user.role:",n==null?void 0:n.role),!(r||n&&n.role==="secretaire")){console.log("❌ Accès refusé - redirection vers /patients"),t("/patients");return}console.log("✅ Accès autorisé")},[n,r,t]);const P=ne=>{var ee;const re=(ee=ne.target.files)==null?void 0:ee[0];if(!re)return;const me=5*1024*1024;if(!["image/jpeg","image/jpg","image/png"].includes(re.type)){o("Format de fichier non supporté. Utilisez JPG, JPEG ou PNG.");return}if(re.size>me){o("La taille du fichier ne doit pas dépasser 5MB.");return}b(re);const F=new FileReader;F.onload=ie=>{var A;x((A=ie.target)==null?void 0:A.result)},F.readAsDataURL(re)},S=()=>{b(null),x(null),z.current&&(z.current.value="")},M=async ne=>{if(!y)return null;C(!0);try{return(await Ge.uploadPhoto(ne,y)).photo_url}catch(re){throw console.error("Erreur upload photo:",re),re}finally{C(!1)}},R=()=>r?`Médecin connecté : Dr. ${n==null?void 0:n.nom} (ID: ${f})`:n&&n.role==="secretaire"?`Secrétaire : ${n==null?void 0:n.nom} - Médecin associé ID: ${f||"Chargement..."}`:"",{register:B,handleSubmit:te,formState:{errors:U,isSubmitting:W},reset:O,setValue:H}=c0({resolver:d0(dN),defaultValues:{nom:"",prenom:"",cin:"",genre:"M",date_naissance:"",telephone:"",adresse:"",email:""}});g.useEffect(()=>{E&&e&&J(e)},[e,E]);const J=async ne=>{try{h(!0);const re=await Ge.getById(ne);if(console.log("📋 Patient chargé pour édition:",re),console.log("📸 Photo URL du patient:",re.photo_url),H("nom",re.nom),H("prenom",re.prenom),H("cin",re.cin),H("genre",re.genre),H("date_naissance",re.date_naissance),H("telephone",re.telephone||""),H("adresse",re.adresse||""),H("email",re.email||""),re.photo_url){console.log("📸 Photo existante trouvée:",re.photo_url);const me=re.photo_url.startsWith("http")?re.photo_url:`${Jm}${re.photo_url}`;p(me),console.log("📸 URL complète de la photo:",me)}else console.log("📸 Aucune photo existante"),p(null)}catch(re){console.error("Erreur lors du chargement du patient:",re),o("Impossible de charger les données du patient")}finally{h(!1)}},X=async ne=>{var re,me;try{a(!0),o(null),u(null),console.log("💾 onSubmit - Données du formulaire:",ne),console.log("💾 onSubmit - completeMedecinId:",f),console.log("💾 onSubmit - user:",n),console.log("💾 onSubmit - isMedecin:",r);const se={...ne,telephone:ne.telephone||void 0,adresse:ne.adresse||void 0,email:ne.email||void 0};let F;if(E&&e)console.log("💾 Mise à jour du patient ID:",e),await Ge.update(e,se),F=e,y&&await M(F),u("Patient modifié avec succès");else{if(!f){o("Erreur: Impossible de déterminer le médecin responsable. Veuillez réessayer.");return}const ee={...se,medecin_id:f};console.log("💾 === CRÉATION PATIENT ==="),console.log("💾 medecin_id utilisé:",f),console.log("💾 Utilisateur connecté:",n==null?void 0:n.nom,`(${n==null?void 0:n.role})`),console.log("💾 Données patient complètes:",ee);const ie=await Ge.create(ee);if(console.log("💾 Patient créé avec ID:",ie.id||ie._id),F=ie.id||ie._id||ie.insertedId,!F)throw console.error("❌ Impossible de récupérer l'ID du patient créé:",ie),new Error("Erreur: ID du patient non retourné après création");y&&(console.log("📸 Upload de la photo pour le patient:",F),await M(F)),u("Patient créé avec succès")}setTimeout(()=>{t("/patients")},1500)}catch(se){console.error("❌ Erreur lors de la sauvegarde:",se),((re=se.response)==null?void 0:re.status)===400?o(se.response.data.detail||"Données invalides"):((me=se.response)==null?void 0:me.status)===409?o("Un patient avec ce CIN existe déjà"):o("Erreur lors de la sauvegarde du patient")}finally{a(!1)}};return m?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(pt,{size:"lg"})}):s.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:()=>t(-1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-md hover:bg-gray-100 transition-colors",children:s.jsx(hn,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:D}),s.jsx("p",{className:"text-sm text-gray-500",children:E?"Modifier les informations du patient":"Saisir les informations du nouveau patient"}),s.jsx("p",{className:"text-xs text-blue-600 mt-1",children:R()}),!E&&s.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Patient sera associé au médecin ID:"," ",f||"Chargement..."]})]})]}),l&&s.jsx(pn,{message:l,onDismiss:()=>o(null)}),c&&s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-green-700",children:c})})]})}),!E&&!f&&s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-yellow-700",children:"Chargement des informations du médecin en cours..."})})]})}),s.jsxs("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(fs,{className:"h-5 w-5 text-gray-400"}),s.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Photo du patient"})]})}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-32 h-32 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center bg-gray-50",children:w||d?s.jsxs("div",{className:"relative",children:[w?s.jsx("img",{src:w,alt:"Aperçu nouvelle photo",className:"w-28 h-28 object-cover rounded-lg"}):d?s.jsx("img",{src:d,alt:"Photo existante",className:"w-28 h-28 object-cover rounded-lg",onLoad:()=>console.log("✅ Photo existante chargée"),onError:ne=>{console.error("❌ Erreur chargement photo existante:",d),ne.target.style.display="none"}}):null,w&&s.jsx("button",{type:"button",onClick:S,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:s.jsx(Yt,{className:"h-3 w-3"})})]}):s.jsxs("div",{className:"text-center",children:[s.jsx(fs,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Aucune photo"})]})})}),s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("input",{ref:z,type:"file",accept:"image/jpeg,image/jpg,image/png",onChange:P,className:"hidden"}),s.jsxs("button",{type:"button",onClick:()=>{var ne;return(ne=z.current)==null?void 0:ne.click()},className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[s.jsx(lw,{className:"h-4 w-4 mr-2"}),w?"Changer la nouvelle photo":d?"Remplacer la photo actuelle":"Ajouter une photo"]}),y&&s.jsxs("p",{className:"text-sm text-gray-600",children:["Nouveau fichier sélectionné: ",y.name]}),d&&!w&&s.jsx("p",{className:"text-sm text-green-600",children:"Photo actuelle chargée"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Formats acceptés: JPG, JPEG, PNG. Taille max: 5MB"})]})})]})})]}),s.jsxs("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(qt,{className:"h-5 w-5 text-gray-400"}),s.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Informations du patient"})]})}),s.jsxs("form",{onSubmit:te(X),className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"nom",className:"block text-sm font-medium text-gray-700",children:"Nom *"}),s.jsx("input",{...B("nom"),type:"text",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"Nom de famille"}),U.nom&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:U.nom.message})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"prenom",className:"block text-sm font-medium text-gray-700",children:"Prénom *"}),s.jsx("input",{...B("prenom"),type:"text",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"Prénom"}),U.prenom&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:U.prenom.message})]})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"cin",className:"block text-sm font-medium text-gray-700",children:"CIN *"}),s.jsx("input",{...B("cin"),type:"text",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"A123456",style:{textTransform:"uppercase"}}),U.cin&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:U.cin.message})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"genre",className:"block text-sm font-medium text-gray-700",children:"Genre *"}),s.jsxs("select",{...B("genre"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",children:[s.jsx("option",{value:"M",children:"Masculin"}),s.jsx("option",{value:"F",children:"Féminin"})]}),U.genre&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:U.genre.message})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"date_naissance",className:"block text-sm font-medium text-gray-700",children:"Date de naissance *"}),s.jsx("input",{...B("date_naissance"),type:"date",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),U.date_naissance&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:U.date_naissance.message})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"telephone",className:"block text-sm font-medium text-gray-700",children:"Téléphone"}),s.jsx("input",{...B("telephone"),type:"tel",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"+212 6 12 34 56 78"}),U.telephone&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:U.telephone.message})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),s.jsx("input",{...B("email"),type:"email",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"patient@example.com"}),U.email&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:U.email.message})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"adresse",className:"block text-sm font-medium text-gray-700",children:"Adresse"}),s.jsx("textarea",{...B("adresse"),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"Adresse complète du patient"}),U.adresse&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:U.adresse.message})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:()=>t("/patients"),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Annuler"}),s.jsxs("button",{type:"submit",disabled:W||i||N||!E&&!f,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(W||i||N)&&s.jsx(pt,{size:"sm",className:"mr-2"}),s.jsx(In,{className:"h-4 w-4 mr-2"}),N?"Upload en cours...":E?"Modifier":"Enregistrer"]})]})]})]})]})},mN=()=>{var ie;const{isMedecin:e}=mt(),{user:t}=mt(),r=it(),[n,i]=g.useState([]),[a,l]=g.useState([]),[o,c]=g.useState([]),[u,m]=g.useState(!0),[h,f]=g.useState(null),[j,y]=g.useState(null),[b,w]=g.useState(1),[x,d]=g.useState(1),[p,N]=g.useState(""),[C,z]=g.useState([]),[E,D]=g.useState(null),[P,S]=g.useState(null),[M,R]=g.useState(""),[B,te]=g.useState(""),[U,W]=g.useState(""),[O,H]=g.useState("date_desc");g.useEffect(()=>{J()},[b]),g.useEffect(()=>{let A=[...n];p.trim()&&(A=A.filter(Y=>{var xe,ve,Pe,de,V;const Z=Y.patient?`${Y.patient.prenom} ${Y.patient.nom}`.toLowerCase():"",L=((ve=(xe=Y.patient)==null?void 0:xe.cin)==null?void 0:ve.toLowerCase())||"",G=((Pe=Y.diagnostic)==null?void 0:Pe.toLowerCase())||"",ce=((V=(de=Y.medecin)==null?void 0:de.nom)==null?void 0:V.toLowerCase())||"",he=p.toLowerCase();return Z.includes(he)||L.includes(he)||G.includes(he)||ce.includes(he)})),M&&(A=A.filter(Y=>new Date(Y.date_consultation).toISOString().split("T")[0]===M)),B&&(A=A.filter(Y=>Y.medecin_id===B)),U.trim()&&(A=A.filter(Y=>{var Z;return(Z=Y.diagnostic)==null?void 0:Z.toLowerCase().includes(U.toLowerCase())})),A.sort((Y,Z)=>{const L=new Date(Y.date_consultation),G=new Date(Z.date_consultation);return O==="date_asc"?L.getTime()-G.getTime():G.getTime()-L.getTime()}),z(A)},[n,p,M,B,U,O]);const J=async()=>{var A,Y;try{m(!0),f(null),console.log("=== DEBUG CONSULTATIONS ==="),console.log("Appel API:",`/consultations?page=${b}&size=10`);const[Z,L,G]=await Promise.all([js.getAll(b,10),Ge.getAll(1,200),vr.getAll()]);console.log("Réponse consultations:",Z),console.log("Réponse patients:",L),console.log("Réponse users:",G),console.log("🩺 Médecin connecté:",{id:t==null?void 0:t.id,_id:t==null?void 0:t._id,nom:t==null?void 0:t.nom,role:t==null?void 0:t.role});const ce=(t==null?void 0:t._id)||(t==null?void 0:t.id);console.log("🆔 ID du médecin connecté utilisé pour le filtrage:",ce),console.log("📋 Toutes les consultations (avant filtrage):",Z.items.map(de=>({id:de.id,medecin_id:de.medecin_id,patient_id:de.patient_id,date:de.date_consultation})));const he=Z.items.filter(de=>{if(!de.medecin_id||de.medecin_id==="default_medecin_id")return console.log(`⚠️ Consultation ${de.id} ignorée: medecin_id invalide (${de.medecin_id})`),!1;const V=de.medecin_id===ce;return console.log(`🔍 Consultation ${de.id}: medecin_id=${de.medecin_id} == user=${ce} ? ${V}`),V});console.log(`✅ Consultations filtrées: ${he.length} sur ${Z.items.length}`);const xe=G.filter(de=>de.role==="medecin"),ve=he.map(de=>{const V=L.items.find(_=>_.id==de.patient_id),v=G.find(_=>_._id==de.medecin_id||_.id==de.medecin_id);return!V&&de.patient_id&&console.log("Patient non trouvé pour consultation:",de.id,"patient_id:",de.patient_id),v||console.log("Médecin non trouvé pour consultation:",de.id,"medecin_id:",de.medecin_id),{...de,patient:V,medecin:v}});i(ve),l(L.items),c(xe);const Pe=Math.ceil(he.length/10*Z.pages);d(Math.max(1,Pe))}catch(Z){console.error("Erreur lors du chargement des consultations:",Z),console.log("Détails de l'erreur:",(A=Z.response)==null?void 0:A.data),console.log("Status de l'erreur:",(Y=Z.response)==null?void 0:Y.status),f("Impossible de charger la liste des consultations")}finally{m(!1)}},X=()=>{console.log("Recherche:",p)},ne=A=>{try{return tt(new Date(A),"dd MMMM yyyy",{locale:rt})}catch{return A}},re=()=>{N(""),R(""),te(""),W(""),H("date_desc")},me=async A=>{try{D(A),f(null),await js.delete(A),i(Y=>Y.filter(Z=>Z.id!==A)),y("Consultation supprimée avec succès"),S(null),setTimeout(()=>y(null),3e3)}catch(Y){console.error("Erreur lors de la suppression:",Y),f("Erreur lors de la suppression de la consultation")}finally{D(null)}},se=A=>{const Y=A._id||A.id;Y?S(Y):console.error("❌ Impossible de supprimer: ID consultation manquant",A)},F=()=>{S(null)},ee=Array.from(new Set(n.map(A=>A.diagnostic).filter(A=>A&&A.trim()))).slice(0,10);return u&&n.length===0?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(pt,{size:"lg"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Consultations"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Gérer les consultations médicales"})]}),e&&s.jsx("div",{className:"mt-4 sm:mt-0",children:s.jsxs(yr,{to:"/consultations/nouvelle",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 transition-colors",children:[s.jsx(Vr,{className:"h-4 w-4 mr-2"}),"Nouvelle Consultation"]})})]}),s.jsxs("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 p-4 space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx($n,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",placeholder:"Rechercher par nom de patient, CIN, diagnostic ou médecin...",value:p,onChange:A=>N(A.target.value),onKeyPress:A=>A.key==="Enter"&&X(),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),p&&s.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:s.jsx("button",{onClick:()=>N(""),className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Filtrer par date"}),s.jsx("input",{type:"date",value:M,onChange:A=>R(A.target.value),className:"block w-full text-sm border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Filtrer par Diagnostic"}),s.jsx("input",{type:"text",placeholder:"Diagnostic...",value:U,onChange:A=>W(A.target.value),className:"block w-full text-sm border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",list:"diagnostics-list"}),s.jsx("datalist",{id:"diagnostics-list",children:ee.map((A,Y)=>s.jsx("option",{value:A},Y))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Trier par"}),s.jsxs("select",{value:O,onChange:A=>H(A.target.value),className:"block w-full text-sm border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"date_desc",children:"Plus récent d'abord"}),s.jsx("option",{value:"date_asc",children:"Plus ancien d'abord"})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsxs("button",{onClick:re,className:"w-full inline-flex items-center justify-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[s.jsx(Zp,{className:"h-4 w-4 mr-2"}),"Effacer"]})})]}),(p||M||B||U)&&s.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 px-3 py-2 rounded-md",children:[s.jsx("span",{className:"font-medium",children:C.length})," ","résultat(s) trouvé(s)",p&&` pour "${p}"`,M&&` le ${ne(M)}`,B&&` pour Dr. ${(ie=o.find(A=>A.id===B))==null?void 0:ie.nom}`,U&&` avec diagnostic "${U}"`]})]}),P&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:s.jsxs("div",{className:"mt-3",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:s.jsx(Pt,{className:"h-6 w-6 text-red-600"})}),s.jsxs("div",{className:"mt-5 text-center",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Supprimer la consultation"}),s.jsxs("div",{className:"mt-2 px-7 py-3",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Êtes-vous sûr de vouloir supprimer cette consultation ? Cette action est irréversible."}),(()=>{const A=n.find(Y=>Y.id===P);return A?s.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg text-left",children:s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{className:"font-medium text-gray-900",children:A.patient?`${A.patient.prenom} ${A.patient.nom}`:"Patient inconnu"}),s.jsx("div",{className:"text-gray-500",children:ne(A.date_consultation)}),s.jsx("div",{className:"text-gray-500 truncate",children:A.motif})]})}):null})()]}),s.jsxs("div",{className:"flex gap-3 justify-center",children:[s.jsx("button",{onClick:F,disabled:E===P,className:"px-4 py-2 bg-gray-300 text-gray-800 text-base font-medium rounded-md shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-300 disabled:opacity-50",children:"Annuler"}),s.jsx("button",{onClick:()=>me(P),disabled:E===P,className:"px-4 py-2 bg-red-600 text-white text-base font-medium rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50 inline-flex items-center",children:E===P?s.jsxs(s.Fragment,{children:[s.jsx(pt,{size:"sm",className:"mr-2"}),"Suppression..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Pt,{className:"h-4 w-4 mr-2"}),"Supprimer"]})})]})]})]})})}),h&&s.jsx(pn,{message:h,onDismiss:()=>f(null)}),j&&s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-green-700",children:j})})]})}),s.jsx("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 overflow-hidden",children:((C==null?void 0:C.length)??0)===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Te,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:p||M||B||U?"Aucun résultat trouvé":"Aucune consultation"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:p||M||B||U?"Essayez de modifier vos critères de recherche.":"Commencez par créer une nouvelle consultation."}),(p||M||B||U)&&s.jsx("button",{onClick:re,className:"mt-3 text-blue-600 hover:text-blue-500 text-sm font-medium",children:"Effacer tous les filtres"}),e&&!(p||M||B||U)&&s.jsx("div",{className:"mt-6",children:s.jsxs(yr,{to:"/consultations/nouvelle",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[s.jsx(Vr,{className:"h-4 w-4 mr-2"}),"Nouvelle Consultation"]})})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Patient"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Heure"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Motif"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Médecin"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map((A,Y)=>{var L;const Z=A._id||A.id;return Z?s.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>{console.log("🔗 Navigation vers consultation:",Z),r(`/consultations/${Z}`)},children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 h-8 w-8",children:s.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center",children:s.jsx(qt,{className:"h-4 w-4 text-gray-500"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.patient?`${A.patient.prenom} ${A.patient.nom}`:"Patient inconnu"}),s.jsx("div",{className:"text-sm text-gray-500",children:((L=A.patient)==null?void 0:L.cin)||"CIN non disponible"})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:ne(A.date_consultation)})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"text-sm text-gray-900 max-w-xs truncate",children:A.motif||"Motif non disponible"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:A.medecin?`Dr. ${A.medecin.nom}`:"Médecin inconnu"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[s.jsx("button",{onClick:G=>{G.stopPropagation(),r(`/consultations/${Z}`)},className:"text-blue-600 hover:text-blue-900 p-1 rounded-full hover:bg-blue-50 transition-colors",title:"Voir les détails",children:s.jsx(kr,{className:"h-4 w-4"})}),e&&s.jsx("button",{onClick:G=>{G.stopPropagation(),r(`/consultations/${A.id}/modifier`)},className:"text-green-600 hover:text-green-900 p-1 rounded-full hover:bg-green-50 transition-colors",title:"Modifier la consultation",children:s.jsx(wr,{className:"h-4 w-4"})}),s.jsx("button",{onClick:G=>{G.stopPropagation(),r(`/patients/id/${A.patient_id}`)},className:"text-purple-600 hover:text-purple-900 p-1 rounded-full hover:bg-purple-50 transition-colors",title:"Voir le patient",children:s.jsx(qt,{className:"h-4 w-4"})}),e&&s.jsx("button",{onClick:G=>{G.stopPropagation(),se(A)},className:"text-red-600 hover:text-red-900 p-1 rounded-full hover:bg-red-50 transition-colors",title:"Supprimer la consultation",disabled:E===A.id,children:E===A.id?s.jsx(pt,{size:"sm"}):s.jsx(Pt,{className:"h-4 w-4"})})]})})]},Z):(console.error("❌ Consultation sans ID:",A),null)})})]})}),x>1&&s.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[s.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[s.jsx("button",{onClick:()=>w(Math.max(1,b-1)),disabled:b===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Précédent"}),s.jsx("button",{onClick:()=>w(Math.min(x,b+1)),disabled:b===x,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Suivant"})]}),s.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[s.jsx("div",{children:s.jsxs("p",{className:"text-sm text-gray-700",children:["Page ",s.jsx("span",{className:"font-medium",children:b})," ","sur ",s.jsx("span",{className:"font-medium",children:x})]})}),s.jsx("div",{children:s.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[s.jsx("button",{onClick:()=>w(Math.max(1,b-1)),disabled:b===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Précédent"}),s.jsx("button",{onClick:()=>w(Math.min(x,b+1)),disabled:b===x,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Suivant"})]})})]})]})]})})]})},fN=()=>{const{user:e}=mt(),[t,r]=g.useState([]),[n,i]=g.useState([]),[a,l]=g.useState([]),[o,c]=g.useState(!0),[u,m]=g.useState(null),[h,f]=g.useState(null),[j,y]=g.useState(!1),[b,w]=g.useState(!1),[x,d]=g.useState(""),[p,N]=g.useState([]),[C,z]=g.useState(null),[E,D]=g.useState(null),P=it(),S="http://192.168.1.114:8000",[M,R]=g.useState(""),[B,te]=g.useState(""),[U,W]=g.useState("date_desc"),[O,H]=g.useState({patient_id:"",date_rendez_vous:"",heure:"",motif:"",statut:"programme"}),[J,X]=g.useState({});g.useEffect(()=>{ne()},[]),g.useEffect(()=>{let L=[...t];x.trim()&&(L=L.filter(G=>{var ve,Pe;const ce=G.patient?`${G.patient.prenom} ${G.patient.nom}`.toLowerCase():"",he=((Pe=(ve=G.patient)==null?void 0:ve.cin)==null?void 0:Pe.toLowerCase())||"",xe=x.toLowerCase();return ce.includes(xe)||he.includes(xe)})),M&&(L=L.filter(G=>G.date_rendez_vous===M)),B&&(L=L.filter(G=>G.statut===B)),L.sort((G,ce)=>{const he=new Date(`${G.date_rendez_vous}T${G.heure}`),xe=new Date(`${ce.date_rendez_vous}T${ce.heure}`);return U==="date_asc"?he.getTime()-xe.getTime():xe.getTime()-he.getTime()}),N(L)},[t,x,M,B,U]);const ne=async()=>{var L,G;try{c(!0),m(null);const[ce,he]=await Promise.all([At.getAll(1,50),Ge.getAll(1,100)]);let xe=[];try{xe=(await vr.getAll()).filter(v=>v.role==="medecin")}catch(V){console.warn("⚠️ Impossible de charger les utilisateurs:",V)}let ve;if((e==null?void 0:e.role)==="medecin")ve=(e==null?void 0:e._id)||(e==null?void 0:e.id),console.log("👨‍⚕️ Médecin connecté - affichage de ses RDV:",ve);else if((e==null?void 0:e.role)==="secretaire")try{const V=(e==null?void 0:e._id)||(e==null?void 0:e.id),v=await fetch(`${S}/users/${V}`);if(v.ok){const _=await v.json();ve=_.medecin_id||((L=_.medecin)==null?void 0:L.id)||((G=_.medecin)==null?void 0:G._id),console.log("👩‍💼 Secrétaire - affichage des RDV du médecin associé:",ve)}else throw new Error(`Erreur HTTP ${v.status}`)}catch(V){console.error("❌ Erreur lors de la récupération du médecin associé:",V),m("Impossible de récupérer les informations du médecin associé");return}else{console.error("❌ Rôle utilisateur non autorisé:",e==null?void 0:e.role),m("Rôle utilisateur non autorisé pour consulter les rendez-vous");return}if(!ve){console.error("❌ Impossible de déterminer le médecin cible"),m("Erreur: Impossible de déterminer le médecin associé");return}const Pe=ce.items.filter(V=>V.medecin_id===ve);console.log(`✅ RDV filtrés: ${Pe.length} sur ${ce.items.length} pour le médecin ${ve}`);const de=Pe.map(V=>{const v=he.items.find(q=>q.id==V.patient_id),T=xe.find(q=>q.id==V.medecin_id||q._id==V.medecin_id||q.userId==V.medecin_id||q.user_id==V.medecin_id)||((e==null?void 0:e.role)==="medecin"?e:null);return{...V,patient:v,medecin:T}});r(de),i(he.items),l(xe)}catch(ce){console.error("Erreur lors du chargement:",ce),m("Impossible de charger les rendez-vous. Vérifiez vos permissions.")}finally{c(!1)}},re=()=>{const L={};if(O.patient_id||(L.patient_id="Veuillez sélectionner un patient"),O.date_rendez_vous||(L.date_rendez_vous="La date est requise"),O.heure||(L.heure="L'heure est requise"),O.motif.trim()||(L.motif="Le motif est requis"),O.date_rendez_vous){const G=new Date(O.date_rendez_vous),ce=new Date;ce.setHours(0,0,0,0),G<ce&&(L.date_rendez_vous="La date ne peut pas être dans le passé")}return O.date_rendez_vous&&O.heure&&t.find(ce=>ce.date_rendez_vous===O.date_rendez_vous&&ce.heure===O.heure&&ce.statut!=="annule")&&(L.heure="Un rendez-vous existe déjà à cette heure"),X(L),Object.keys(L).length===0},me=async L=>{if(L.preventDefault(),!!re())try{w(!0),m(null);const G={...O,patient_id:parseInt(O.patient_id),medecin_id:e.id},ce=await At.create(G),he={...ce,patient:n.find(xe=>xe.id===ce.patient_id),medecin:a.find(xe=>xe.id===ce.medecin_id)||e};r([he,...t]),H({patient_id:"",date_rendez_vous:"",heure:"",motif:"",statut:"programme"}),X({}),y(!1),f("Rendez-vous créé avec succès"),setTimeout(()=>f(null),3e3)}catch(G){console.error("Erreur lors de la création:",G),m("Erreur lors de la création du rendez-vous")}finally{w(!1)}},se=L=>{try{return tt(new Date(L),"dd MMMM yyyy",{locale:rt})}catch{return L}},F=L=>{switch(L){case"programme":return"bg-blue-100 text-blue-800";case"confirme":return"bg-green-100 text-green-800";case"annule":return"bg-red-100 text-red-800";case"termine":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},ee=L=>{switch(L){case"programme":return"Programmé";case"confirme":return"Confirmé";case"annule":return"Annulé";case"termine":return"Terminé";default:return L}},ie=()=>{d(""),R(""),te(""),W("date_desc")},A=async L=>{try{z(L),m(null),await At.delete(L),r(G=>G.filter(ce=>(ce._id||ce.id)!==L)),f("Rendez-vous supprimé avec succès"),D(null),setTimeout(()=>f(null),3e3)}catch(G){console.error("Erreur lors de la suppression:",G),m("Erreur lors de la suppression du rendez-vous")}finally{z(null)}},Y=L=>{const G=L._id||L.id;D(G)},Z=()=>{D(null)};return o?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(pt,{size:"lg"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Rendez-vous"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Gérer les rendez-vous médicaux"})]}),s.jsx("div",{className:"mt-4 sm:mt-0",children:s.jsxs("button",{onClick:()=>P("/rendez-vous/nouveau"),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 transition-colors",children:[s.jsx(Vr,{className:"h-4 w-4 mr-2"}),"Nouveau Rendez-vous"]})})]}),s.jsxs("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 p-4 space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx($n,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",placeholder:"Rechercher par nom de patient ou CIN...",value:x,onChange:L=>d(L.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),x&&s.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:s.jsx("button",{onClick:()=>d(""),className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Filtrer par date"}),s.jsx("input",{type:"date",value:M,onChange:L=>R(L.target.value),className:"block w-full text-sm border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Filtrer par statut"}),s.jsxs("select",{value:B,onChange:L=>te(L.target.value),className:"block w-full text-sm border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Tous les statuts"}),s.jsx("option",{value:"programme",children:"Programmé"}),s.jsx("option",{value:"confirme",children:"Confirmé"}),s.jsx("option",{value:"annule",children:"Annulé"}),s.jsx("option",{value:"termine",children:"Terminé"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Trier par"}),s.jsxs("select",{value:U,onChange:L=>W(L.target.value),className:"block w-full text-sm border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"date_desc",children:"Plus récent d'abord"}),s.jsx("option",{value:"date_asc",children:"Plus ancien d'abord"})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsxs("button",{onClick:ie,className:"w-full inline-flex items-center justify-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[s.jsx(Zp,{className:"h-4 w-4 mr-2"}),"Effacer"]})})]}),(x||M||B)&&s.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 px-3 py-2 rounded-md",children:[s.jsx("span",{className:"font-medium",children:p.length})," ","résultat(s) trouvé(s)",x&&` pour "${x}"`,M&&` le ${se(M)}`,B&&` avec le statut "${ee(B)}"`]})]}),E&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:s.jsxs("div",{className:"mt-3",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:s.jsx(Pt,{className:"h-6 w-6 text-red-600"})}),s.jsxs("div",{className:"mt-5 text-center",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Supprimer le rendez-vous"}),s.jsxs("div",{className:"mt-2 px-7 py-3",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Êtes-vous sûr de vouloir supprimer ce rendez-vous ? Cette action est irréversible."}),(()=>{const L=t.find(G=>(G._id||G.id)===E);return L?s.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg text-left",children:s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{className:"font-medium text-gray-900",children:L.patient?`${L.patient.prenom} ${L.patient.nom}`:"Patient inconnu"}),s.jsxs("div",{className:"text-gray-500",children:[se(L.date_rendez_vous)," à ",L.heure]}),s.jsx("div",{className:"text-gray-500 truncate",children:L.motif})]})}):null})()]}),s.jsxs("div",{className:"flex gap-3 justify-center",children:[s.jsx("button",{onClick:Z,disabled:C===E,className:"px-4 py-2 bg-gray-300 text-gray-800 text-base font-medium rounded-md shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-300 disabled:opacity-50",children:"Annuler"}),s.jsx("button",{onClick:()=>A(E),disabled:C===E,className:"px-4 py-2 bg-red-600 text-white text-base font-medium rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50 inline-flex items-center",children:C===E?s.jsxs(s.Fragment,{children:[s.jsx(pt,{size:"sm",className:"mr-2"}),"Suppression..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Pt,{className:"h-4 w-4 mr-2"}),"Supprimer"]})})]})]})]})})}),u&&s.jsx(pn,{message:u,onDismiss:()=>m(null)}),h&&s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-green-700",children:h})})]})}),j&&s.jsxs("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Nouveau rendez-vous"})}),s.jsxs("form",{onSubmit:me,className:"p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Patient *"}),s.jsxs("select",{value:O.patient_id,onChange:L=>H({...O,patient_id:L.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",children:[s.jsx("option",{value:"",children:"Sélectionner un patient"}),n.map(L=>s.jsxs("option",{value:L.id,children:[L.prenom," ",L.nom," (",L.cin,")"]},L.id))]}),J.patient_id&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:J.patient_id})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date *"}),s.jsx("input",{type:"date",value:O.date_rendez_vous,onChange:L=>H({...O,date_rendez_vous:L.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),J.date_rendez_vous&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:J.date_rendez_vous})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Heure *"}),s.jsx("input",{type:"time",value:O.heure,onChange:L=>H({...O,heure:L.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),J.heure&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:J.heure})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Statut"}),s.jsxs("select",{value:O.statut,onChange:L=>H({...O,statut:L.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",children:[s.jsx("option",{value:"programme",children:"Programmé"}),s.jsx("option",{value:"confirme",children:"Confirmé"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Motif *"}),s.jsx("textarea",{value:O.motif,onChange:L=>H({...O,motif:L.target.value}),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"Motif de la consultation..."}),J.motif&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:J.motif})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:()=>y(!1),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"Annuler"}),s.jsxs("button",{type:"submit",disabled:b,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[b&&s.jsx(pt,{size:"sm",className:"mr-2"}),"Créer"]})]})]})]}),s.jsx("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 overflow-hidden",children:((p==null?void 0:p.length)??0)===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Te,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:x||M||B?"Aucun résultat trouvé":"Aucun rendez-vous"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:x||M||B?"Essayez de modifier vos critères de recherche.":"Commencez par créer un nouveau rendez-vous."}),(x||M||B)&&s.jsx("button",{onClick:ie,className:"mt-3 text-blue-600 hover:text-blue-500 text-sm font-medium",children:"Effacer tous les filtres"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Patient"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Heure"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Motif"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Médecin"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map((L,G)=>{var he;const ce=L._id||L.id;return s.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>P(`/rendez-vous/${ce}`),children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 h-8 w-8",children:s.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center",children:s.jsx(vm,{className:"h-4 w-4 text-gray-500"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:L.patient?`${L.patient.prenom} ${L.patient.nom}`:"Patient inconnu"}),s.jsx("div",{className:"text-sm text-gray-500",children:((he=L.patient)==null?void 0:he.cin)||"CIN non disponible"})]})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[s.jsx(Te,{className:"h-4 w-4 mr-2 text-gray-400"}),se(L.date_rendez_vous)]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[s.jsx(qe,{className:"h-4 w-4 mr-2 text-gray-400"}),L.heure]})]}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"text-sm text-gray-900 max-w-xs truncate",children:L.motif})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${F(L.statut)}`,children:ee(L.statut)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:L.medecin?`Dr. ${L.medecin.nom}`:"Médecin inconnu"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[s.jsx("button",{onClick:xe=>{xe.stopPropagation(),P(`/rendez-vous/${ce}`)},className:"text-blue-600 hover:text-blue-900 p-1 rounded-full hover:bg-blue-50 transition-colors",title:"Voir les détails",children:s.jsx(kr,{className:"h-4 w-4"})}),s.jsx("button",{onClick:xe=>{xe.stopPropagation(),P(`/rendez-vous/${ce}/modifier`)},className:"text-green-600 hover:text-green-900 p-1 rounded-full hover:bg-green-50 transition-colors",title:"Modifier le rendez-vous",children:s.jsx(wr,{className:"h-4 w-4"})}),s.jsx("button",{onClick:xe=>{xe.stopPropagation(),P(`/patients/id/${L.patient_id}`)},className:"text-purple-600 hover:text-purple-900 p-1 rounded-full hover:bg-purple-50 transition-colors",title:"Voir le patient",children:s.jsx(vm,{className:"h-4 w-4"})}),s.jsx("button",{onClick:xe=>{xe.stopPropagation(),Y(L)},className:"text-red-600 hover:text-red-900 p-1 rounded-full hover:bg-red-50 transition-colors",title:"Supprimer le rendez-vous",disabled:C===ce,children:C===ce?s.jsx(pt,{size:"sm"}):s.jsx(Pt,{className:"h-4 w-4"})})]})})]},ce||`rdv-${G}`)})})]})})})]})},hN=({src:e,alt:t,className:r="",fallback:n})=>{const[i,a]=g.useState(""),[l,o]=g.useState(!0),[c,u]=g.useState(!1),m="http://192.168.1.114:8000";return g.useEffect(()=>(e&&(async()=>{try{o(!0),u(!1),console.log("📸 Chargement image authentifiée:",e);const f=e.startsWith("http")?e:`${m}${e}`;console.log("📸 URL complète:",f);const j=await fetch(f,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(console.log("📸 Statut de la réponse:",j.status),!j.ok){console.error("❌ Erreur serveur image:",j.status,j.statusText);const w=await j.text().catch(()=>"Erreur inconnue");throw console.error("❌ Détail erreur:",w),new Error(`HTTP ${j.status}: ${w}`)}const y=await j.blob(),b=URL.createObjectURL(y);console.log("✅ Image chargée avec succès, taille blob:",y.size,"bytes"),a(b)}catch(f){console.error("❌ Erreur chargement image:",f),u(!0)}finally{o(!1)}})(),()=>{i&&i.startsWith("blob:")&&URL.revokeObjectURL(i)}),[e]),l?s.jsx("div",{className:`${r} flex items-center justify-center bg-gray-100 rounded-lg`,children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto mb-2"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Chargement..."})]})}):c||!i?n||s.jsx("div",{className:`${r} flex items-center justify-center bg-gray-100 rounded-lg`,children:s.jsxs("div",{className:"text-center",children:[s.jsx(fs,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Photo indisponible"})]})}):s.jsx("img",{src:i,alt:t,className:r,onError:()=>{console.error("❌ Erreur affichage image"),u(!0)},onLoad:()=>{console.log("✅ Image affichée avec succès dans le DOM")}})},pN=({isOpen:e,onClose:t,patientId:r,patientName:n})=>{const[i,a]=g.useState(null),[l,o]=g.useState(!1),[c,u]=g.useState(null),m="http://192.168.1.114:8000",h=async()=>{try{o(!0),u(null);const y=localStorage.getItem("access_token");if(console.log("Debug token:",y?"PRÉSENT":"ABSENT"),!y)throw new Error("Session expirée, veuillez vous reconnecter");const b=await fetch(`${m}/api/ai/patient-summary/${r}`,{method:"POST",headers:{Authorization:`Bearer ${y}`,"Content-Type":"application/json"}});if(console.log("Réponse API:",b.status,b.statusText),!b.ok){const x=await b.json().catch(()=>({}));throw b.status===401?(localStorage.removeItem("access_token"),new Error("Session expirée, veuillez vous reconnecter")):new Error(x.detail||`Erreur ${b.status}: ${b.statusText}`)}const w=await b.json();console.log("Résumé généré avec succès"),a(w)}catch(y){console.error("Erreur génération résumé:",y),u(y.message||"Erreur lors de la génération du résumé")}finally{o(!1)}},f=()=>{if(i){const y=window.open("","_blank");y&&(y.document.write(`
          <html>
            <head>
              <title>Résumé Patient - ${i.patient_nom}</title>
              <style>
                body { font-family: Arial, sans-serif; margin: 20px; }
                h1, h2, h3 { color: #2563eb; }
                .header { border-bottom: 2px solid #2563eb; margin-bottom: 20px; padding-bottom: 10px; }
                .stats { background: #f3f4f6; padding: 15px; border-radius: 8px; margin: 20px 0; }
                .content { line-height: 1.6; }
              </style>
            </head>
            <body>
              <div class="header">
                <h1>Résumé Patient - ${i.patient_nom}</h1>
                <p>Généré le ${new Date(i.generated_at).toLocaleDateString("fr-FR")} par ${i.medecin_nom}</p>
              </div>
              <div class="stats">
                <p><strong>Consultations:</strong> ${i.statistics.nb_consultations} | <strong>Rendez-vous:</strong> ${i.statistics.nb_rendez_vous}</p>
                <p><strong>Période de suivi:</strong> ${i.statistics.periode_suivi.premiere_consultation} - ${i.statistics.periode_suivi.derniere_consultation}</p>
              </div>
              <div class="content">
                ${i.resume_content.replace(/\n/g,"<br>").replace(/## /g,"<h2>").replace(/<h2>/g,"</p><h2>").replace(/<\/h2>/g,"</h2><p>").replace(/- /g,"<br>• ")}
              </div>
            </body>
          </html>
        `),y.document.close(),y.print())}},j=y=>y.replace(/## (.*$)/gm,'<h2 class="text-xl font-semibold text-blue-600 mt-6 mb-3">$1</h2>').replace(/### (.*$)/gm,'<h3 class="text-lg font-medium text-gray-800 mt-4 mb-2">$1</h3>').replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/- (.*$)/gm,'<div class="ml-4 mb-1">• $1</div>').replace(/\n\n/g,'</p><p class="mb-3">').replace(/\n/g,"<br>");return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between bg-gradient-to-r from-blue-50 to-purple-50 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center mr-3",children:s.jsx(zt,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Résumé Intelligent IA"}),s.jsx("p",{className:"text-sm text-gray-600",children:n})]})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Yt,{className:"w-6 h-6"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto min-h-0",children:s.jsxs("div",{className:"p-6",children:[!i&&!l&&!c&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-100 to-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(zt,{className:"w-8 h-8 text-blue-600"})}),s.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Générer un résumé intelligent"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"L'IA analysera l'historique médical complet du patient pour créer un résumé structuré et des recommandations cliniques."}),s.jsx("button",{onClick:h,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-sm",children:"Générer le résumé IA"})]}),l&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Génération en cours..."}),s.jsx("p",{className:"text-gray-600",children:"L'IA analyse l'historique médical du patient"})]}),c&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Yt,{className:"w-8 h-8 text-red-600"})}),s.jsx("h4",{className:"text-lg font-medium text-red-900 mb-2",children:"Erreur de génération"}),s.jsx("p",{className:"text-red-600 mb-6",children:c}),s.jsx("button",{onClick:h,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Réessayer"})]}),i&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.statistics.nb_consultations}),s.jsx("div",{className:"text-sm text-gray-600",children:"Consultations"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:i.statistics.nb_rendez_vous}),s.jsx("div",{className:"text-sm text-gray-600",children:"Rendez-vous"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Suivi depuis"}),s.jsx("div",{className:"text-sm text-gray-600",children:i.statistics.periode_suivi.premiere_consultation})]})]})}),s.jsxs("div",{className:"flex items-center text-sm text-gray-500 pb-4 border-b border-gray-200",children:[s.jsx(qe,{className:"w-4 h-4 mr-2"}),"Généré le"," ",new Date(i.generated_at).toLocaleDateString("fr-FR")," ","à"," ",new Date(i.generated_at).toLocaleTimeString("fr-FR"),s.jsx(qt,{className:"w-4 h-4 ml-4 mr-2"}),"par ",i.medecin_nom]}),s.jsx("div",{className:"prose prose-sm max-w-none",children:s.jsx("div",{className:"space-y-4 text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:j(i.resume_content)}})})]})]})}),i&&s.jsxs("div",{className:"p-6 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3 flex-shrink-0",children:[s.jsxs("button",{onClick:f,className:"flex items-center px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:[s.jsx(iw,{className:"w-4 h-4 mr-2"}),"Imprimer"]}),s.jsx("button",{onClick:t,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Fermer"})]})]})}):null},xN=()=>{const{id:e}=Ln(),t=it(),{user:r}=mt(),[n,i]=g.useState(null),[a,l]=g.useState([]),[o,c]=g.useState([]),[u,m]=g.useState([]),[h,f]=g.useState(!0),[j,y]=g.useState(null),[b,w]=g.useState(null),[x,d]=g.useState(null),[p,N]=g.useState(!1),C="http://192.168.1.114:8000",z=async()=>{var O,H;const U=(r==null?void 0:r._id)||(r==null?void 0:r.id),W=r==null?void 0:r.role;if(console.log("🎯 Détermination du médecin cible:",{userId:U,userRole:W}),W==="medecin")return console.log("👨‍⚕️ Utilisateur est médecin, ID:",U),U;if(W==="secretaire")try{const J=await fetch(`${C}/users/${U}`);if(!J.ok)throw new Error(`HTTP error! status: ${J.status}`);const X=await J.json(),ne=X.medecin_id||((O=X.medecin)==null?void 0:O.id)||((H=X.medecin)==null?void 0:H._id);return console.log("👩‍💼 Secrétaire - médecin associé ID:",ne),ne||(console.error("❌ Aucun médecin associé trouvé pour la secrétaire"),null)}catch(J){return console.error("❌ Erreur lors de la récupération du médecin associé:",J),null}return console.log("⚠️ Rôle utilisateur non reconnu:",W),null};g.useEffect(()=>{console.log("🔍 ID patient depuis URL:",e),console.log("🔍 URL actuelle:",window.location.pathname)},[e]),g.useEffect(()=>{(async()=>{var W,O,H,J;if(!e){console.error("❌ ID patient manquant dans l'URL"),y("ID patient manquant dans l'URL"),f(!1);return}try{f(!0),y(null);const X=await z();if(!X){y("Impossible de déterminer le médecin associé");return}d(X),console.log("🩺 Médecin cible ID:",X),console.log("📋 Chargement patient ID:",e),console.log("1️⃣ Chargement des données du patient...");let ne;try{ne=await Ge.getById(e),console.log("✅ Patient chargé avec succès:",ne),console.log("📸 Debug photo du patient:"),console.log("📸 - photo_url:",ne.photo_url),console.log("📸 - photo_file_id:",ne.photo_file_id),console.log("📸 - photo_data:",ne.photo_data?"PRÉSENT":"ABSENT")}catch(A){throw console.error("❌ Erreur lors du chargement du patient:",A),new Error(`Erreur patient: ${A.message} (Status: ${(W=A.response)==null?void 0:W.status})`)}console.log("2️⃣ Chargement des consultations...");let re;try{re=await Ge.getPatientConsultations(e),console.log("✅ Consultations chargées:",re)}catch(A){console.warn("⚠️ Erreur consultations (non bloquante):",A.message),re=[]}console.log("3️⃣ Chargement des rendez-vous...");let me;try{me=await Ge.getPatientAppointments(e),console.log("✅ RDV chargés:",me)}catch(A){console.warn("⚠️ Erreur RDV (non bloquante):",A.message),me=[]}m([]);const se=re.filter(A=>{if(!A.medecin_id||A.medecin_id==="default_medecin_id")return!1;const Y=A.medecin_id===X;return Y&&console.log(`✅ Consultation ${A.id} appartient au médecin cible`),Y}),F=me.filter(A=>{const Y=A.medecin_id===X;return Y&&console.log(`✅ RDV ${A.id} appartient au médecin cible`),Y}),ee=se.map(A=>({...A,medecin_nom:(r==null?void 0:r.role)==="medecin"?(r==null?void 0:r.nom)||"Vous":"Médecin associé"})),ie=F.map(A=>({...A,medecin_nom:(r==null?void 0:r.role)==="medecin"?(r==null?void 0:r.nom)||"Vous":"Médecin associé"}));console.log(`✅ Consultations filtrées: ${ee.length} sur ${re.length}`),console.log(`✅ RDV filtrés: ${ie.length} sur ${me.length}`),i(ne),l(ee),c(ie),console.log("🎉 Toutes les données chargées avec succès !")}catch(X){console.error("❌ Erreur chargement patient:",X);let ne=X.message||"Erreur lors du chargement des données du patient";((O=X.response)==null?void 0:O.status)===403?ne="Accès refusé : vous n'avez pas les autorisations pour voir ce patient":((H=X.response)==null?void 0:H.status)===404?ne="Patient non trouvé":((J=X.response)==null?void 0:J.status)===401&&(ne="Session expirée, veuillez vous reconnecter"),y(ne)}finally{f(!1)}})()},[e,r]);const E=U=>{t(`/consultations/${U}`)},D=U=>{t(`/consultations/${U}/modifier`)},P=U=>{t(`/rendez-vous/${U}`)},S=U=>{t(`/rendez-vous/${U}/modifier`)},M=async U=>{try{l(W=>W.filter(O=>O.id!==U)),w(null)}catch(W){console.error("Erreur lors de la suppression de la consultation:",W)}},R=async U=>{try{c(W=>W.filter(O=>O.id!==U)),w(null)}catch(W){console.error("Erreur lors de la suppression du rendez-vous:",W)}},B=U=>new Date(U).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}),te=(r==null?void 0:r.role)==="medecin";return h?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Chargement des données du patient..."})]})}):j||!n?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600 mb-4",children:j||"Patient non trouvé"}),s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4 mb-4 max-w-md",children:[s.jsx("h3",{className:"text-sm font-medium text-yellow-800 mb-2",children:"Informations de debug :"}),s.jsxs("ul",{className:"text-xs text-yellow-700 space-y-1 text-left",children:[s.jsxs("li",{children:["ID depuis URL : ",e||"undefined"]}),s.jsxs("li",{children:["URL actuelle : ",window.location.pathname]}),s.jsxs("li",{children:["Erreur : ",j]})]})]}),s.jsx("button",{onClick:()=>t(-1),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Retour"})]})}):s.jsxs("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:[s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("button",{onClick:()=>t(-1),className:"flex items-center text-gray-600 hover:text-gray-800 mb-4 transition-colors",children:[s.jsx(hn,{className:"w-5 h-5 mr-2"}),"Retour"]}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Détails du Patient"}),s.jsx("p",{className:"text-gray-600 mt-2",children:(r==null?void 0:r.role)==="medecin"?`Consultations et rendez-vous avec Dr. ${r==null?void 0:r.nom}`:"Informations patient et rendez-vous du médecin associé"})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:s.jsxs("div",{className:"flex flex-col lg:flex-row items-start mb-6",children:[s.jsx("div",{className:"flex-shrink-0 mb-6 lg:mb-0 lg:mr-8",children:s.jsx("div",{className:"w-32 h-32 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center bg-gray-50 relative",children:n.photo_url?s.jsxs(s.Fragment,{children:[s.jsx(hN,{src:n.photo_url,alt:`Photo de ${n.nom} ${n.prenom}`,className:"w-28 h-28 object-cover rounded-lg",fallback:s.jsxs("div",{className:"text-center",children:[s.jsx(fs,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Photo indisponible"})]})}),s.jsx("div",{className:"absolute bottom-0 right-0 bg-blue-600 text-white rounded-full p-1",children:s.jsx(fs,{className:"w-3 h-3"})})]}):s.jsxs("div",{className:"text-center",children:[s.jsx(fs,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Aucune photo"})]})})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mr-4",children:s.jsx(qt,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-semibold text-gray-900",children:[n.nom," ",n.prenom]}),s.jsxs("p",{className:"text-gray-600",children:["CIN N° ",n.cin]})]})]}),s.jsxs("button",{onClick:()=>t(`/patients/id/${e}/modifier`),className:"flex items-center px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:[s.jsx(wr,{className:"w-4 h-4 mr-2"}),"Modifier"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Date de naissance"}),s.jsx("p",{className:"text-gray-900",children:B(n.date_naissance)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Sexe"}),s.jsx("p",{className:"text-gray-900",children:n.genre==="M"?"Masculin":"Féminin"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Téléphone"}),s.jsx("p",{className:"text-gray-900",children:n.telephone||"Non renseigné"})]})]}),(n.email||n.adresse)&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4 pt-4 border-t border-gray-200",children:[n.email&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Email"}),s.jsx("p",{className:"text-gray-900",children:n.email})]}),n.adresse&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Adresse"}),s.jsx("p",{className:"text-gray-900 whitespace-pre-line",children:n.adresse})]})]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[te&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>t(`/patients/id/${e}/consultation`),className:"flex items-center justify-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-sm",children:[s.jsx(Vr,{className:"w-5 h-5 mr-2"}),"Nouvelle consultation"]}),s.jsxs("button",{onClick:()=>N(!0),disabled:a.length===0,className:"flex items-center justify-center px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:from-purple-700 hover:to-indigo-700 disabled:from-gray-400 disabled:to-gray-400 disabled:cursor-not-allowed transition-all duration-200 shadow-sm",title:a.length===0?"Aucune consultation disponible pour générer un résumé":"Générer un résumé intelligent avec l'IA",children:[s.jsx(zt,{className:"w-5 h-5 mr-2"}),"Résumé IA"]})]}),s.jsxs("button",{onClick:()=>t(`/rendez-vous/nouveau?patient=${e}`),className:"flex items-center justify-center px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors shadow-sm",children:[s.jsx(Vr,{className:"w-5 h-5 mr-2"}),"Nouveau RDV"]}),s.jsxs("button",{onClick:()=>t(`/patients/id/${e}/modifier`),className:"flex items-center justify-center px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors shadow-sm",children:[s.jsx(wr,{className:"w-5 h-5 mr-2"}),"Modifier patient"]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mb-8",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(zt,{className:"w-6 h-6 text-blue-600 mr-3"}),s.jsxs("h3",{className:"text-xl font-semibold text-gray-900",children:[(r==null?void 0:r.role)==="medecin"?"Mes Consultations":"Consultations"," ","(",a.length,")"]})]}),(r==null?void 0:r.role)==="secretaire"&&a.length>0&&s.jsx("div",{className:"text-sm text-blue-600 bg-blue-50 px-3 py-1 rounded-full",children:"Aperçu uniquement"})]})}),a.length===0?s.jsxs("div",{className:"p-12 text-center text-gray-500",children:[s.jsx(zt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h4",{className:"text-lg font-medium text-gray-400 mb-2",children:"Aucune consultation"}),s.jsx("p",{className:"text-sm",children:(r==null?void 0:r.role)==="medecin"?"Aucune consultation enregistrée avec ce patient":"Aucune consultation du médecin associé avec ce patient"}),(r==null?void 0:r.role)==="medecin"&&s.jsx("p",{className:"text-sm",children:"Créez une nouvelle consultation pour commencer."})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Diagnostic"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Médecin"}),te&&s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map((U,W)=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:B(U.date_consultation)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.jsx("div",{className:"max-w-xs",children:s.jsx("p",{className:"truncate",title:U.diagnostic,children:U.diagnostic})})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["Dr. ",U.medecin_nom]}),te&&s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[s.jsx("button",{onClick:()=>E(U.id),className:"text-blue-600 hover:text-blue-900 p-1 rounded-full hover:bg-blue-50 transition-colors",title:"Voir les détails",children:s.jsx(kr,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>D(U.id),className:"text-green-600 hover:text-green-900 p-1 rounded-full hover:bg-green-50 transition-colors",title:"Modifier la consultation",children:s.jsx(wr,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>w({type:"consultation",id:U.id}),className:"text-red-600 hover:text-red-900 p-1 rounded-full hover:bg-red-50 transition-colors",title:"Supprimer la consultation",children:s.jsx(Pt,{className:"h-4 w-4"})})]})})]},U.id||`consultation-${W}`))})]})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(qe,{className:"w-6 h-6 text-green-600 mr-3"}),s.jsxs("h3",{className:"text-xl font-semibold text-gray-900",children:[(r==null?void 0:r.role)==="medecin"?"Mes Rendez-vous":"Rendez-vous"," ","(",o.length,")"]})]})})}),o.length===0?s.jsxs("div",{className:"p-12 text-center text-gray-500",children:[s.jsx(qe,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h4",{className:"text-lg font-medium text-gray-400 mb-2",children:"Aucun rendez-vous"}),s.jsx("p",{className:"text-sm",children:(r==null?void 0:r.role)==="medecin"?"Aucun rendez-vous planifié avec ce patient":"Aucun rendez-vous du médecin associé avec ce patient"}),(r==null?void 0:r.role)==="medecin"&&s.jsx("p",{className:"text-sm",children:"Planifiez un nouveau rendez-vous."})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Heure"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Motif"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Médecin"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map((U,W)=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:B(U.date_rendez_vous)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:U.heure}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.jsx("div",{className:"max-w-xs",children:s.jsx("p",{className:"truncate",title:U.motif,children:U.motif})})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["Dr. ",U.medecin_nom]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${U.statut==="confirme"||U.statut==="confirmé"?"bg-green-100 text-green-800":U.statut==="programme"||U.statut==="en_attente"?"bg-yellow-100 text-yellow-800":U.statut==="annule"||U.statut==="annulé"?"bg-red-100 text-red-800":U.statut==="termine"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:[(U.statut==="confirme"||U.statut==="confirmé")&&"Confirmé",(U.statut==="programme"||U.statut==="en_attente")&&"Programmé",(U.statut==="annule"||U.statut==="annulé")&&"Annulé",U.statut==="termine"&&"Terminé",!U.statut&&"Non défini"]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[s.jsx("button",{onClick:()=>P(U.id),className:"text-blue-600 hover:text-blue-900 p-1 rounded-full hover:bg-blue-50 transition-colors",title:"Voir les détails",children:s.jsx(kr,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>S(U.id),className:"text-green-600 hover:text-green-900 p-1 rounded-full hover:bg-green-50 transition-colors",title:"Modifier le rendez-vous",children:s.jsx(wr,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>w({type:"appointment",id:U.id}),className:"text-red-600 hover:text-red-900 p-1 rounded-full hover:bg-red-50 transition-colors",title:"Supprimer le rendez-vous",children:s.jsx(Pt,{className:"h-4 w-4"})})]})})]},U.id||`appointment-${W}`))})]})})]})]}),b&&te&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsx("div",{className:"bg-white rounded-lg max-w-md w-full",children:s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"flex items-center mb-4",children:s.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:s.jsx(Pt,{className:"h-6 w-6 text-red-600"})})}),s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Confirmer la suppression"}),s.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Êtes-vous sûr de vouloir supprimer cette"," ",b.type==="consultation"?"consultation":"rendez-vous"," ","? Cette action est irréversible."]}),s.jsxs("div",{className:"flex space-x-3 justify-center",children:[s.jsx("button",{onClick:()=>w(null),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Annuler"}),s.jsx("button",{onClick:()=>{b.type==="consultation"?M(b.id):R(b.id)},className:"px-4 py-2 bg-red-600 border border-transparent rounded-md text-sm font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Supprimer"})]})]})]})})}),s.jsx(pN,{isOpen:p,onClose:()=>N(!1),patientId:e,patientName:`${n.nom} ${n.prenom}`})]})},gN=({isOpen:e,onClose:t,patientInfo:r,motif:n,symptomes:i,onSelectDiagnostic:a})=>{const[l,o]=g.useState(!1),[c,u]=g.useState(null),[m,h]=g.useState(null),f=async()=>{if(!n.trim()||!i.trim()){h("Veuillez renseigner le motif et les symptômes avant d'utiliser l'assistant IA");return}try{o(!0),h(null);const w=await fetch("http://192.168.1.114:8000/api/ai/diagnostic",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patient_info:{date_naissance:r==null?void 0:r.date_naissance,sexe:r==null?void 0:r.sexe},motif:n,symptomes:i})});if(!w.ok){const d=await w.json();throw new Error(d.detail||"Erreur lors de la génération des suggestions")}const x=await w.json();u(x)}catch(w){console.error("❌ Erreur IA:",w),h(w.message||"Erreur lors de l'analyse IA")}finally{o(!1)}},j=w=>{const x=`${w.nom}

Probabilité: ${w.probabilite}%
${w.explication}

Examens recommandés: ${w.examens_recommandes.join(", ")}`;a(x),t()},y=w=>{switch(w==null?void 0:w.toLowerCase()){case"élevé":case"eleve":return"text-red-600 bg-red-50 border-red-200";case"modéré":case"modere":return"text-orange-600 bg-orange-50 border-orange-200";case"faible":return"text-green-600 bg-green-50 border-green-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},b=w=>w>=80?"text-red-600 bg-red-50":w>=60?"text-orange-600 bg-orange-50":w>=40?"text-yellow-600 bg-yellow-50":"text-gray-600 bg-gray-50";return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-purple-50",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:s.jsx(Mr,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Assistant IA de Diagnostic"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Suggestions basées sur l'intelligence artificielle"})]})]}),s.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:s.jsx(Yt,{className:"w-5 h-5 text-gray-500"})})]}),s.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Données analysées :"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Motif :"}),s.jsx("p",{className:"text-gray-600 mt-1",children:n||"Non renseigné"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Patient :"}),s.jsx("p",{className:"text-gray-600 mt-1",children:r?`${r.prenom} ${r.nom}`:"Information manquante"})]})]}),s.jsxs("div",{className:"mt-3",children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Symptômes :"}),s.jsx("p",{className:"text-gray-600 mt-1",children:i||"Non renseignés"})]})]}),!c&&!l&&s.jsxs("div",{className:"text-center",children:[s.jsxs("button",{onClick:f,disabled:!n.trim()||!i.trim(),className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors shadow-sm",children:[s.jsx(Mr,{className:"w-5 h-5 mr-2"}),"Analyser avec l'IA"]}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"L'IA analysera les symptômes pour proposer des diagnostics différentiels"})]}),l&&s.jsx("div",{className:"text-center py-8",children:s.jsxs("div",{className:"inline-flex items-center",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mr-3"}),s.jsx("span",{className:"text-gray-600",children:"Analyse en cours avec l'IA..."})]})}),m&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ns,{className:"w-5 h-5 text-red-600 mr-2"}),s.jsx("span",{className:"text-red-700 font-medium",children:"Erreur"})]}),s.jsx("p",{className:"text-red-600 mt-1",children:m}),s.jsx("button",{onClick:()=>h(null),className:"mt-3 px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors",children:"Réessayer"})]}),c&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:`rounded-lg p-4 border ${y(c.niveau_urgence)}`,children:s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx(qe,{className:"w-5 h-5 mr-2"}),s.jsxs("span",{className:"font-medium",children:["Niveau d'urgence : ",c.niveau_urgence]})]})}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(Ei,{className:"w-5 h-5 mr-2"}),"Diagnostics différentiels suggérés"]}),s.jsx("div",{className:"space-y-4",children:c.diagnostics.map((w,x)=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>j(w),children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:w.nom}),s.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${b(w.probabilite)}`,children:[w.probabilite,"%"]})]}),s.jsx("p",{className:"text-gray-600 text-sm mb-3",children:w.explication}),w.examens_recommandes.length>0&&s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Examens recommandés :"}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:w.examens_recommandes.map((d,p)=>s.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full",children:d},p))})]}),s.jsx("div",{className:"flex items-center justify-end mt-3 pt-3 border-t border-gray-100",children:s.jsxs("button",{className:"flex items-center text-blue-600 hover:text-blue-700 text-sm font-medium",children:[s.jsx(ut,{className:"w-4 h-4 mr-1"}),"Sélectionner ce diagnostic"]})})]},x))})]}),c.recommandations_generales&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Recommandations générales"}),s.jsx("p",{className:"text-blue-800 text-sm",children:c.recommandations_generales})]}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(Ns,{className:"w-5 h-5 text-yellow-600 mr-2 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-yellow-800 mb-1",children:"Avertissement médical"}),s.jsx("p",{className:"text-yellow-700 text-sm",children:"Ces suggestions sont générées par IA et ne remplacent en aucun cas le jugement médical professionnel. Toujours valider et adapter selon votre expertise clinique et l'examen du patient."})]})]})})]})]}),s.jsx("div",{className:"border-t border-gray-200 p-4 bg-gray-50 flex justify-end",children:s.jsx("button",{onClick:t,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"Fermer"})})]})}):null},Gm=()=>{var me;const{id:e}=Ln(),t=it(),r=Ot(),{user:n}=mt(),a=new URLSearchParams(r.search).get("patient"),l=(me=r.state)==null?void 0:me.patientId,[o,c]=g.useState(!1),[u,m]=g.useState(null),[h,f]=g.useState([]),[j,y]=g.useState(""),[b,w]=g.useState(""),[x,d]=g.useState([]),[p,N]=g.useState(null),[C,z]=g.useState(!1),E=!!e,D=!!(a||l),P=e||a||l;console.log("🔍 DEBUG CONSULTATION PARAMS:",{id:e,patientFromUrl:a,patientFromState:l,finalPatientId:P,isFromPatientDetails:E,hasPatientParam:D,currentUrl:r.pathname+r.search,locationState:r.state});const[S,M]=g.useState({date_consultation:new Date().toISOString().split("T")[0],motif:"",diagnostic:"",symptomes:"",traitement:"",notes:""});g.useEffect(()=>{if(!b.trim())d(h);else{const se=h.filter(F=>{var Y;const ee=`${F.prenom} ${F.nom}`.toLowerCase(),ie=((Y=F.cin)==null?void 0:Y.toLowerCase())||"",A=b.toLowerCase();return ee.includes(A)||ie.includes(A)});d(se)}},[h,b]),g.useEffect(()=>{(async()=>{const F=await R();if(P&&(console.log("🎯 Patient ID détecté:",P),y(P),F.length>0)){const ee=F.find(ie=>ie.id===P);ee?(N(ee),console.log("✅ Patient pré-sélectionné:",ee)):console.log("⚠️ Patient non trouvé dans la liste:",P)}})()},[P]),g.useEffect(()=>{if(j&&h.length>0){console.log("🔍 Recherche patient dans liste:",{selectedPatient:j,totalPatients:h.length});const se=h.find(F=>F.id===j);N(se||null),se?console.log("✅ Patient sélectionné trouvé:",se):console.log("❌ Patient sélectionné NON trouvé dans la liste")}},[j,h]);const R=async()=>{try{console.log("🔄 Chargement des patients...");const se=await Ge.getAll(1,200);return f(se.items),d(se.items),console.log("✅ Patients chargés:",se.items.length),se.items}catch(se){return console.error("❌ Erreur lors du chargement des patients:",se),m("Impossible de charger la liste des patients"),[]}},B=se=>{const{name:F,value:ee}=se.target;M(ie=>({...ie,[F]:ee}))},te=se=>{const F=se.target.value;y(F),w("")},U=se=>{w(se.target.value)},W=se=>{y(se),w("")},O=se=>{M(F=>({...F,diagnostic:se})),z(!1)},H=()=>{if(!S.motif.trim()||!S.symptomes.trim()){m("Veuillez renseigner le motif et les symptômes avant d'utiliser l'assistant IA");return}m(null),z(!0)},J=async se=>{if(se.preventDefault(),!j){m("Veuillez sélectionner un patient");return}const F=(n==null?void 0:n._id)||(n==null?void 0:n.id);if(!F){console.error("❌ Aucun médecin connecté trouvé"),m("Erreur: Aucun médecin connecté");return}console.log("👨‍⚕️ DEBUG CREATION CONSULTATION:"),console.log("- User connecté:",n),console.log("- ID du médecin utilisé:",F),console.log("- Patient sélectionné:",j),console.log("- Patient info:",p);try{c(!0),m(null);const ee={patient_id:j,medecin_id:F,date_consultation:S.date_consultation,motif:S.motif,symptomes:S.symptomes,diagnostic:S.diagnostic||void 0,traitement:S.traitement||void 0,notes:S.notes||void 0,medecin:void 0,patient:void 0};console.log("📤 Données à envoyer:",ee),await js.create(ee),t(E&&e?`/patients/id/${e}`:D?"/rendez-vous":"/consultations")}catch(ee){console.error("❌ Erreur lors de la création de la consultation:",ee),m("Erreur lors de l'enregistrement de la consultation")}finally{c(!1)}},X=S.date_consultation&&S.motif&&S.symptomes&&S.diagnostic&&j,ne=()=>E&&e?`/patients/id/${e}`:D?"/rendez-vous":"/consultations",re=()=>E?"Retour aux détails du patient":D?"Retour aux rendez-vous":"Retour aux consultations";return s.jsxs("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:[s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("button",{onClick:()=>t(ne()),className:"flex items-center text-gray-600 hover:text-gray-800 mb-4 transition-colors",children:[s.jsx(hn,{className:"w-5 h-5 mr-2"}),re()]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mr-4",children:s.jsx(zt,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Ajouter une consultation"}),p&&s.jsxs("p",{className:"text-gray-600 mt-1",children:["Patient: ",p.prenom," ",p.nom," (",p.cin,")"]})]})]})]}),u&&s.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:u}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:s.jsxs("form",{onSubmit:J,className:"space-y-6",children:[P?s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(qt,{className:"w-5 h-5 text-blue-600 mr-2"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Patient sélectionné:"}),p?s.jsxs("div",{className:"text-blue-700",children:[p.prenom," ",p.nom," (",p.cin,")"]}):s.jsx("div",{className:"text-blue-700",children:"Chargement des informations..."})]})]}),s.jsx("button",{type:"button",onClick:()=>{y(""),N(null)},className:"mt-2 text-sm text-blue-600 hover:text-blue-800 underline",children:"Changer de patient"})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Patient *"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx($n,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",placeholder:"Rechercher par nom ou CIN...",value:b,onChange:U,className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})]}),b&&s.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-200 rounded-lg",children:x.length>0?x.map(se=>s.jsxs("button",{type:"button",onClick:()=>W(se.id),className:"w-full text-left px-4 py-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0 transition-colors",children:[s.jsxs("div",{className:"font-medium text-gray-900",children:[se.prenom," ",se.nom]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["CIN: ",se.cin]})]},se.id)):s.jsx("div",{className:"px-4 py-3 text-gray-500 text-center",children:"Aucun patient trouvé"})}),!b&&s.jsxs("select",{value:j,onChange:te,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",children:[s.jsx("option",{value:"",children:"Sélectionner un patient"}),h.map(se=>s.jsxs("option",{value:se.id,children:[se.prenom," ",se.nom," - ",se.cin]},se.id))]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"date_consultation",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de consultation *"}),s.jsx("input",{type:"date",id:"date_consultation",name:"date_consultation",value:S.date_consultation,onChange:B,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"motif",className:"block text-sm font-medium text-gray-700 mb-2",children:"Motif de consultation *"}),s.jsx("input",{type:"text",id:"motif",name:"motif",value:S.motif,onChange:B,placeholder:"Décrivez le motif de la consultation",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"symptomes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Symptômes *"}),s.jsx("textarea",{id:"symptomes",name:"symptomes",value:S.symptomes,onChange:B,placeholder:"Décrivez les symptômes observés",required:!0,rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors resize-vertical"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{htmlFor:"diagnostic",className:"block text-sm font-medium text-gray-700",children:"Diagnostic *"}),s.jsxs("button",{type:"button",onClick:H,disabled:!S.motif.trim()||!S.symptomes.trim(),className:"inline-flex items-center px-3 py-1.5 bg-gradient-to-r from-purple-600 to-blue-600 text-white text-sm rounded-lg hover:from-purple-700 hover:to-blue-700 disabled:from-gray-400 disabled:to-gray-400 disabled:cursor-not-allowed transition-all duration-200 shadow-sm",title:!S.motif.trim()||!S.symptomes.trim()?"Renseignez d'abord le motif et les symptômes":"Obtenir des suggestions de diagnostic IA",children:[s.jsx(Mr,{className:"w-4 h-4 mr-1.5"}),"Assistant IA"]})]}),s.jsx("textarea",{id:"diagnostic",name:"diagnostic",value:S.diagnostic,onChange:B,placeholder:"Saisissez le diagnostic ou utilisez l'assistant IA pour obtenir des suggestions",required:!0,rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors resize-vertical"}),S.diagnostic.includes("Probabilité:")&&s.jsxs("div",{className:"mt-2 flex items-center text-sm text-purple-600",children:[s.jsx(Mr,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:"Diagnostic suggéré par l'IA - Validez et adaptez selon votre expertise"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"traitement",className:"block text-sm font-medium text-gray-700 mb-2",children:"Traitements prescrits"}),s.jsx("textarea",{id:"traitement",name:"traitement",value:S.traitement,onChange:B,placeholder:"Listez les traitements prescrits",rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors resize-vertical"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes complémentaires"}),s.jsx("textarea",{id:"notes",name:"notes",value:S.notes,onChange:B,placeholder:"Ajoutez des notes supplémentaires si nécessaire",rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors resize-vertical"})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6",children:[s.jsxs("button",{type:"submit",disabled:!X||o,className:"flex items-center justify-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors shadow-sm",children:[o?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):s.jsx(In,{className:"w-5 h-5 mr-2"}),o?"Enregistrement...":"Enregistrer la consultation"]}),s.jsx("button",{type:"button",onClick:()=>t(ne()),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"})]})]})}),s.jsx("div",{className:"mt-4 text-sm text-gray-500",children:"* Champs obligatoires"}),s.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0",children:"ℹ️"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"Informations sur la consultation"}),s.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[s.jsx("li",{children:"• Tous les champs marqués d'un astérisque (*) sont obligatoires"}),s.jsx("li",{children:"• La date peut être antérieure à aujourd'hui pour saisir des consultations passées"}),s.jsx("li",{children:"• Les traitements et notes sont optionnels mais recommandés"}),s.jsx("li",{children:"• L'assistant IA peut vous aider à générer des suggestions de diagnostic basées sur les symptômes"}),P&&s.jsx("li",{children:"• Le patient a été automatiquement sélectionné selon le contexte"})]})]})]})})]}),s.jsx(gN,{isOpen:C,onClose:()=>z(!1),patientInfo:p,motif:S.motif,symptomes:S.symptomes,onSelectDiagnostic:O})]})},yN=({isOpen:e,onClose:t,medecinId:r,dateRendezVous:n,motif:i,onSelectSlot:a,existingSlots:l})=>{const[o,c]=g.useState(!1),[u,m]=g.useState(null),[h,f]=g.useState(null),j=async()=>{if(!n||!i.trim()){f("Veuillez renseigner la date et le motif avant d'utiliser l'assistant IA");return}try{c(!0),f(null);const d=await fetch("http://192.168.1.114:8000/api/planning/suggest-slots",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({medecin_id:r,date_rendez_vous:n,motif:i})});if(!d.ok){const N=await d.json();throw new Error(N.detail||"Erreur lors de la génération des suggestions")}const p=await d.json();m(p)}catch(d){console.error("❌ Erreur Planning IA:",d),f(d.message||"Erreur lors de l'analyse IA de planification")}finally{c(!1)}},y=d=>{a(d.time),fetch("http://192.168.1.114:8000/api/planning/validate-planning",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({medecin_id:r,date:n,selected_slot:d.time})}).catch(console.error),t()},b=d=>{switch(d==null?void 0:d.toLowerCase()){case"leger":return"text-green-600 bg-green-50 border-green-200";case"normal":return"text-blue-600 bg-blue-50 border-blue-200";case"charge":return"text-orange-600 bg-orange-50 border-orange-200";case"surcharge":return"text-red-600 bg-red-50 border-red-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},w=d=>d>=90?"text-green-600 bg-green-100 border-green-300":d>=70?"text-blue-600 bg-blue-100 border-blue-300":d>=50?"text-orange-600 bg-orange-100 border-orange-300":"text-red-600 bg-red-100 border-red-300",x=d=>{switch(d==null?void 0:d.toLowerCase()){case"leger":return"Journée légère";case"normal":return"Charge normale";case"charge":return"Journée chargée";case"surcharge":return"Surcharge détectée";default:return"Évaluation en cours"}};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-5xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-blue-50",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center mr-3",children:s.jsx(Te,{className:"w-6 h-6 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Planification Intelligente"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Optimisation IA des créneaux de rendez-vous"})]})]}),s.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:s.jsx(Yt,{className:"w-5 h-5 text-gray-500"})})]}),s.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[s.jsxs("h3",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[s.jsx(Mr,{className:"w-5 h-5 mr-2"}),"Analyse de la planification :"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Date :"}),s.jsx("p",{className:"text-gray-600 mt-1",children:n||"Non sélectionnée"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Motif :"}),s.jsx("p",{className:"text-gray-600 mt-1",children:i||"Non renseigné"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Créneaux occupés :"}),s.jsxs("p",{className:"text-gray-600 mt-1",children:[l.length," / 44 créneaux"]})]})]})]}),!u&&!o&&s.jsxs("div",{className:"text-center",children:[s.jsxs("button",{onClick:j,disabled:!n||!i.trim(),className:"inline-flex items-center px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors shadow-sm",children:[s.jsx(Te,{className:"w-5 h-5 mr-2"}),"Analyser la planification"]}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"L'IA analysera votre planning pour suggérer les créneaux optimaux"})]}),o&&s.jsx("div",{className:"text-center py-8",children:s.jsxs("div",{className:"inline-flex items-center",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-purple-600 border-t-transparent rounded-full animate-spin mr-3"}),s.jsx("span",{className:"text-gray-600",children:"Analyse de la planification en cours..."})]})}),h&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ns,{className:"w-5 h-5 text-red-600 mr-2"}),s.jsx("span",{className:"text-red-700 font-medium",children:"Erreur"})]}),s.jsx("p",{className:"text-red-600 mt-1",children:h}),s.jsx("button",{onClick:()=>f(null),className:"mt-3 px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors",children:"Réessayer"})]}),u&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:`rounded-lg p-4 border ${b(u.workload_assessment)}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(bc,{className:"w-5 h-5"}),s.jsx("span",{className:"text-xs font-medium",children:"CHARGE"})]}),s.jsx("div",{className:"font-semibold",children:x(u.workload_assessment)})]}),s.jsxs("div",{className:`rounded-lg p-4 border ${w(u.efficiency_score)}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(wc,{className:"w-5 h-5"}),s.jsx("span",{className:"text-xs font-medium",children:"EFFICACITÉ"})]}),s.jsxs("div",{className:"font-semibold",children:[u.efficiency_score,"%"]})]}),s.jsxs("div",{className:"rounded-lg p-4 border border-blue-200 bg-blue-50 text-blue-600",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(qe,{className:"w-5 h-5"}),s.jsx("span",{className:"text-xs font-medium",children:"DURÉE"})]}),s.jsxs("div",{className:"font-semibold",children:[u.estimated_duration," min"]})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(qe,{className:"w-5 h-5 mr-2"}),"Créneaux optimaux recommandés"]}),s.jsx("div",{className:"grid gap-3",children:u.recommended_slots.map((d,p)=>s.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors cursor-pointer group",onClick:()=>y(d),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mr-4",children:s.jsx(qe,{className:"w-6 h-6 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-lg text-gray-900",children:d.time}),s.jsx("p",{className:"text-gray-600 text-sm",children:d.reason})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-medium border ${w(d.score)}`,children:[d.score,"%"]}),s.jsxs("button",{className:"opacity-0 group-hover:opacity-100 flex items-center text-purple-600 hover:text-purple-700 text-sm font-medium transition-opacity",children:[s.jsx(ut,{className:"w-4 h-4 mr-1"}),"Sélectionner"]})]})]})},p))}),u.recommended_slots.length===0&&s.jsxs("div",{className:"text-center py-6 text-gray-500",children:[s.jsx(Te,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),s.jsx("p",{children:"Aucun créneau optimal disponible"}),s.jsx("p",{className:"text-sm",children:"Essayez une autre date ou consultez les conseils d'optimisation"})]})]}),u.ideal_breaks.length>0&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsxs("h4",{className:"font-medium text-blue-900 mb-2 flex items-center",children:[s.jsx(qe,{className:"w-4 h-4 mr-2"}),"Pauses recommandées"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:u.ideal_breaks.map((d,p)=>s.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 text-sm rounded-full",children:d},p))})]}),u.optimization_tips.length>0&&s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[s.jsxs("h4",{className:"font-medium text-green-900 mb-3 flex items-center",children:[s.jsx(bc,{className:"w-4 h-4 mr-2"}),"Conseils d'optimisation"]}),s.jsx("ul",{className:"space-y-2",children:u.optimization_tips.map((d,p)=>s.jsxs("li",{className:"flex items-start text-green-800 text-sm",children:[s.jsx(ut,{className:"w-4 h-4 mr-2 mt-0.5 text-green-600 flex-shrink-0"}),d]},p))})]}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(Ns,{className:"w-5 h-5 text-yellow-600 mr-2 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-yellow-800 mb-1",children:"Avertissement"}),s.jsx("p",{className:"text-yellow-700 text-sm",children:"Ces suggestions sont générées par IA pour optimiser votre planning. Adaptez selon vos contraintes spécifiques et les besoins des patients."})]})]})})]})]}),s.jsx("div",{className:"border-t border-gray-200 p-4 bg-gray-50 flex justify-end",children:s.jsx("button",{onClick:t,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"Fermer"})})]})}):null},vN=({isOpen:e,onClose:t,medecinId:r,motif:n,onSelectDateTime:i,patientInfo:a})=>{const[l,o]=g.useState(!1),[c,u]=g.useState(null),[m,h]=g.useState(null),f=async()=>{if(!n.trim()){h("Veuillez renseigner le motif avant d'utiliser l'assistant IA");return}try{o(!0),h(null);const N=await fetch("http://192.168.1.114:8000/api/planning/suggest-smart-datetime",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({medecin_id:r,motif:n,patient_info:a})});if(!N.ok){const z=await N.json();throw new Error(z.detail||"Erreur lors de la génération des suggestions")}const C=await N.json();u(C)}catch(N){console.error("❌ Erreur Smart DateTime:",N),h(N.message||"Erreur lors de l'analyse IA de planification")}finally{o(!1)}},j=N=>{i(N.date,N.time),fetch("http://192.168.1.114:8000/api/planning/validate-planning",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({medecin_id:r,date:N.date,selected_slot:N.time})}).catch(console.error),t()},y=N=>{switch(N==null?void 0:N.toLowerCase()){case"urgent":return"text-red-600 bg-red-50 border-red-200";case"modere":return"text-orange-600 bg-orange-50 border-orange-200";case"routine":return"text-green-600 bg-green-50 border-green-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},b=N=>{switch(N==null?void 0:N.toLowerCase()){case"optimal":return s.jsx(aw,{className:"w-4 h-4 text-yellow-500"});case"recommande":return s.jsx(sa,{className:"w-4 h-4 text-blue-500"});case"urgence":return s.jsx(wc,{className:"w-4 h-4 text-red-500"});default:return s.jsx(ut,{className:"w-4 h-4 text-green-500"})}},w=N=>{switch(N==null?void 0:N.toLowerCase()){case"optimal":return"bg-gradient-to-r from-yellow-50 to-orange-50 border-yellow-200";case"recommande":return"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200";case"urgence":return"bg-gradient-to-r from-red-50 to-pink-50 border-red-200";default:return"bg-gray-50 border-gray-200"}},x=N=>N>=90?"text-green-600 bg-green-100 border-green-300":N>=75?"text-blue-600 bg-blue-100 border-blue-300":N>=60?"text-orange-600 bg-orange-100 border-orange-300":"text-red-600 bg-red-100 border-red-300",d=N=>{try{return new Date(N).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch{return N}},p=N=>{switch(N==null?void 0:N.toLowerCase()){case"urgent":return"Urgence";case"modere":return"Modéré";case"routine":return"Routine";default:return"Normal"}};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-indigo-50 to-purple-50",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center mr-3",children:s.jsx(Mr,{className:"w-6 h-6 text-indigo-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Planification Intelligente"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Suggestion automatique de date et heure optimales"})]})]}),s.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:s.jsx(Yt,{className:"w-5 h-5 text-gray-500"})})]}),s.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[s.jsxs("h3",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[s.jsx(sa,{className:"w-5 h-5 mr-2"}),"Analyse du motif de consultation :"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Motif :"}),s.jsxs("p",{className:"text-gray-600 mt-1 italic",children:['"',n,'"']})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Patient :"}),s.jsx("p",{className:"text-gray-600 mt-1",children:a?`${a.prenom} ${a.nom}`:"Information générale"})]})]})]}),!c&&!l&&s.jsxs("div",{className:"text-center",children:[s.jsxs("button",{onClick:f,disabled:!n.trim(),className:"inline-flex items-center px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors shadow-sm",children:[s.jsx(Mr,{className:"w-5 h-5 mr-2"}),"Analyser et suggérer date + heure"]}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"L'IA analysera le motif pour suggérer les meilleurs créneaux disponibles"})]}),l&&s.jsxs("div",{className:"text-center py-8",children:[s.jsxs("div",{className:"inline-flex items-center",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-indigo-600 border-t-transparent rounded-full animate-spin mr-3"}),s.jsx("span",{className:"text-gray-600",children:"Analyse intelligente en cours..."})]}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Analyse du motif • Évaluation de l'urgence • Recherche des créneaux optimaux"})]}),m&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(br,{className:"w-5 h-5 text-red-600 mr-2"}),s.jsx("span",{className:"text-red-700 font-medium",children:"Erreur"})]}),s.jsx("p",{className:"text-red-600 mt-1",children:m}),s.jsx("button",{onClick:()=>h(null),className:"mt-3 px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors",children:"Réessayer"})]}),c&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:`rounded-lg p-4 border ${y(c.motif_analysis.urgency_level)}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(br,{className:"w-5 h-5"}),s.jsx("span",{className:"text-xs font-medium",children:"URGENCE"})]}),s.jsx("div",{className:"font-semibold",children:p(c.motif_analysis.urgency_level)})]}),s.jsxs("div",{className:"rounded-lg p-4 border border-blue-200 bg-blue-50 text-blue-600",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(qe,{className:"w-5 h-5"}),s.jsx("span",{className:"text-xs font-medium",children:"DURÉE"})]}),s.jsxs("div",{className:"font-semibold",children:[c.motif_analysis.recommended_duration," min"]})]}),s.jsxs("div",{className:"rounded-lg p-4 border border-purple-200 bg-purple-50 text-purple-600",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(Te,{className:"w-5 h-5"}),s.jsx("span",{className:"text-xs font-medium",children:"DÉLAI"})]}),s.jsx("div",{className:"font-semibold text-xs",children:c.motif_analysis.recommended_delay})]}),s.jsxs("div",{className:"rounded-lg p-4 border border-green-200 bg-green-50 text-green-600",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(sa,{className:"w-5 h-5"}),s.jsx("span",{className:"text-xs font-medium",children:"TYPE"})]}),s.jsx("div",{className:"font-semibold text-xs",children:c.motif_analysis.consultation_type})]})]}),c.urgency_advice&&s.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[s.jsxs("h4",{className:"font-medium text-amber-900 mb-2 flex items-center",children:[s.jsx(wc,{className:"w-4 h-4 mr-2"}),"Conseil d'urgence"]}),s.jsx("p",{className:"text-amber-800 text-sm",children:c.urgency_advice})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(Te,{className:"w-5 h-5 mr-2"}),"Créneaux optimaux recommandés (",c.suggested_slots.length,")"]}),s.jsx("div",{className:"grid gap-4",children:c.suggested_slots.map((N,C)=>s.jsx("div",{className:`border rounded-lg p-4 transition-all hover:shadow-md cursor-pointer group ${w(N.category)}`,onClick:()=>j(N),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center mr-4 shadow-sm",children:b(N.category)}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-1",children:[s.jsx("h4",{className:"font-semibold text-lg text-gray-900",children:d(N.date)}),s.jsx("span",{className:"text-2xl font-bold text-indigo-600",children:N.time})]}),s.jsx("p",{className:"text-gray-600 text-sm mb-2",children:N.reasoning}),s.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[s.jsxs("span",{children:["• Impact: ",N.workload_impact]}),s.jsxs("span",{children:["• ",N.day_context]})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-medium border ${x(N.score)}`,children:[N.score,"%"]}),s.jsxs("button",{className:"opacity-0 group-hover:opacity-100 flex items-center text-indigo-600 hover:text-indigo-700 text-sm font-medium transition-opacity",children:[s.jsx(ut,{className:"w-4 h-4 mr-1"}),"Sélectionner"]})]})]})},C))}),c.suggested_slots.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(Te,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun créneau optimal trouvé"}),s.jsx("p",{className:"text-sm",children:"L'agenda semble complet. Consultez le prochain créneau disponible ci-dessous."})]})]}),c.next_available.date&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsxs("h4",{className:"font-medium text-blue-900 mb-2 flex items-center",children:[s.jsx(qe,{className:"w-4 h-4 mr-2"}),"Prochain créneau disponible"]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{children:s.jsxs("p",{className:"text-blue-800 font-medium",children:[c.next_available.day_name," ",d(c.next_available.date)," à ",c.next_available.time]})}),s.jsx("button",{onClick:()=>j({date:c.next_available.date,time:c.next_available.time,score:0,category:"",reasoning:"",workload_impact:"",day_context:""}),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"Sélectionner"})]})]}),c.optimal_strategy&&s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[s.jsxs("h4",{className:"font-medium text-green-900 mb-2 flex items-center",children:[s.jsx(sa,{className:"w-4 h-4 mr-2"}),"Stratégie de planification recommandée"]}),s.jsx("p",{className:"text-green-800 text-sm",children:c.optimal_strategy})]}),c.global_recommendations.length>0&&s.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[s.jsxs("h4",{className:"font-medium text-purple-900 mb-3 flex items-center",children:[s.jsx(Mr,{className:"w-4 h-4 mr-2"}),"Recommandations intelligentes"]}),s.jsx("ul",{className:"space-y-2",children:c.global_recommendations.map((N,C)=>s.jsxs("li",{className:"flex items-start text-purple-800 text-sm",children:[s.jsx(ut,{className:"w-4 h-4 mr-2 mt-0.5 text-purple-600 flex-shrink-0"}),N]},C))})]}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(br,{className:"w-5 h-5 text-yellow-600 mr-2 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-yellow-800 mb-1",children:"Assistant IA de planification"}),s.jsx("p",{className:"text-yellow-700 text-sm",children:"Ces suggestions sont générées par IA en analysant le motif de consultation. Adaptez selon vos contraintes spécifiques et l'urgence réelle du patient."})]})]})})]})]}),s.jsx("div",{className:"border-t border-gray-200 p-4 bg-gray-50 flex justify-end",children:s.jsx("button",{onClick:t,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"Fermer"})})]})}):null},Xm=()=>{var Q;const{id:e}=Ln(),t=it(),r=Ot(),{user:n}=mt(),i="http://192.168.1.114:8000",l=new URLSearchParams(r.search).get("patient"),o=(Q=r.state)==null?void 0:Q.patientId,[c,u]=g.useState(!1),[m,h]=g.useState(!1),[f,j]=g.useState(null),[y,b]=g.useState(null),[w,x]=g.useState([]),[d,p]=g.useState(""),[N,C]=g.useState(""),[z,E]=g.useState([]),[D,P]=g.useState([]),[S,M]=g.useState(new Set),[R,B]=g.useState(null),te=!!e,U=!!(l||o),W=e||l||o;console.log("🔍 DEBUG RDV PARAMS:",{id:e,patientFromUrl:l,patientFromState:o,finalPatientId:W,isFromPatientDetails:te,hasPatientParam:U,currentUrl:r.pathname+r.search,locationState:r.state});const[O,H]=g.useState({date_rendez_vous:"",heure:"",motif:""}),[J,X]=g.useState({patient:{valid:!1,message:""},date:{valid:!1,message:""},heure:{valid:!1,message:""},motif:{valid:!1,message:""}}),[ne,re]=g.useState(!1),[me,se]=g.useState(!1);g.useEffect(()=>{(async()=>{const I=await F();if(W&&(console.log("🎯 Patient ID détecté:",W),p(W),X(ae=>({...ae,patient:{valid:!0,message:"Patient sélectionné automatiquement"}})),I.length>0)){const ae=I.find(ue=>ue.id===W);ae?(B(ae),console.log("✅ Patient pré-sélectionné pour RDV:",ae)):console.log("⚠️ Patient non trouvé dans la liste:",W)}})(),ee()},[W]),g.useEffect(()=>{if(d&&w.length>0){console.log("🔍 Recherche patient dans liste RDV:",{selectedPatient:d,totalPatients:w.length});const k=w.find(I=>I.id===d);B(k||null),k?console.log("✅ Patient sélectionné trouvé pour RDV:",k):console.log("❌ Patient sélectionné NON trouvé dans la liste")}},[d,w]),g.useEffect(()=>{if(!N.trim())E(w);else{const k=w.filter(I=>{var je;const ae=`${I.prenom} ${I.nom}`.toLowerCase(),ue=((je=I.cin)==null?void 0:je.toLowerCase())||"",be=N.toLowerCase();return ae.includes(be)||ue.includes(be)});E(k)}},[w,N]),g.useEffect(()=>{O.date_rendez_vous&&ie()},[O.date_rendez_vous,D]),g.useEffect(()=>{if(d){const k=w.find(I=>I.id===d);X(I=>({...I,patient:{valid:!0,message:k?`${k.prenom} ${k.nom} sélectionné`:"Patient sélectionné"}}))}else W||X(k=>({...k,patient:{valid:!1,message:"Sélectionnez un patient"}}))},[d,w,W]),g.useEffect(()=>{if(O.date_rendez_vous){const k=new Date(O.date_rendez_vous),I=new Date;if(I.setHours(0,0,0,0),k<I)X(ae=>({...ae,date:{valid:!1,message:"La date ne peut pas être dans le passé"}}));else{const ae=k.getDay();X(ae===0||ae===6?ue=>({...ue,date:{valid:!1,message:"Les rendez-vous ne sont pas disponibles le week-end"}}):ue=>({...ue,date:{valid:!0,message:`Date sélectionnée: ${tt(k,"dd MMMM yyyy",{locale:rt})}`}}))}}else X(k=>({...k,date:{valid:!1,message:"Sélectionnez une date"}}))},[O.date_rendez_vous]),g.useEffect(()=>{if(O.heure&&O.date_rendez_vous){const k=`${O.date_rendez_vous}-${O.heure}`;S.has(k)?X(I=>({...I,heure:{valid:!1,message:"Ce créneau est déjà occupé"}})):X(I=>({...I,heure:{valid:!0,message:`Créneau disponible: ${O.heure}`}}))}else O.heure?X(k=>({...k,heure:{valid:!0,message:`Heure sélectionnée: ${O.heure}`}})):X(k=>({...k,heure:{valid:!1,message:"Sélectionnez une heure"}}))},[O.heure,O.date_rendez_vous,S]),g.useEffect(()=>{O.motif.trim()?O.motif.trim().length<10?X(k=>({...k,motif:{valid:!1,message:"Le motif doit contenir au moins 10 caractères"}})):X(k=>({...k,motif:{valid:!0,message:"Motif valide"}})):X(k=>({...k,motif:{valid:!1,message:"Décrivez le motif du rendez-vous"}}))},[O.motif]);const F=async()=>{try{console.log("🔄 Chargement des patients pour RDV...");const k=await Ge.getAll(1,200);return x(k.items),E(k.items),console.log("✅ Patients chargés pour RDV:",k.items.length),k.items}catch(k){return console.error("Erreur lors du chargement des patients:",k),j("Impossible de charger la liste des patients"),[]}},ee=async()=>{var k,I;try{h(!0);const ae=await At.getAll(1,200);let ue;if((n==null?void 0:n.role)==="medecin")ue=(n==null?void 0:n._id)||(n==null?void 0:n.id);else if((n==null?void 0:n.role)==="secretaire")try{const je=(n==null?void 0:n._id)||(n==null?void 0:n.id),Ze=await fetch(`${i}/users/${je}`);if(Ze.ok){const As=await Ze.json();ue=As.medecin_id||((k=As.medecin)==null?void 0:k.id)||((I=As.medecin)==null?void 0:I._id)}}catch(je){console.error("Erreur lors de la récupération du médecin associé:",je)}const be=ae.items.filter(je=>je.medecin_id===ue&&je.statut!=="annule");P(be),console.log(`✅ ${be.length} rendez-vous existants chargés pour validation`)}catch(ae){console.error("Erreur lors du chargement des rendez-vous existants:",ae)}finally{h(!1)}},ie=()=>{const k=new Set;D.forEach(I=>{if(I.date_rendez_vous===O.date_rendez_vous){const ae=`${I.date_rendez_vous}-${I.heure}`;k.add(ae)}}),M(k),console.log(`📅 Créneaux occupés le ${O.date_rendez_vous}:`,Array.from(k))},A=k=>{const{name:I,value:ae}=k.target;H(ue=>({...ue,[I]:ae}))},Y=k=>{p(k.target.value),C("")},Z=k=>{C(k.target.value),p("")},L=k=>{p(k),C("")},G=(k,I)=>{H(ae=>({...ae,date_rendez_vous:k,heure:I})),se(!1),X(ae=>({...ae,date:{valid:!0,message:`Date sélectionnée par IA: ${k}`},heure:{valid:!0,message:`Heure optimale suggérée: ${I}`}}))},ce=()=>{if(!O.motif.trim()){j("Veuillez renseigner le motif avant d'utiliser l'assistant IA");return}let k;if((n==null?void 0:n.role)==="medecin")k=(n==null?void 0:n._id)||(n==null?void 0:n.id);else if((n==null?void 0:n.role)==="secretaire"){j("Fonction Smart IA temporairement indisponible pour les secrétaires");return}if(!k){j("Impossible de déterminer le médecin pour l'analyse IA");return}j(null),se(!0)},he=k=>{H(I=>({...I,heure:k})),re(!1)},xe=()=>{if(!O.date_rendez_vous||!O.motif.trim()){j("Veuillez renseigner la date et le motif avant d'utiliser l'assistant IA");return}let k;if((n==null?void 0:n.role)==="medecin")k=(n==null?void 0:n._id)||(n==null?void 0:n.id);else if((n==null?void 0:n.role)==="secretaire"){j("Fonction IA non disponible pour les secrétaires pour le moment");return}if(!k){j("Impossible de déterminer le médecin pour l'analyse IA");return}j(null),re(!0)},ve=()=>{if(!d)return j("Veuillez sélectionner un patient"),!1;if(!O.date_rendez_vous||!O.heure||!O.motif.trim())return j("Tous les champs sont obligatoires"),!1;const k=new Date(O.date_rendez_vous),I=new Date;if(I.setHours(0,0,0,0),k<I)return j("La date ne peut pas être dans le passé"),!1;const ae=k.getDay();if(ae===0||ae===6)return j("Les rendez-vous ne sont pas disponibles le week-end"),!1;const ue=`${O.date_rendez_vous}-${O.heure}`;if(S.has(ue))return j("Ce créneau est déjà occupé. Veuillez choisir une autre heure."),!1;const be=D.find(je=>je.patient_id===d&&je.date_rendez_vous===O.date_rendez_vous&&je.statut!=="annule");if(be){const je=w.find(Ze=>Ze.id===d);return j(`${je==null?void 0:je.prenom} ${je==null?void 0:je.nom} a déjà un rendez-vous le ${tt(k,"dd MMMM yyyy",{locale:rt})} à ${be.heure}`),!1}return O.motif.trim().length<10?(j("Le motif du rendez-vous doit contenir au moins 10 caractères"),!1):!0},Pe=async k=>{var ae,ue;if(k.preventDefault(),!ve())return;let I;if((n==null?void 0:n.role)==="medecin")I=(n==null?void 0:n._id)||(n==null?void 0:n.id);else if((n==null?void 0:n.role)==="secretaire")try{const be=(n==null?void 0:n._id)||(n==null?void 0:n.id),je=await fetch(`${i}/users/${be}`);if(!je.ok)throw new Error(`HTTP error! status: ${je.status}`);const Ze=await je.json();if(I=Ze.medecin_id||((ae=Ze.medecin)==null?void 0:ae.id)||((ue=Ze.medecin)==null?void 0:ue._id),!I){console.error("❌ Aucun médecin associé trouvé pour la secrétaire"),j("Erreur: Aucun médecin associé trouvé pour votre compte");return}console.log("👩‍💼 Secrétaire - création RDV pour le médecin:",I)}catch(be){console.error("❌ Erreur lors de la récupération du médecin associé:",be),j("Erreur lors de la récupération des informations du médecin associé");return}else{console.error("❌ Rôle utilisateur non autorisé:",n==null?void 0:n.role),j("Erreur: Rôle utilisateur non autorisé");return}if(!I){console.error("❌ Aucun médecin trouvé"),j("Erreur: Aucun médecin trouvé");return}console.log("👨‍⚕️ DEBUG CREATION RDV:"),console.log("- User connecté:",n),console.log("- ID du médecin utilisé:",I),console.log("- Patient sélectionné:",d),console.log("- Date:",O.date_rendez_vous),console.log("- Heure:",O.heure);try{u(!0),j(null);const be={patient_id:d,medecin_id:I,date_rendez_vous:O.date_rendez_vous,heure:O.heure,motif:O.motif.trim(),statut:"programme"};console.log("📤 Données RDV à envoyer:",be),await At.create(be),b("Rendez-vous créé avec succès !"),setTimeout(()=>{t(W?`/patients/id/${W}`:"/rendez-vous")},1500)}catch(be){console.error("❌ Erreur lors de la création du rendez-vous:",be),j("Erreur lors de l'enregistrement du rendez-vous")}finally{u(!1)}},de=Object.values(J).every(k=>k.valid),v=(()=>{const k=[];for(let I=8;I<=18;I++)for(let ae=0;ae<60;ae+=15){const ue=`${I.toString().padStart(2,"0")}:${ae.toString().padStart(2,"0")}`;k.push(ue)}return k})(),_=k=>{if(!O.date_rendez_vous)return!1;const I=`${O.date_rendez_vous}-${k}`;return S.has(I)},T=k=>{const I=J[k];return I.message?I.valid?s.jsx(ut,{className:"w-4 h-4 text-green-500"}):s.jsx(br,{className:"w-4 h-4 text-red-500"}):null},q=k=>{const I=J[k];return I.message?s.jsx("p",{className:`text-xs mt-1 ${I.valid?"text-green-600":"text-red-600"}`,children:I.message}):null};return s.jsxs("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:[s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("button",{onClick:()=>t(W?`/patients/id/${W}`:-1),className:"flex items-center text-gray-600 hover:text-gray-800 mb-4 transition-colors",children:[s.jsx(hn,{className:"w-5 h-5 mr-2"}),W?"Retour aux détails du patient":"Retour"]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mr-4",children:s.jsx(Te,{className:"w-6 h-6 text-green-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Programmer un rendez-vous"}),R&&s.jsxs("p",{className:"text-gray-600 mt-1",children:["Patient: ",R.prenom," ",R.nom," (",R.cin,")"]})]})]})]}),m&&s.jsxs("div",{className:"mb-6 bg-blue-50 border border-blue-200 text-blue-700 px-4 py-3 rounded-lg flex items-center",children:[s.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mr-2"}),"Vérification des créneaux disponibles..."]}),y&&s.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg flex items-center",children:[s.jsx(ut,{className:"w-5 h-5 mr-2"}),y]}),f&&s.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center",children:[s.jsx(br,{className:"w-5 h-5 mr-2"}),f]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:s.jsxs("form",{onSubmit:Pe,className:"space-y-6",children:[W?s.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(qt,{className:"w-5 h-5 text-green-600 mr-2"}),s.jsx(ut,{className:"w-4 h-4 text-green-600 mr-2"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-green-800",children:"Patient sélectionné:"}),R?s.jsxs("div",{className:"text-green-700",children:[R.prenom," ",R.nom," ","(",R.cin,")"]}):s.jsx("div",{className:"text-green-700",children:"Chargement des informations..."})]})]}),s.jsx("button",{type:"button",onClick:()=>{p(""),B(null),X(k=>({...k,patient:{valid:!1,message:"Sélectionnez un patient"}}))},className:"text-sm text-green-600 hover:text-green-800 underline",children:"Changer de patient"})]})}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mr-2",children:"Patient *"}),T("patient")]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx($n,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",placeholder:"Rechercher par nom ou CIN...",value:N,onChange:Z,className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-green-500 focus:border-green-500"})]}),N&&s.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-200 rounded-lg",children:z.length>0?z.map(k=>s.jsxs("button",{type:"button",onClick:()=>L(k.id),className:"w-full text-left px-4 py-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0 transition-colors",children:[s.jsxs("div",{className:"font-medium text-gray-900",children:[k.prenom," ",k.nom]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["CIN: ",k.cin]})]},k.id)):s.jsx("div",{className:"px-4 py-3 text-gray-500 text-center",children:"Aucun patient trouvé"})}),!N&&s.jsxs("select",{value:d,onChange:Y,required:!0,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors ${J.patient.valid?"border-green-300":J.patient.message?"border-red-300":"border-gray-300"}`,children:[s.jsx("option",{value:"",children:"Sélectionner un patient"}),w.map(k=>s.jsxs("option",{value:k.id,children:[k.prenom," ",k.nom," - ",k.cin]},k.id))]}),q("patient")]}),s.jsx("div",{className:"col-span-full",children:s.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-200 rounded-lg p-4 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center mr-3",children:s.jsx(Bs,{className:"w-6 h-6 text-indigo-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-indigo-900",children:"Assistant IA Intelligent"}),s.jsx("p",{className:"text-sm text-indigo-700",children:"Laissez l'IA suggérer automatiquement la date et l'heure optimales selon le motif"})]})]}),s.jsxs("button",{type:"button",onClick:ce,disabled:!O.motif.trim(),className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-medium rounded-lg hover:from-indigo-700 hover:to-purple-700 disabled:from-gray-400 disabled:to-gray-400 disabled:cursor-not-allowed transition-all duration-200 shadow-sm",title:O.motif.trim()?"L'IA analysera le motif pour suggérer les meilleurs créneaux":"Renseignez d'abord le motif de consultation",children:[s.jsx(Bs,{className:"w-5 h-5 mr-2"}),"Suggestion Intelligente"]})]}),O.date_rendez_vous&&O.heure&&s.jsxs("div",{className:"mt-3 flex items-center text-sm text-indigo-600",children:[s.jsx(Bs,{className:"w-4 h-4 mr-1"}),s.jsxs("span",{children:["Créneau sélectionné par IA : ",O.date_rendez_vous," à ",O.heure]})]})]})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("label",{htmlFor:"motif",className:"block text-sm font-medium text-gray-700 mr-2",children:"Motif du rendez-vous *"}),T("motif")]}),s.jsx("textarea",{id:"motif",name:"motif",value:O.motif,onChange:A,placeholder:"Décrivez le motif du rendez-vous (minimum 10 caractères)",required:!0,rows:4,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors resize-vertical ${J.motif.valid?"border-green-300":J.motif.message?"border-red-300":"border-gray-300"}`}),s.jsxs("div",{className:"flex justify-between items-center mt-1",children:[q("motif"),s.jsxs("span",{className:"text-xs text-gray-400",children:[O.motif.length," / 10 min."]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{htmlFor:"date_rendez_vous",className:"block text-sm font-medium text-gray-700",children:"Date du rendez-vous *"}),s.jsxs("div",{className:"flex items-center space-x-1",children:[T("date"),O.date_rendez_vous&&s.jsx("button",{type:"button",onClick:ce,disabled:!O.motif.trim(),className:"text-xs text-indigo-600 hover:text-indigo-700 underline",title:"Réoptimiser avec l'IA",children:"Réoptimiser"})]})]}),s.jsx("input",{type:"date",id:"date_rendez_vous",name:"date_rendez_vous",value:O.date_rendez_vous,onChange:A,min:new Date().toISOString().split("T")[0],required:!0,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors ${J.date.valid?"border-green-300 bg-green-50":J.date.message?"border-red-300":"border-gray-300"}`}),q("date")]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{htmlFor:"heure",className:"block text-sm font-medium text-gray-700",children:"Heure *"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[T("heure"),O.date_rendez_vous&&s.jsxs("button",{type:"button",onClick:xe,disabled:!O.date_rendez_vous||!O.motif.trim(),className:"inline-flex items-center px-2 py-1 bg-purple-600 text-white text-xs rounded hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",title:"Optimiser les créneaux pour cette date",children:[s.jsx(Mr,{className:"w-3 h-3 mr-1"}),"Optimiser"]})]})]}),s.jsxs("select",{id:"heure",name:"heure",value:O.heure,onChange:A,required:!0,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors ${J.heure.valid?"border-green-300 bg-green-50":J.heure.message?"border-red-300":"border-gray-300"}`,children:[s.jsx("option",{value:"",children:"Sélectionnez une heure"}),v.map(k=>{const I=_(k);return s.jsxs("option",{value:k,disabled:I,className:I?"text-gray-400 bg-gray-100":"",children:[k," ",I?"(Occupé)":""]},k)})]}),q("heure"),O.date_rendez_vous&&O.heure&&s.jsxs("div",{className:"mt-2 p-2 bg-indigo-50 border border-indigo-200 rounded text-sm",children:[s.jsxs("div",{className:"flex items-center text-indigo-700",children:[s.jsx(Bs,{className:"w-4 h-4 mr-1"}),s.jsx("span",{className:"font-medium",children:"Suggestion IA active"})]}),s.jsx("div",{className:"text-indigo-600 text-xs mt-1",children:"Créneau optimisé selon l'analyse du motif de consultation"})]}),O.date_rendez_vous&&S.size>0&&s.jsxs("div",{className:"mt-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx(qe,{className:"w-4 h-4 text-yellow-600 mr-2"}),s.jsxs("span",{className:"text-xs font-medium text-yellow-800",children:["Créneaux occupés le"," ",tt(new Date(O.date_rendez_vous),"dd MMMM yyyy",{locale:rt})," ",":"]})]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:Array.from(S).filter(k=>k.startsWith(O.date_rendez_vous)).map(k=>{const I=k.split("-")[1];return s.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-700 px-2 py-1 rounded",children:I},k)})})]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6",children:[s.jsxs("button",{type:"submit",disabled:!de||c||m,className:`flex items-center justify-center px-6 py-3 rounded-lg font-medium transition-colors shadow-sm ${de&&!c&&!m?"bg-green-600 text-white hover:bg-green-700":"bg-gray-400 text-white cursor-not-allowed"}`,children:[c?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):s.jsx(In,{className:"w-5 h-5 mr-2"}),c?"Programmation...":"Programmer le rendez-vous"]}),s.jsx("button",{type:"button",onClick:()=>t(W?`/patients/id/${W}`:"/rendez-vous"),disabled:c,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Annuler"})]})]})}),s.jsxs("div",{className:"mt-4 text-sm text-gray-500 flex items-center",children:[s.jsx("span",{className:"mr-2",children:"* Champs obligatoires"}),de&&s.jsxs("div",{className:"flex items-center text-green-600",children:[s.jsx(ut,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:"Formulaire valide"})]})]}),!de&&s.jsx("div",{className:"mt-4 bg-orange-50 border border-orange-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(br,{className:"w-5 h-5 text-orange-600 mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-orange-800 mb-2",children:"Vérifications requises :"}),s.jsxs("ul",{className:"text-sm text-orange-700 space-y-1",children:[!J.patient.valid&&s.jsxs("li",{children:["•"," ",J.patient.message||"Sélectionnez un patient"]}),!J.date.valid&&s.jsxs("li",{children:["•"," ",J.date.message||"Sélectionnez une date valide"]}),!J.heure.valid&&s.jsxs("li",{children:["•"," ",J.heure.message||"Choisissez une heure disponible"]}),!J.motif.valid&&s.jsxs("li",{children:["•"," ",J.motif.message||"Décrivez le motif (min. 10 caractères)"]})]})]})]})}),s.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0",children:"ℹ️"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"Informations importantes"}),s.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[s.jsx("li",{children:"• Les créneaux disponibles sont de 8h00 à 18h45 par tranches de 15 minutes"}),s.jsx("li",{children:"• Les rendez-vous ne sont pas disponibles le week-end"}),s.jsx("li",{children:"• Le système vérifie automatiquement les conflits d'horaires"}),s.jsx("li",{children:"• Un patient ne peut avoir qu'un seul rendez-vous par jour"}),s.jsx("li",{children:"• 🧠 L'assistant IA intelligent peut suggérer automatiquement la date et l'heure optimales"}),s.jsx("li",{children:"• ⚡ Deux modes : Suggestion globale (motif seul) ou optimisation d'une date spécifique"}),!W&&s.jsx("li",{children:"• Utilisez la barre de recherche pour trouver rapidement un patient"}),W&&s.jsx("li",{children:"• Le patient a été automatiquement sélectionné selon le contexte"})]})]})]})}),O.date_rendez_vous&&D.length>0&&s.jsxs("div",{className:"mt-6 bg-gray-50 border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx(Te,{className:"w-5 h-5 text-gray-600 mr-2"}),s.jsxs("h4",{className:"text-sm font-medium text-gray-800",children:["Activité du"," ",tt(new Date(O.date_rendez_vous),"dd MMMM yyyy",{locale:rt})]})]}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:Array.from(S).filter(k=>k.startsWith(O.date_rendez_vous)).length}),s.jsx("div",{className:"text-xs text-gray-500",children:"Créneaux occupés"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:v.length-Array.from(S).filter(k=>k.startsWith(O.date_rendez_vous)).length}),s.jsx("div",{className:"text-xs text-gray-500",children:"Créneaux disponibles"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:v.length}),s.jsx("div",{className:"text-xs text-gray-500",children:"Total créneaux"})]})]})]}),s.jsx("div",{className:"mt-6 bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"w-6 h-6 text-indigo-600 mt-0.5 mr-3 flex-shrink-0",children:s.jsx(Bs,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-indigo-800 mb-2",children:"Guide d'utilisation de l'Assistant IA"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-indigo-700",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium mb-1",children:"🧠 Suggestion Intelligente"}),s.jsxs("ul",{className:"space-y-1 text-xs",children:[s.jsx("li",{children:"• Analysez le motif pour suggérer date + heure"}),s.jsx("li",{children:"• Détection automatique de l'urgence"}),s.jsx("li",{children:"• Optimisation globale du planning"})]})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium mb-1",children:"⚡ Optimisation Ciblée"}),s.jsxs("ul",{className:"space-y-1 text-xs",children:[s.jsx("li",{children:"• Optimise les créneaux d'une date précise"}),s.jsx("li",{children:"• Analyse de la charge de travail"}),s.jsx("li",{children:"• Suggestions de pauses optimales"})]})]})]})]})]})})]}),s.jsx(vN,{isOpen:me,onClose:()=>se(!1),medecinId:((n==null?void 0:n.role)==="medecin"?(n==null?void 0:n._id)||(n==null?void 0:n.id):"")||"",motif:O.motif,onSelectDateTime:G,patientInfo:R}),s.jsx(yN,{isOpen:ne,onClose:()=>re(!1),medecinId:((n==null?void 0:n.role)==="medecin"?(n==null?void 0:n._id)||(n==null?void 0:n.id):"")||"",dateRendezVous:O.date_rendez_vous,motif:O.motif,onSelectSlot:he,existingSlots:Array.from(S).filter(k=>k.startsWith(O.date_rendez_vous)).map(k=>k.split("-")[1])})]})},bN=()=>{const e=it(),{user:t}=mt(),[r,n]=g.useState(!1),[i,a]=g.useState(!1),[l,o]=g.useState({nom:"",email:"",password:"",role:"secretaire",medecin_id:""}),[c,u]=g.useState(null);g.useEffect(()=>{if(console.log("Médecin connecté:",t),console.log("Structure complète:",JSON.stringify(t,null,2)),t){const y=t.id||t._id||t.user_id;console.log("ID trouvé:",y),y?(o(b=>({...b,medecin_id:y})),u(null)):(console.log("ID non trouvé dans:",Object.keys(t)),u("Erreur: ID du médecin non trouvé dans les données utilisateur"))}else console.log("Aucun utilisateur connecté"),u("Erreur: Impossible de récupérer les informations du médecin connecté")},[t]);const m=y=>{const{name:b,value:w}=y.target;o(x=>({...x,[b]:w})),c&&u(null)},h=()=>l.nom.trim()?l.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)?l.password?l.password.length<6?(u("Le mot de passe doit contenir au moins 6 caractères"),!1):l.medecin_id?!0:(u("Erreur: ID du médecin manquant. Veuillez vous reconnecter."),!1):(u("Le mot de passe est obligatoire"),!1):(u("Format d'email invalide"),!1):(u("L'email est obligatoire"),!1):(u("Le nom est obligatoire"),!1),f=async y=>{if(y.preventDefault(),!!h())try{n(!0),u(null),console.log("Données envoyées:",l),await vr.create(l),e("/")}catch(b){console.error("Erreur complète:",b),u(b instanceof Error?b.message:"Erreur lors de la création de l'utilisateur")}finally{n(!1)}},j=l.nom&&l.email&&l.password&&l.role&&l.medecin_id&&t;return s.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("button",{onClick:()=>e("/"),className:"flex items-center text-gray-600 hover:text-gray-800 mb-4 transition-colors",children:[s.jsx(hn,{className:"w-5 h-5 mr-2"}),"Retour à l'accueil"]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mr-4",children:s.jsx(e0,{className:"w-6 h-6 text-purple-600"})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Ajouter Secrétaire"})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[c&&s.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("p",{className:"text-red-700 text-sm",children:c})}),s.jsxs("form",{onSubmit:f,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"nom",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom complet *"}),s.jsx("input",{type:"text",id:"nom",name:"nom",value:l.nom,onChange:m,placeholder:"Ex: Marie Dupont",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Adresse email *"}),s.jsx("input",{type:"email",id:"email",name:"email",value:l.email,onChange:m,placeholder:"exemple@clinic.fr",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Mot de passe *"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:i?"text":"password",id:"password",name:"password",value:l.password,onChange:m,placeholder:"Minimum 6 caractères",required:!0,className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors"}),s.jsx("button",{type:"button",onClick:()=>a(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors",children:i?s.jsx(Ru,{className:"w-5 h-5"}):s.jsx(kr,{className:"w-5 h-5"})})]}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Le mot de passe doit contenir au moins 6 caractères"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-2",children:"Rôle *"}),s.jsx("select",{id:"role",name:"role",value:l.role,onChange:m,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors",children:s.jsx("option",{value:"secretaire",children:"Secrétaire"})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Médecin associé"}),s.jsx("div",{className:"w-full px-4 py-3 border border-gray-200 rounded-lg bg-gray-50",children:t?s.jsxs("p",{className:"text-gray-700",children:[s.jsxs("span",{className:"font-medium",children:["Dr. ",t.nom]}),s.jsxs("span",{className:"text-gray-500 ml-2",children:["(",t.email,")"]})]}):s.jsx("p",{className:"text-gray-500",children:"Chargement..."})}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Ce secrétaire sera automatiquement associé à votre compte"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6",children:[s.jsxs("button",{type:"submit",disabled:!j||r,className:"flex items-center justify-center px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors shadow-sm",children:[r?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):s.jsx(In,{className:"w-5 h-5 mr-2"}),r?"Création...":"Créer Secrétaire"]}),s.jsx("button",{type:"button",onClick:()=>e("/"),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"})]})]})]})]})})},wN=()=>{const e=it(),{user:t}=mt(),r="http://192.168.1.114:8000",[n,i]=g.useState(new Date),[a,l]=g.useState([]),[o,c]=g.useState(null),[u,m]=g.useState([]),[h,f]=g.useState(!0),[j,y]=g.useState(!1),[b,w]=g.useState([]),[x,d]=g.useState([]),[p,N]=g.useState(null),C=["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],z=["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],E=F=>{const ee=F.getFullYear(),ie=(F.getMonth()+1).toString().padStart(2,"0"),A=F.getDate().toString().padStart(2,"0");return`${ee}-${ie}-${A}`},D=F=>[...F].sort((ee,ie)=>{const A=L=>{if(!L)return 0;const[G,ce]=L.split(":").map(he=>parseInt(he,10));return G*60+(ce||0)},Y=A(ee.heure),Z=A(ie.heure);return Y-Z}),P=async()=>{var ie,A;const F=(t==null?void 0:t._id)||(t==null?void 0:t.id),ee=t==null?void 0:t.role;if(console.log("👤 Utilisateur connecté:",{id:F,role:ee,nom:t==null?void 0:t.nom}),ee==="medecin")return console.log("👨‍⚕️ Utilisateur est médecin, ID:",F),F;if(ee==="secretaire")try{const Y=await fetch(`${r}/users/${F}`);if(!Y.ok)throw new Error(`HTTP error! status: ${Y.status}`);const Z=await Y.json(),L=Z.medecin_id||((ie=Z.medecin)==null?void 0:ie.id)||((A=Z.medecin)==null?void 0:A._id);return console.log("👩‍💼 Secrétaire - données utilisateur:",Z),console.log("👩‍💼 Secrétaire - médecin associé ID:",L),L||(console.error("❌ Aucun médecin associé trouvé pour la secrétaire"),null)}catch(Y){return console.error("❌ Erreur lors de la récupération du médecin de la secrétaire:",Y),null}return console.log("⚠️ Rôle utilisateur non reconnu ou non autorisé:",ee),null},S=async()=>{try{console.log("🔄 Chargement des données de référence...");const F=await P();if(!F)return console.error("❌ Impossible de déterminer le médecin cible"),{patients:[],medecins:[],targetMedecinId:null};const[ee,ie]=await Promise.all([Ge.getAll(1,200),vr.getAll()]),A=ee.items,Y=ie.filter(G=>G.role==="medecin"),Z=Y.find(G=>G._id===F||G.id===F),L=A.filter(G=>{var xe,ve;const he=(G.medecin_id||((xe=G.medecin)==null?void 0:xe.id)||((ve=G.medecin)==null?void 0:ve._id))===F;return he&&console.log(`✅ Patient ${G.nom} ${G.prenom} appartient au médecin`),he});return w(L),d(Y),N(Z||null),console.log("✅ Données de référence chargées:",{targetMedecinId:F,targetMedecinNom:Z==null?void 0:Z.nom,totalPatients:A.length,medecinPatients:L.length,totalMedecins:Y.length}),{patients:L,medecins:Y,targetMedecinId:F,targetMedecin:Z}}catch(F){return console.error("❌ Erreur lors du chargement des données de référence:",F),{patients:[],medecins:[],targetMedecinId:null,targetMedecin:null}}},M=(F,ee,ie)=>F.map(A=>{const Y=ee.find(G=>G.id===A.patient_id),Z=ie.find(G=>G._id===A.medecin_id||G.id===A.medecin_id),L={id:A.id,_id:A._id,date_rendez_vous:A.date_rendez_vous,heure:A.heure,motif:A.motif,statut:A.statut,medecin_id:A.medecin_id,patient_id:A.patient_id,patient_nom:Y?`${Y.prenom} ${Y.nom}`:"Patient inconnu",medecin_nom:Z?Z.nom:"Médecin inconnu",medecin:Z||A.medecin,patient:Y||A.patient};return Y||console.log(`⚠️ Patient non trouvé pour RDV ${A.id}: patient_id=${A.patient_id}`),Z||console.log(`⚠️ Médecin non trouvé pour RDV ${A.id}: medecin_id=${A.medecin_id}`),L}),R=(F,ee)=>{if(!ee)return console.log("⚠️ Aucun médecin cible, pas de filtrage"),[];F.length>0&&console.log("🔍 Structure du premier RDV reçu:",{id:F[0].id,_id:F[0]._id,medecin_id:F[0].medecin_id,medecin:F[0].medecin,allKeys:Object.keys(F[0])});const ie=F.filter(A=>{var L,G;let Y=A.medecin_id;if(!Y&&A.medecin&&(Y=((L=A.medecin)==null?void 0:L._id)||((G=A.medecin)==null?void 0:G.id),console.log(`🔄 medecin_id non trouvé, utilisation de apt.medecin.id: ${Y}`)),!Y)return console.log(`⚠️ RDV ${A.id||A._id}: Aucun medecin_id trouvé`),!1;const Z=Y===ee;return console.log(`🔍 RDV ${A.id||A._id}: medecin_id=${Y} == ${ee} ? ${Z}`),Z});return console.log(`✅ Rendez-vous filtrés: ${ie.length} sur ${F.length} pour le médecin ${ee}`),ie},B={getAppointmentsByMonth:async(F,ee,ie,A,Y)=>{try{console.log(`Récupération des rendez-vous pour ${F}/${ee+1}`);const Z=await fetch(`${r}/appointments?page=1&size=200`);if(console.log(`Statut de la réponse: ${Z.status}`),!Z.ok){const ve=await Z.text();throw console.error(`Erreur HTTP ${Z.status}:`,ve),new Error(`HTTP error! status: ${Z.status}`)}const L=await Z.json();console.log("Données rendez-vous reçues:",L);const ce=(L.items||[]).filter(ve=>{if(!ve.date_rendez_vous)return!1;const Pe=new Date(ve.date_rendez_vous),de=Pe.getFullYear(),V=Pe.getMonth();return de===F&&V===ee});console.log("Rendez-vous du mois bruts:",ce);const he=M(ce,ie,A);return R(he,Y)}catch(Z){return console.error("Erreur lors de la récupération des rendez-vous du mois:",Z),[]}},getAppointmentsByDate:async(F,ee,ie,A)=>{try{console.log(`Récupération des rendez-vous pour: ${F}`);const Y=await fetch(`${r}/appointments?page=1&size=200`);if(!Y.ok)throw new Error(`HTTP error! status: ${Y.status}`);const G=((await Y.json()).items||[]).filter(ve=>ve.date_rendez_vous?ve.date_rendez_vous.split("T")[0]===F:!1);console.log("Rendez-vous du jour bruts:",G);const ce=M(G,ee,ie),he=R(ce,A);return D(he)}catch(Y){return console.error("Erreur lors de la récupération des rendez-vous du jour:",Y),[]}}};g.useEffect(()=>{te()},[n]);const te=async()=>{try{f(!0);const F=n.getFullYear(),ee=n.getMonth();console.log("=== FETCH APPOINTMENTS ==="),console.log("currentDate:",n),console.log(`year: ${F}, month JS: ${ee}, month API: ${ee+1}`);const{patients:ie,medecins:A,targetMedecinId:Y}=await S();if(!Y){console.error("❌ Impossible de charger les rendez-vous sans médecin cible"),l([]);return}const Z=await B.getAppointmentsByMonth(F,ee,ie,A,Y);console.log(`${Z.length} rendez-vous chargés pour le médecin:`,Z),l(Z)}catch(F){console.error("Erreur lors du chargement des rendez-vous:",F),l([])}finally{f(!1)}},U=async F=>{const ee=E(F);console.log(`Clic sur la date: ${ee} (date originale: ${F})`),c(ee);try{y(!0);const ie=b.length>0?b:[],A=x.length>0?x:[],Y=await P();if(!Y){console.error("❌ Impossible de charger les rendez-vous du jour sans médecin cible"),m([]);return}const Z=await B.getAppointmentsByDate(ee,ie,A,Y);console.log(`Rendez-vous reçus pour ${ee} (triés par heure):`,Z),m(Z)}catch(ie){console.error("Erreur lors du chargement des rendez-vous du jour:",ie),m([])}finally{y(!1)}},W=(F,ee)=>{ee&&ee.stopPropagation();const ie=F._id||F.id;console.log("🔗 Navigation vers détails RDV:",ie),e(`/rendez-vous/${ie}`)},O=()=>{c(null),m([])},H=F=>{const ee=new Date(n);F==="prev"?ee.setMonth(ee.getMonth()-1):ee.setMonth(ee.getMonth()+1),i(ee)},J=()=>{const F=n.getFullYear(),ee=n.getMonth(),ie=new Date(F,ee,1),A=new Date(ie);A.setDate(A.getDate()-ie.getDay());const Y=[],Z=new Date(A);for(let L=0;L<42;L++){const G=E(Z),ce=a.filter(he=>(console.log(`Comparaison: ${he.date_rendez_vous} === ${G} ?`,he.date_rendez_vous===G),he.date_rendez_vous===G));console.log(`Date ${G}: ${ce.length} rendez-vous trouvés`),Y.push({date:new Date(Z),isCurrentMonth:Z.getMonth()===ee,appointments:D(ce)}),Z.setDate(Z.getDate()+1)}return Y},X=F=>{switch(F){case"programme":return"bg-blue-100 text-blue-800";case"confirme":return"bg-green-100 text-green-800";case"termine":return"bg-gray-100 text-gray-800";case"annule":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},ne=F=>{switch(F){case"programme":return"Programmé";case"confirme":return"Confirmé";case"termine":return"Terminé";case"annule":return"Annulé";default:return F}},re=J(),me=E(new Date);console.log(`Total des rendez-vous du médecin dans le state: ${a.length}`),console.log("Tous les rendez-vous du médecin:",a);const se=(t==null?void 0:t.role)==="secretaire"&&p?`${p.nom} (via ${t.nom})`:(t==null?void 0:t.nom)||"Inconnu";return s.jsxs("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:[s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center mr-4",children:s.jsx(Te,{className:"w-6 h-6 text-indigo-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:(t==null?void 0:t.role)==="secretaire"?"Calendrier Médecin":"Mon Calendrier"}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Dr. ",se]}),(t==null?void 0:t.role)==="secretaire"&&s.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Connecté en tant que secrétaire"})]})]}),s.jsx("button",{onClick:()=>e("/"),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Retour à l'accueil"})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"bg-indigo-600 text-white p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{onClick:()=>H("prev"),className:"p-2 hover:bg-indigo-700 rounded-lg transition-colors",children:s.jsx(tw,{className:"w-5 h-5"})}),s.jsxs("h2",{className:"text-xl font-semibold",children:[C[n.getMonth()]," ",n.getFullYear()]}),s.jsx("button",{onClick:()=>H("next"),className:"p-2 hover:bg-indigo-700 rounded-lg transition-colors",children:s.jsx(rw,{className:"w-5 h-5"})})]})}),s.jsx("div",{className:"grid grid-cols-7 bg-gray-50 border-b border-gray-200",children:z.map(F=>s.jsx("div",{className:"p-4 text-center text-sm font-medium text-gray-700",children:F},F))}),h?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Chargement de votre calendrier..."})]}):s.jsx("div",{className:"grid grid-cols-7",children:re.map((F,ee)=>{const ie=E(F.date),A=ie===me,Y=F.appointments.length>0;return console.log(`Jour ${ie}: ${F.appointments.length} rendez-vous, isCurrentMonth: ${F.isCurrentMonth}`),s.jsxs("div",{onClick:()=>U(F.date),className:`
                      min-h-[120px] p-2 border-b border-r border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors
                      ${F.isCurrentMonth?"":"bg-gray-50 text-gray-400"}
                      ${A?"bg-blue-50":""}
                    `,children:[s.jsxs("div",{className:`
                      text-sm font-medium mb-2
                      ${A?"text-blue-600":F.isCurrentMonth?"text-gray-900":"text-gray-400"}
                    `,children:[F.date.getDate(),Y&&F.isCurrentMonth&&s.jsx("span",{className:"ml-1 text-xs bg-indigo-500 text-white rounded-full px-1",children:F.appointments.length})]}),Y&&F.isCurrentMonth&&s.jsxs("div",{className:"space-y-1",children:[F.appointments.slice(0,2).map(Z=>s.jsx("div",{onClick:L=>W(Z,L),className:`
                              text-xs px-2 py-1 rounded-md truncate cursor-pointer hover:opacity-80 transition-opacity
                              ${X(Z.statut)}
                            `,title:`${Z.heure} - ${Z.patient_nom} (Cliquer pour voir les détails)`,children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(qe,{className:"w-3 h-3 mr-1"}),Z.heure," - ",Z.patient_nom]})},Z._id||Z.id)),F.appointments.length>2&&s.jsxs("div",{className:"text-xs text-gray-500 px-2",children:["+",F.appointments.length-2," autres"]})]})]},ee)})})]}),s.jsxs("div",{className:"mt-6 bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Légende des statuts"}),s.jsxs("div",{className:"flex flex-wrap gap-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-100 rounded mr-2"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Programmé"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 bg-green-100 rounded mr-2"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Confirmé"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 bg-gray-100 rounded mr-2"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Terminé"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 bg-red-100 rounded mr-2"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Annulé"})]})]})]})]}),o&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[s.jsxs("div",{className:"bg-indigo-600 text-white p-6 flex items-center justify-between",children:[s.jsxs("h3",{className:"text-xl font-semibold",children:[(t==null?void 0:t.role)==="secretaire"?"Rendez-vous du médecin":"Mes rendez-vous"," ","du"," ",new Date(o).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),s.jsx("button",{onClick:O,className:"p-1 hover:bg-indigo-700 rounded-lg transition-colors",children:s.jsx(Yt,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:j?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Chargement des rendez-vous..."})]}):u.length>0?s.jsx("div",{className:"space-y-4",children:u.map(F=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>W(F),children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(qe,{className:"w-5 h-5 text-indigo-600 mr-2"}),s.jsx("span",{className:"font-bold text-lg text-gray-900",children:F.heure})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${X(F.statut)}`,children:ne(F.statut)}),s.jsx("button",{onClick:ee=>W(F,ee),className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded transition-colors",title:"Voir les détails",children:s.jsx(kr,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(qt,{className:"w-4 h-4 text-gray-500 mr-3"}),s.jsxs("span",{className:"text-gray-700 font-medium",children:["Patient: ",F.patient_nom]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ei,{className:"w-4 h-4 text-gray-500 mr-3"}),s.jsxs("span",{className:"text-gray-700",children:["Médecin: ",F.medecin_nom]})]}),F.motif&&s.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:[s.jsxs("span",{className:"text-sm font-medium text-gray-600",children:["Motif de consultation:"," "]}),s.jsx("span",{className:"text-sm text-gray-900",children:F.motif})]})]}),s.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-100 text-xs text-gray-500 flex items-center",children:[s.jsx(kr,{className:"w-3 h-3 mr-1"}),"Cliquer pour voir les détails complets du rendez-vous"]})]},F._id||F.id))}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Te,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun rendez-vous"}),s.jsx("p",{className:"text-gray-600",children:"Aucun rendez-vous programmé pour cette date"}),s.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Date sélectionnée:"," ",new Date(o).toLocaleDateString("fr-FR")]}),(t==null?void 0:t.role)==="secretaire"&&s.jsx("p",{className:"text-xs text-blue-600 mt-2",children:"Affichage des rendez-vous du médecin associé"})]})}),u.length>0&&s.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[s.jsxs("span",{children:[u.length," rendez-vous programmé",u.length>1?"s":""]}),s.jsx("span",{className:"text-xs",children:"Triés par heure croissante"})]})})]})})]})},jN=()=>{var E,D;const{id:e}=Ln(),t=it(),[r,n]=g.useState(null),[i,a]=g.useState(null),[l,o]=g.useState(null),[c,u]=g.useState(!0),[m,h]=g.useState(!1),[f,j]=g.useState("programme"),[y,b]=g.useState(null);g.useEffect(()=>{w()},[e]);const w=async()=>{if(e)try{u(!0),console.log("🔍 Fetching RDV details for ID:",e);let P;try{P=await At.getById(e)}catch(S){console.log("Première tentative échouée, essai avec parseInt:",S),P=await At.getById(parseInt(e))}console.log("✅ RDV chargé:",P),n(P),j(P.statut),await x(P)}catch(P){console.error("❌ Erreur complète:",P),b(`Erreur lors du chargement des détails du rendez-vous: ${P.message||"Inconnu"}`)}finally{u(!1)}},x=async P=>{try{if(P.patient_id&&(!P.patient||!P.patient.nom)){console.log("🔄 Chargement données patient:",P.patient_id);try{const S=await Ge.getById(P.patient_id);console.log("✅ Patient chargé:",S),a(S)}catch(S){console.warn("⚠️ Erreur chargement patient:",S)}}else a(P.patient||null);if(P.medecin_id&&(!P.medecin||!P.medecin.nom)){console.log("🔄 Chargement données médecin:",P.medecin_id);try{const M=(await vr.getAll()).find(R=>R._id===P.medecin_id||R.id===P.medecin_id);console.log("✅ Médecin trouvé:",M),o(M||null)}catch(S){console.warn("⚠️ Erreur chargement médecin:",S)}}else o(P.medecin||null)}catch(S){console.warn("⚠️ Erreur chargement données liées:",S)}},d=async()=>{if(!(!r||f===r.statut))try{h(!0),console.log("🔄 Mise à jour statut:",{appointmentId:r.id||r._id,newStatus:f});const P=r._id||r.id;let S;try{S=await At.update(P,{statut:f})}catch(M){console.log("Première tentative échouée, essai avec parseInt:",M),S=await At.update(parseInt(P),{statut:f})}n(M=>M?{...M,statut:f}:null),alert("Statut mis à jour avec succès")}catch(P){console.error("❌ Erreur mise à jour:",P),b(`Erreur lors de la mise à jour du statut: ${P.message||"Inconnu"}`)}finally{h(!1)}},p=P=>{switch(P){case"programme":return"bg-blue-100 text-blue-800 border-blue-200";case"confirme":return"bg-green-100 text-green-800 border-green-200";case"termine":return"bg-gray-100 text-gray-800 border-gray-200";case"annule":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},N=P=>{switch(P){case"programme":return"Programmé";case"termine":return"Terminé";case"annule":return"Annulé";default:return P}},C=P=>new Date(P).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"});if(c)return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Chargement des détails..."})]})});if(y||!r)return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600 mb-4",children:y||"Rendez-vous non trouvé"}),s.jsx("button",{onClick:()=>t("/rendez-vous"),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Retour aux rendez-vous"})]})});const z=f!==r.statut;return s.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("button",{onClick:()=>t(-1),className:"flex items-center text-gray-600 hover:text-gray-800 mb-4 transition-colors",children:[s.jsx(hn,{className:"w-5 h-5 mr-2"}),"Retour"]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center mr-4",children:s.jsx(Te,{className:"w-6 h-6 text-indigo-600"})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Détails du Rendez-vous"})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-indigo-700 text-white p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-semibold mb-2",children:["Rendez-vous #",r._id||r.id]}),s.jsxs("p",{className:"text-indigo-100",children:[C(r.date_rendez_vous)," à"," ",r.heure]})]}),s.jsx("div",{className:`px-4 py-2 rounded-full border ${p(r.statut)}`,children:s.jsx("span",{className:"font-medium",children:N(r.statut)})})]})}),s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(qt,{className:"w-5 h-5 text-gray-500 mr-2"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Informations Patient"})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Nom du patient"}),s.jsx("p",{className:"text-lg text-gray-900 font-medium",children:i?`${i.prenom} ${i.nom}`:r!=null&&r.patient?`${r.patient.prenom} ${r.patient.nom}`:"Non renseigné"}),((i==null?void 0:i.cin)||((E=r==null?void 0:r.patient)==null?void 0:E.cin))&&s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["CIN: ",(i==null?void 0:i.cin)||((D=r==null?void 0:r.patient)==null?void 0:D.cin)]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(Ei,{className:"w-5 h-5 text-gray-500 mr-2"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Informations Médecin"})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Nom du médecin"}),s.jsx("p",{className:"text-lg text-gray-900 font-medium",children:l?l.nom:r!=null&&r.medecin?r.medecin.nom:"Non renseigné"})]})]})]}),s.jsxs("div",{className:"mt-8 space-y-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(zt,{className:"w-5 h-5 text-gray-500 mr-2"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Détails du Rendez-vous"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Date"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Te,{className:"w-4 h-4 text-gray-500 mr-2"}),s.jsx("p",{className:"text-gray-900",children:C(r.date_rendez_vous)})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Heure"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(qe,{className:"w-4 h-4 text-gray-500 mr-2"}),s.jsx("p",{className:"text-gray-900",children:r.heure})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Motif de consultation"}),s.jsx("p",{className:"text-gray-900",children:r.motif})]}),r.created_at&&s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Date de création"}),s.jsx("p",{className:"text-gray-700",children:new Date(r.created_at).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),s.jsxs("div",{className:"mt-8 border-t border-gray-200 pt-8",children:[s.jsx("div",{className:"flex items-center mb-4",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Gestion du Statut"})}),s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-2",children:"Modifier le statut du rendez-vous"}),s.jsxs("select",{id:"status",value:f,onChange:P=>j(P.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors",children:[s.jsx("option",{value:"programme",children:"Programmé"}),s.jsx("option",{value:"termine",children:"Terminé"}),s.jsx("option",{value:"annule",children:"Annulé"})]})]}),z&&s.jsxs("button",{onClick:d,disabled:m,className:"flex items-center px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:[m?s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):s.jsx(In,{className:"w-4 h-4 mr-2"}),m?"Mise à jour...":"Sauvegarder"]})]}),z&&s.jsx("div",{className:"mt-3 text-sm text-amber-700",children:s.jsxs("p",{children:['⚠️ Le statut sera modifié de "',N(r.statut),'" vers "',N(f),'"']})})]})]}),s.jsx("div",{className:"mt-8 border-t border-gray-200 pt-8",children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("button",{onClick:()=>t(`/patients/id/${r.patient_id}`),className:"flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx(qt,{className:"w-4 h-4 mr-2"}),"Voir le patient"]}),s.jsxs("button",{onClick:()=>t(`/consultations/nouvelle?patient=${r.patient_id}`),className:"flex items-center justify-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[s.jsx(zt,{className:"w-4 h-4 mr-2"}),"Nouvelle consultation"]})]})})]})]})]})})},NN=()=>{const e=it(),[t,r]=g.useState([]),[n,i]=g.useState(!0),[a,l]=g.useState(null),[o,c]=g.useState(!1),[u,m]=g.useState(!1),[h,f]=g.useState(null),[j,y]=g.useState({nom:"",email:"",password:"",role:"medecin"});g.useEffect(()=>{b()},[]);const b=async()=>{var E,D;try{i(!0),f(null);const P=await vr.getAll();console.log("Raw data from API:",P);const S=P.map(M=>M._id&&!M.id?{...M,id:M._id,_id:void 0}:M).filter(M=>M&&typeof M=="object"&&M.id&&M.nom&&M.email&&M.role&&M.role!=="admin");console.log("Valid users after filtering:",S),r(S)}catch(P){console.error("API Error:",P),((E=P.response)==null?void 0:E.status)===403?f("Accès interdit. Vous devez être administrateur pour voir cette page."):((D=P.response)==null?void 0:D.status)===401?f("Non autorisé. Veuillez vous reconnecter."):f("Erreur lors du chargement des utilisateurs. Vérifiez votre connexion."),r([])}finally{i(!1)}},w=E=>{const D={...E,password:"",medecin_id:"medecin_id"in E?E.medecin_id:void 0};l(D),f(null)},x=()=>{l(null),f(null)},d=async()=>{var E,D,P;if(a)try{f(null);const S={nom:a.nom,email:a.email,role:a.role};if(a.changePassword&&a.password&&a.password.trim()!==""?S.password=a.password:S.password="",a.role==="secretaire"){const B=a.medecin_id,te=t.find(O=>O.id===a.id),U=te&&"medecin_id"in te?te.medecin_id:null,W=B||U;if(!W){f("Veuillez sélectionner un médecin pour ce secrétaire");return}S.medecin_id=W}else S.medecin_id=null;console.log("Sending update data:",S);const M=await vr.update(a.id,S);console.log("Updated user from API:",M);const R={...M,id:M._id?M._id:M.id};R._id&&delete R._id,R.role!=="admin"?r(B=>B.map(te=>te.id===a.id?R:te)):r(B=>B.filter(te=>te.id!==a.id)),l(null),alert("Utilisateur mis à jour avec succès")}catch(S){if(console.error("Update error:",S),console.error("Error response:",(E=S.response)==null?void 0:E.data),(P=(D=S.response)==null?void 0:D.data)!=null&&P.detail)if(Array.isArray(S.response.data.detail)){const M=S.response.data.detail.map(R=>{var B;return`${(B=R.loc)==null?void 0:B.join(".")}: ${R.msg}`}).join(", ");f(`Erreur de validation: ${M}`)}else f(`Erreur: ${S.response.data.detail}`);else f("Erreur lors de la mise à jour")}},p=async E=>{var D,P;if(confirm("Êtes-vous sûr de vouloir supprimer cet utilisateur ?"))try{f(null),await vr.delete(E),r(S=>S.filter(M=>M.id!==E)),alert("Utilisateur supprimé avec succès")}catch(S){console.error("Delete error:",S),(P=(D=S.response)==null?void 0:D.data)!=null&&P.detail?f(`Erreur: ${S.response.data.detail}`):f("Erreur lors de la suppression")}},N=async E=>{var D,P;E.preventDefault();try{f(null);const S=await vr.create(j);S.role!=="admin"&&r(M=>[...M,S]),y({nom:"",email:"",password:"",role:"medecin"}),c(!1),alert("Utilisateur créé avec succès")}catch(S){console.error("Create error:",S),(P=(D=S.response)==null?void 0:D.data)!=null&&P.detail?f(`Erreur: ${S.response.data.detail}`):f(S instanceof Error?S.message:"Erreur lors de la création")}},C=E=>{switch(E){case"admin":return"bg-red-100 text-red-800";case"medecin":return"bg-blue-100 text-blue-800";case"secretaire":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},z=E=>{switch(E){case"admin":return"Administrateur";case"medecin":return"Médecin";case"secretaire":return"Secrétaire";default:return E}};return n?s.jsx("div",{className:"bg-gray-50 py-8 px-4 min-h-96 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Chargement des utilisateurs..."})]})}):s.jsx("div",{className:"bg-gray-50 py-8 px-4",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mr-4",children:s.jsx(Ks,{className:"w-6 h-6 text-red-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Administration des Utilisateurs"}),s.jsx("p",{className:"text-gray-600",children:"Gérer les médecins et secrétaires"})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("button",{onClick:()=>c(!0),className:"flex items-center px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors shadow-sm",children:[s.jsx(Vr,{className:"w-5 h-5 mr-2"}),"Ajouter un utilisateur"]}),s.jsx("button",{onClick:()=>e("/admin/dashboard"),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Retour au dashboard"})]})]})}),h&&s.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:[s.jsx("p",{className:"text-red-700 text-sm",children:h}),s.jsx("button",{onClick:()=>f(null),className:"mt-2 text-red-600 hover:text-red-800 text-sm underline",children:"Fermer"})]}),o&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Ajouter un utilisateur"}),s.jsx("button",{onClick:()=>c(!1),className:"p-1 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(Yt,{className:"w-5 h-5"})})]})}),s.jsxs("form",{onSubmit:N,className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom complet *"}),s.jsx("input",{type:"text",value:j.nom,onChange:E=>y(D=>({...D,nom:E.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),s.jsx("input",{type:"email",value:j.email,onChange:E=>y(D=>({...D,email:E.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mot de passe *"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:u?"text":"password",value:j.password,onChange:E=>y(D=>({...D,password:E.target.value})),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",required:!0}),s.jsx("button",{type:"button",onClick:()=>m(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:u?s.jsx(Ru,{className:"w-4 h-4"}):s.jsx(kr,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rôle *"}),s.jsxs("select",{value:j.role,onChange:E=>y(D=>({...D,role:E.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"medecin",children:"Médecin"}),s.jsx("option",{value:"secretaire",children:"Secrétaire"})]})]}),j.role==="secretaire"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Médecin associé *"}),s.jsxs("select",{value:j.medecin_id||"",onChange:E=>y(D=>({...D,medecin_id:E.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",required:j.role==="secretaire",children:[s.jsx("option",{value:"",children:"Sélectionner un médecin"}),t.filter(E=>E.role==="medecin").map(E=>s.jsx("option",{value:E.id,children:E.nom},E.id))]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Créer"}),s.jsx("button",{type:"button",onClick:()=>c(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"})]})]})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Vt,{className:"w-6 h-6 text-red-600 mr-3"}),s.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Liste des Utilisateurs (",t.length,")"]})]})}),t.length>0?s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Utilisateur"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rôle"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[t.map((E,D)=>!E||!E.id||!E.nom||!E.email?(console.warn("Invalid user data skipped:",E),null):s.jsxs("tr",{className:D%2===0?"bg-white":"bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(a==null?void 0:a.id)===E.id?s.jsxs("div",{className:"space-y-2",children:[s.jsx("input",{type:"text",value:a.nom||"",onChange:P=>l(S=>S?{...S,nom:P.target.value}:null),className:"w-full px-2 py-1 border border-gray-300 rounded focus:ring-2 focus:ring-red-500 focus:border-transparent"}),s.jsx("div",{className:"text-xs",children:s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:a.changePassword||!1,onChange:P=>l(S=>S?{...S,changePassword:P.target.checked,password:P.target.checked?S.password:""}:null),className:"mr-2"}),"Changer le mot de passe"]})}),a.changePassword&&s.jsx("input",{type:"password",placeholder:"Nouveau mot de passe",value:a.password||"",onChange:P=>l(S=>S?{...S,password:P.target.value}:null),className:"w-full px-2 py-1 border border-gray-300 rounded focus:ring-2 focus:ring-red-500 focus:border-transparent text-xs"})]}):s.jsx("div",{className:"text-sm font-medium text-gray-900",children:E.nom})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(a==null?void 0:a.id)===E.id?s.jsx("input",{type:"email",value:a.email||"",onChange:P=>l(S=>S?{...S,email:P.target.value}:null),className:"w-full px-2 py-1 border border-gray-300 rounded focus:ring-2 focus:ring-red-500 focus:border-transparent"}):s.jsx("div",{className:"text-sm text-gray-900",children:E.email})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(a==null?void 0:a.id)===E.id?s.jsx("div",{className:"space-y-2",children:s.jsxs("select",{value:a.role||"medecin",onChange:P=>l(S=>S?{...S,role:P.target.value}:null),className:"w-full px-2 py-1 border border-gray-300 rounded focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[s.jsx("option",{value:"medecin",children:"Médecin"}),s.jsx("option",{value:"secretaire",children:"Secrétaire"})]})}):s.jsxs("div",{className:"space-y-1",children:[s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C(E.role)}`,children:z(E.role)}),E.role==="secretaire"&&"medecin_id"in E&&E.medecin_id&&s.jsxs("div",{className:"text-xs text-gray-500",children:["Médecin:"," ",(()=>{const P=t.find(S=>S.id===E.medecin_id);return P?P.nom:"Médecin introuvable"})()]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(a==null?void 0:a.id)===E.id?s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:d,className:"text-green-600 hover:text-green-800 transition-colors",title:"Sauvegarder",children:s.jsx(In,{className:"w-4 h-4"})}),s.jsx("button",{onClick:x,className:"text-gray-600 hover:text-gray-800 transition-colors",title:"Annuler",children:s.jsx(Yt,{className:"w-4 h-4"})})]}):s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>w(E),className:"text-red-600 hover:text-red-800 transition-colors",title:"Modifier",children:s.jsx(wr,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>p(E.id),className:"text-red-600 hover:text-red-800 transition-colors",title:"Supprimer",children:s.jsx(Pt,{className:"w-4 h-4"})})]})})]},E.id)).filter(Boolean)," "]})]})}):s.jsxs("div",{className:"p-12 text-center",children:[s.jsx(Vt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:h?"Impossible de charger les utilisateurs":"Aucun utilisateur trouvé"}),h&&s.jsx("button",{onClick:b,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Réessayer"})]})]}),s.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center mr-4",children:s.jsx(Vt,{className:"w-5 h-5 text-gray-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-4",children:s.jsx(Vt,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Médecins"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(E=>E.role==="medecin").length})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center mr-4",children:s.jsx(Vt,{className:"w-5 h-5 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Secrétaires"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(E=>E.role==="secretaire").length})]})]})})]})]})})},SN=()=>{const{id:e}=Ln(),t=it(),{user:r}=mt(),n="http://192.168.1.114:8000",[i,a]=g.useState(!0),[l,o]=g.useState(!1),[c,u]=g.useState(!1),[m,h]=g.useState(null),[f,j]=g.useState(null),[y,b]=g.useState(null),[w,x]=g.useState([]),[d,p]=g.useState(""),[N,C]=g.useState(""),[z,E]=g.useState([]),[D,P]=g.useState([]),[S,M]=g.useState(new Set),[R,B]=g.useState({date_rendez_vous:"",heure:"",motif:"",statut:"programme"}),[te,U]=g.useState({date_rendez_vous:"",heure:"",motif:"",statut:"programme",patient_id:""}),[W,O]=g.useState({patient:{valid:!0,message:""},date:{valid:!0,message:""},heure:{valid:!0,message:""},motif:{valid:!0,message:""},statut:{valid:!0,message:""}});g.useEffect(()=>{e&&H()},[e]),g.useEffect(()=>{J(),X()},[]),g.useEffect(()=>{if(!N.trim())E(w);else{const V=w.filter(v=>{var Q;const _=`${v.prenom} ${v.nom}`.toLowerCase(),T=((Q=v.cin)==null?void 0:Q.toLowerCase())||"",q=N.toLowerCase();return _.includes(q)||T.includes(q)});E(V)}},[w,N]),g.useEffect(()=>{R.date_rendez_vous&&ne()},[R.date_rendez_vous,D,e]),g.useEffect(()=>{re()},[R,d,S]);const H=async()=>{var V,v;try{a(!0),console.log("📋 Chargement du rendez-vous ID:",e);const _=await At.getById(e);console.log("✅ Données RDV reçues:",_),console.log("🔍 Type de date_rendez_vous:",typeof _.date_rendez_vous,_.date_rendez_vous);let T=!1;if((r==null?void 0:r.role)==="medecin"){const k=(r==null?void 0:r._id)||(r==null?void 0:r.id);T=_.medecin_id===k}else if((r==null?void 0:r.role)==="secretaire")try{const k=(r==null?void 0:r._id)||(r==null?void 0:r.id),I=await fetch(`${n}/users/${k}`);if(I.ok){const ae=await I.json(),ue=ae.medecin_id||((V=ae.medecin)==null?void 0:V.id)||((v=ae.medecin)==null?void 0:v._id);T=_.medecin_id===ue,console.log("👩‍💼 Secrétaire - vérification permission RDV:",{rdvMedecinId:_.medecin_id,medecinAssocie:ue,hasPermission:T})}}catch(k){console.error("❌ Erreur lors de la vérification des permissions:",k),T=!1}if(!T){h("Vous n'êtes pas autorisé à modifier ce rendez-vous");return}let q=_.date_rendez_vous;if(_.date_rendez_vous instanceof Date)q=_.date_rendez_vous.toISOString().split("T")[0],console.log("📅 Date convertie de Date vers string:",q);else if(typeof _.date_rendez_vous=="string")q=_.date_rendez_vous.split("T")[0],console.log("📅 Date extraite de string:",q);else try{q=new Date(_.date_rendez_vous).toISOString().split("T")[0],console.log("📅 Date créée et convertie:",q)}catch{console.error("❌ Impossible de convertir la date:",_.date_rendez_vous),q=""}b(_);const Q={date_rendez_vous:q,heure:_.heure,motif:_.motif,statut:_.statut};B(Q),U({...Q,patient_id:_.patient_id}),p(_.patient_id),console.log("✅ Formulaire pré-rempli:",Q)}catch(_){console.error("❌ Erreur lors du chargement du rendez-vous:",_),h("Impossible de charger les données du rendez-vous")}finally{a(!1)}},J=async()=>{try{const V=await Ge.getAll(1,200);x(V.items),E(V.items)}catch(V){console.error("Erreur lors du chargement des patients:",V)}},X=async()=>{var V,v;try{o(!0);const _=await At.getAll(1,200);let T;if((r==null?void 0:r.role)==="medecin")T=(r==null?void 0:r._id)||(r==null?void 0:r.id);else if((r==null?void 0:r.role)==="secretaire")try{const Q=(r==null?void 0:r._id)||(r==null?void 0:r.id),k=await fetch(`${n}/users/${Q}`);if(k.ok){const I=await k.json();T=I.medecin_id||((V=I.medecin)==null?void 0:V.id)||((v=I.medecin)==null?void 0:v._id)}}catch(Q){console.error("Erreur lors de la récupération du médecin associé:",Q)}const q=_.items.filter(Q=>Q.medecin_id===T&&Q.statut!=="annule"&&Q.id!==e);P(q),console.log(`✅ ${q.length} autres rendez-vous chargés pour validation`)}catch(_){console.error("Erreur lors du chargement des rendez-vous existants:",_)}finally{o(!1)}},ne=()=>{const V=new Set;D.forEach(v=>{if(v.date_rendez_vous===R.date_rendez_vous){const _=`${v.date_rendez_vous}-${v.heure}`;V.add(_)}}),M(V),console.log(`📅 Créneaux occupés le ${R.date_rendez_vous}:`,Array.from(V))},re=()=>{const V={...W};if(d){const v=w.find(_=>_.id===d);V.patient={valid:!0,message:v?`${v.prenom} ${v.nom}`:"Patient sélectionné"}}else V.patient={valid:!1,message:"Sélectionnez un patient"};if(R.date_rendez_vous){const v=new Date(R.date_rendez_vous),_=new Date;if(_.setHours(0,0,0,0),v<_)V.date={valid:!1,message:"La date ne peut pas être dans le passé"};else{const T=v.getDay();T===0||T===6?V.date={valid:!1,message:"Pas de RDV le week-end"}:V.date={valid:!0,message:tt(v,"dd MMMM yyyy",{locale:rt})}}}else V.date={valid:!1,message:"Sélectionnez une date"};if(R.heure&&R.date_rendez_vous){const v=`${R.date_rendez_vous}-${R.heure}`,_=te.date_rendez_vous===R.date_rendez_vous&&te.heure===R.heure;S.has(v)&&!_?V.heure={valid:!1,message:"Ce créneau est déjà occupé"}:V.heure={valid:!0,message:`Créneau: ${R.heure}`}}else R.heure?V.heure={valid:!0,message:`Heure: ${R.heure}`}:V.heure={valid:!1,message:"Sélectionnez une heure"};R.motif.trim()?R.motif.trim().length<10?V.motif={valid:!1,message:"Minimum 10 caractères requis"}:V.motif={valid:!0,message:"Motif valide"}:V.motif={valid:!1,message:"Décrivez le motif"},V.statut={valid:!0,message:`Statut: ${Y(R.statut)}`},O(V)},me=V=>{const{name:v,value:_}=V.target;B(T=>({...T,[v]:_}))},se=V=>{p(V.target.value),C("")},F=V=>{C(V.target.value)},ee=V=>{p(V),C("")},ie=()=>{if(!d)return h("Veuillez sélectionner un patient"),!1;if(!R.date_rendez_vous||!R.heure||!R.motif.trim())return h("Tous les champs sont obligatoires"),!1;const V=new Date(R.date_rendez_vous),v=new Date;if(v.setHours(0,0,0,0),V<v)return h("La date ne peut pas être dans le passé"),!1;const _=V.getDay();if(_===0||_===6)return h("Les rendez-vous ne sont pas disponibles le week-end"),!1;const T=`${R.date_rendez_vous}-${R.heure}`,q=te.date_rendez_vous===R.date_rendez_vous&&te.heure===R.heure;if(S.has(T)&&!q)return h("Ce créneau est déjà occupé. Veuillez choisir une autre heure."),!1;if(d!==te.patient_id||R.date_rendez_vous!==te.date_rendez_vous){const Q=D.find(k=>k.patient_id===d&&k.date_rendez_vous===R.date_rendez_vous&&k.statut!=="annule"&&k.id!==e);if(Q){const k=w.find(I=>I.id===d);return h(`${k==null?void 0:k.prenom} ${k==null?void 0:k.nom} a déjà un autre rendez-vous le ${tt(V,"dd MMMM yyyy",{locale:rt})} à ${Q.heure}`),!1}}return R.motif.trim().length<10?(h("Le motif du rendez-vous doit contenir au moins 10 caractères"),!1):!0},A=async V=>{if(V.preventDefault(),!!ie())try{u(!0),h(null);const v={patient_id:d,medecin_id:y.medecin_id,date_rendez_vous:R.date_rendez_vous,heure:R.heure,motif:R.motif.trim(),statut:R.statut};console.log("📤 Données de modification à envoyer:",v),await At.update(e,v),j("Rendez-vous modifié avec succès !"),setTimeout(()=>{t("/rendez-vous")},1500)}catch(v){console.error("❌ Erreur lors de la modification:",v),h("Erreur lors de la modification du rendez-vous")}finally{u(!1)}},Y=V=>{switch(V){case"programme":return"Programmé";case"confirme":return"Confirmé";case"annule":return"Annulé";case"termine":return"Terminé";default:return V}},Z=V=>{switch(V){case"programme":return"bg-blue-100 text-blue-800";case"confirme":return"bg-green-100 text-green-800";case"annule":return"bg-red-100 text-red-800";case"termine":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},L=V=>{try{if(!V)return"Date inconnue";let v;return V instanceof Date?v=V:v=new Date(V),isNaN(v.getTime())?"Date invalide":tt(v,"dd MMMM yyyy",{locale:rt})}catch(v){return console.error("Erreur de formatage de date:",v),"Date invalide"}},G=Object.values(W).every(V=>V.valid),ce=JSON.stringify({...R,patient_id:d})!==JSON.stringify(te),xe=(()=>{const V=[];for(let v=8;v<=18;v++)for(let _=0;_<60;_+=30){const T=`${v.toString().padStart(2,"0")}:${_.toString().padStart(2,"0")}`;V.push(T)}return V})(),ve=V=>{if(!R.date_rendez_vous)return!1;const v=`${R.date_rendez_vous}-${V}`,_=te.date_rendez_vous===R.date_rendez_vous&&te.heure===V;return S.has(v)&&!_},Pe=V=>{const v=W[V];return v.message?v.valid?s.jsx(ut,{className:"w-4 h-4 text-green-500"}):s.jsx(br,{className:"w-4 h-4 text-red-500"}):null},de=V=>{const v=W[V];return v.message?s.jsx("p",{className:`text-xs mt-1 ${v.valid?"text-green-600":"text-red-600"}`,children:v.message}):null};return i?s.jsxs("div",{className:"flex items-center justify-center h-64",children:[s.jsx(pt,{size:"lg"}),s.jsx("span",{className:"ml-3 text-gray-600",children:"Chargement du rendez-vous..."})]}):y?s.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("button",{onClick:()=>t(-1),className:"flex items-center text-gray-600 hover:text-gray-800 mb-4 transition-colors",children:[s.jsx(hn,{className:"w-5 h-5 mr-2"}),"Retour"]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mr-4",children:s.jsx(wr,{className:"w-6 h-6 text-orange-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Modifier le rendez-vous"}),y.patient&&s.jsxs("p",{className:"text-gray-600",children:["Patient: ",y.patient.prenom," ",y.patient.nom," ","•",L(y.date_rendez_vous)," à"," ",y.heure]})]})]})]}),s.jsx("div",{className:"mb-6 bg-white rounded-lg border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 mr-3",children:"Statut actuel:"}),s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Z(y.statut)}`,children:Y(y.statut)})]}),ce&&s.jsxs("div",{className:"flex items-center text-orange-600",children:[s.jsx(br,{className:"w-4 h-4 mr-1"}),s.jsx("span",{className:"text-sm",children:"Modifications non sauvegardées"})]})]})}),l&&s.jsxs("div",{className:"mb-6 bg-blue-50 border border-blue-200 text-blue-700 px-4 py-3 rounded-lg flex items-center",children:[s.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mr-2"}),"Vérification des créneaux disponibles..."]}),f&&s.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg flex items-center",children:[s.jsx(ut,{className:"w-5 h-5 mr-2"}),f]}),m&&s.jsx(pn,{message:m,onDismiss:()=>h(null)}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:s.jsxs("form",{onSubmit:A,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mr-2",children:"Patient *"}),Pe("patient")]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx($n,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",placeholder:"Rechercher par nom ou CIN...",value:N,onChange:F,className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-orange-500 focus:border-orange-500"})]}),N&&s.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-200 rounded-lg",children:z.length>0?z.map(V=>s.jsxs("button",{type:"button",onClick:()=>ee(V.id),className:"w-full text-left px-4 py-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0 transition-colors",children:[s.jsxs("div",{className:"font-medium text-gray-900",children:[V.prenom," ",V.nom]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["CIN: ",V.cin]})]},V.id)):s.jsx("div",{className:"px-4 py-3 text-gray-500 text-center",children:"Aucun patient trouvé"})}),!N&&s.jsxs("select",{value:d,onChange:se,required:!0,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors ${W.patient.valid?"border-green-300":W.patient.message?"border-red-300":"border-gray-300"}`,children:[s.jsx("option",{value:"",children:"Sélectionner un patient"}),w.map(V=>s.jsxs("option",{value:V.id,children:[V.prenom," ",V.nom," - ",V.cin]},V.id))]}),de("patient")]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("label",{htmlFor:"date_rendez_vous",className:"block text-sm font-medium text-gray-700 mr-2",children:"Date du rendez-vous *"}),Pe("date")]}),s.jsx("input",{type:"date",id:"date_rendez_vous",name:"date_rendez_vous",value:R.date_rendez_vous,onChange:me,min:new Date().toISOString().split("T")[0],required:!0,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors ${W.date.valid?"border-green-300":W.date.message?"border-red-300":"border-gray-300"}`}),de("date")]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("label",{htmlFor:"heure",className:"block text-sm font-medium text-gray-700 mr-2",children:"Heure *"}),Pe("heure")]}),s.jsxs("select",{id:"heure",name:"heure",value:R.heure,onChange:me,required:!0,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors ${W.heure.valid?"border-green-300":W.heure.message?"border-red-300":"border-gray-300"}`,children:[s.jsx("option",{value:"",children:"Sélectionnez une heure"}),xe.map(V=>{const v=ve(V),_=te.heure===V;return s.jsxs("option",{value:V,disabled:v,className:v?"text-gray-400 bg-gray-100":_?"font-medium":"",children:[V," ",v?"(Occupé)":_?"(Actuel)":""]},V)})]}),de("heure")]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("label",{htmlFor:"statut",className:"block text-sm font-medium text-gray-700 mr-2",children:"Statut *"}),Pe("statut")]}),s.jsxs("select",{id:"statut",name:"statut",value:R.statut,onChange:me,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",children:[s.jsx("option",{value:"programme",children:"Programmé"}),s.jsx("option",{value:"confirme",children:"Confirmé"}),s.jsx("option",{value:"annule",children:"Annulé"}),s.jsx("option",{value:"termine",children:"Terminé"})]}),de("statut")]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("label",{htmlFor:"motif",className:"block text-sm font-medium text-gray-700 mr-2",children:"Motif du rendez-vous *"}),Pe("motif")]}),s.jsx("textarea",{id:"motif",name:"motif",value:R.motif,onChange:me,placeholder:"Décrivez le motif du rendez-vous (minimum 10 caractères)",required:!0,rows:4,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors resize-vertical ${W.motif.valid?"border-green-300":W.motif.message?"border-red-300":"border-gray-300"}`}),s.jsxs("div",{className:"flex justify-between items-center mt-1",children:[de("motif"),s.jsxs("span",{className:"text-xs text-gray-400",children:[R.motif.length," / 10 min."]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6",children:[s.jsxs("button",{type:"submit",disabled:!G||!ce||c||l,className:`flex items-center justify-center px-6 py-3 rounded-lg font-medium transition-colors shadow-sm ${G&&ce&&!c&&!l?"bg-orange-600 text-white hover:bg-orange-700":"bg-gray-400 text-white cursor-not-allowed"}`,children:[c?s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):s.jsx(In,{className:"w-5 h-5 mr-2"}),c?"Sauvegarde...":"Sauvegarder les modifications"]}),s.jsx("button",{type:"button",onClick:()=>t("/rendez-vous"),disabled:c,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Annuler"}),ce&&s.jsx("button",{type:"button",onClick:()=>{B({date_rendez_vous:te.date_rendez_vous,heure:te.heure,motif:te.motif,statut:te.statut}),p(te.patient_id),C("")},disabled:c,className:"px-6 py-3 border border-orange-300 text-orange-700 rounded-lg hover:bg-orange-50 transition-colors disabled:opacity-50",children:"Réinitialiser"})]})]})}),s.jsxs("div",{className:"mt-4 flex items-center justify-between text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"mr-2",children:"* Champs obligatoires"}),G&&ce&&s.jsxs("div",{className:"flex items-center text-orange-600",children:[s.jsx(ut,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:"Prêt à sauvegarder"})]}),G&&!ce&&s.jsxs("div",{className:"flex items-center text-green-600",children:[s.jsx(ut,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:"Aucune modification"})]})]}),s.jsxs("div",{className:"text-xs text-gray-400",children:["ID: ",y.id]})]}),!G&&s.jsx("div",{className:"mt-4 bg-orange-50 border border-orange-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(br,{className:"w-5 h-5 text-orange-600 mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-orange-800 mb-2",children:"Corrections nécessaires :"}),s.jsxs("ul",{className:"text-sm text-orange-700 space-y-1",children:[!W.patient.valid&&s.jsxs("li",{children:["•"," ",W.patient.message||"Sélectionnez un patient"]}),!W.date.valid&&s.jsxs("li",{children:["•"," ",W.date.message||"Sélectionnez une date valide"]}),!W.heure.valid&&s.jsxs("li",{children:["•"," ",W.heure.message||"Choisissez une heure disponible"]}),!W.motif.valid&&s.jsxs("li",{children:["•"," ",W.motif.message||"Décrivez le motif (min. 10 caractères)"]})]})]})]})}),ce&&G&&s.jsx("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0",children:"📝"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"Modifications détectées :"}),s.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[d!==te.patient_id&&s.jsx("li",{children:"• Patient modifié"}),R.date_rendez_vous!==te.date_rendez_vous&&s.jsxs("li",{children:["• Date modifiée:"," ",tt(new Date(R.date_rendez_vous),"dd MMMM yyyy",{locale:rt})]}),R.heure!==te.heure&&s.jsxs("li",{children:["• Heure modifiée: ",R.heure]}),R.motif!==te.motif&&s.jsx("li",{children:"• Motif modifié"}),R.statut!==te.statut&&s.jsxs("li",{children:["• Statut modifié: ",Y(R.statut)]})]})]})]})}),R.date_rendez_vous&&S.size>0&&s.jsxs("div",{className:"mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx(qe,{className:"w-5 h-5 text-yellow-600 mr-2"}),s.jsxs("h4",{className:"text-sm font-medium text-yellow-800",children:["Créneaux occupés le"," ",tt(new Date(R.date_rendez_vous),"dd MMMM yyyy",{locale:rt})]})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from(S).filter(V=>V.startsWith(R.date_rendez_vous)).map(V=>{const v=V.split("-")[1],_=te.date_rendez_vous===R.date_rendez_vous&&te.heure===v;return s.jsxs("span",{className:`text-xs px-2 py-1 rounded ${_?"bg-blue-100 text-blue-700 font-medium":"bg-yellow-100 text-yellow-700"}`,children:[v," ",_?"(Actuel)":""]},V)})})]}),s.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0",children:"ℹ️"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"Informations sur la modification"}),s.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[s.jsx("li",{children:"• Vous pouvez modifier tous les détails du rendez-vous"}),s.jsx("li",{children:"• Le système vérifie automatiquement les conflits d'horaires"}),s.jsx("li",{children:"• Votre créneau actuel reste disponible durant la modification"}),s.jsx("li",{children:"• Les modifications sont sauvegardées immédiatement"}),s.jsx("li",{children:"• Un patient ne peut avoir qu'un seul rendez-vous par jour"})]})]})]})}),s.jsxs("div",{className:"mt-6 bg-gray-50 border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx(Te,{className:"w-5 h-5 text-gray-600 mr-2"}),s.jsx("h4",{className:"text-sm font-medium text-gray-800",children:"Informations du rendez-vous"})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-600",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Créé le:"})," ",tt(new Date(y.created_at||new Date),"dd/MM/yyyy à HH:mm",{locale:rt})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Médecin:"})," Dr. ",r==null?void 0:r.nom]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"ID:"})," ",y.id]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Statut original:"}),s.jsx("span",{className:`ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Z(y.statut)}`,children:Y(y.statut)})]})]})]})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:s.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[s.jsx(br,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Rendez-vous introuvable"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Le rendez-vous demandé n'existe pas ou n'est plus disponible."}),s.jsx("button",{onClick:()=>t("/rendez-vous"),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Retour aux rendez-vous"})]})})},kN=()=>{const{id:e}=Ln(),t=it(),{user:r,isMedecin:n}=mt(),[i,a]=g.useState(null),[l,o]=g.useState(!0),[c,u]=g.useState(null),[m,h]=g.useState(!1),[f,j]=g.useState(!1);g.useEffect(()=>{e&&y()},[e]);const y=async()=>{try{o(!0),u(null);const d=await js.getById(e),[p,N]=await Promise.all([Ge.getAll(1,200),vr.getAll()]),C=p.items.find(D=>D.id===d.patient_id),z=N.find(D=>D.id===d.medecin_id||D._id===d.medecin_id),E={...d,patient:C,medecin:z};a(E)}catch(d){console.error("❌ Erreur chargement consultation:",d),u("Impossible de charger les détails de la consultation")}finally{o(!1)}},b=async()=>{if(i)try{h(!0),await js.delete(i.id),t("/consultations")}catch(d){console.error("❌ Erreur suppression:",d),u("Erreur lors de la suppression de la consultation")}finally{h(!1),j(!1)}},w=d=>{try{return tt(new Date(d),"dd MMMM yyyy",{locale:rt})}catch{return d}},x=d=>{try{return tt(new Date(d),"dd MMMM yyyy à HH:mm",{locale:rt})}catch{return d}};return l?s.jsxs("div",{className:"flex items-center justify-center h-64",children:[s.jsx(pt,{size:"lg"}),s.jsx("span",{className:"ml-3 text-gray-600",children:"Chargement de la consultation..."})]}):i?s.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("button",{onClick:()=>t("/consultations"),className:"flex items-center text-gray-600 hover:text-gray-800 mb-4 transition-colors",children:[s.jsx(hn,{className:"w-5 h-5 mr-2"}),"Retour aux consultations"]}),s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{className:"flex items-center mb-4 lg:mb-0",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mr-4",children:s.jsx(Ei,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Détails de la consultation"}),s.jsx("p",{className:"text-gray-600",children:w(i.date_consultation)})]})]}),n&&s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsxs("button",{onClick:()=>t(`/consultations/${i.id}/modifier`),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 transition-colors",children:[s.jsx(wr,{className:"h-4 w-4 mr-2"}),"Modifier"]}),s.jsxs("button",{onClick:()=>t("/consultations/nouvelle",{state:{patientId:i.patient_id}}),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 transition-colors",children:[s.jsx(Vr,{className:"h-4 w-4 mr-2"}),"Nouvelle consultation"]}),s.jsxs("button",{onClick:()=>j(!0),className:"inline-flex items-center px-4 py-2 border border-red-300 text-sm font-medium rounded-md shadow-sm text-red-700 bg-white hover:bg-red-50 transition-colors",children:[s.jsx(Pt,{className:"h-4 w-4 mr-2"}),"Supprimer"]})]})]})]}),c&&s.jsx(pn,{message:c,onDismiss:()=>u(null)}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(qt,{className:"w-5 h-5 text-gray-400 mr-2"}),s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Informations patient"})]}),i.patient?s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Nom complet"}),s.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[i.patient.prenom," ",i.patient.nom]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"CIN"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:i.patient.cin})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Date de naissance"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:i.patient.date_naissance?w(i.patient.date_naissance):"Non renseignée"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Téléphone"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:i.patient.telephone||"Non renseigné"})]}),s.jsxs("div",{className:"sm:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Adresse"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:i.patient.adresse||"Non renseignée"})]})]}):s.jsx("p",{className:"text-gray-500",children:"Informations patient non disponibles"}),i.patient&&s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:s.jsxs("button",{onClick:()=>t(`/patients/id/${i.patient_id}`),className:"inline-flex items-center text-blue-600 hover:text-blue-800 text-sm font-medium",children:[s.jsx(ow,{className:"w-4 h-4 mr-1"}),"Voir le dossier complet du patient"]})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(vn,{className:"w-5 h-5 text-gray-400 mr-2"}),s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Détails de la consultation"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-2",children:"Motif de consultation"}),s.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:s.jsx("p",{className:"text-gray-900",children:i.motif})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-2",children:"Symptômes"}),s.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:s.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:i.symptomes})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-2",children:"Diagnostic"}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsx("p",{className:"text-blue-900 font-medium whitespace-pre-wrap",children:i.diagnostic})})]}),i.traitement&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-500 mb-2",children:[s.jsx(sw,{className:"w-4 h-4 inline mr-1"}),"Traitement prescrit"]}),s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:s.jsx("p",{className:"text-green-900 whitespace-pre-wrap",children:i.traitement})})]}),i.notes&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-500 mb-2",children:[s.jsx(zt,{className:"w-4 h-4 inline mr-1"}),"Notes complémentaires"]}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:s.jsx("p",{className:"text-yellow-900 whitespace-pre-wrap",children:i.notes})})]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(Ei,{className:"w-5 h-5 text-gray-400 mr-2"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Informations médicales"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Médecin"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:i.medecin?`Dr. ${i.medecin.nom}`:"Médecin non spécifié"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Date de consultation"}),s.jsxs("div",{className:"mt-1 flex items-center text-sm text-gray-900",children:[s.jsx(Te,{className:"w-4 h-4 mr-2 text-gray-400"}),w(i.date_consultation)]})]}),i.created_at&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Créée le"}),s.jsxs("div",{className:"mt-1 flex items-center text-sm text-gray-500",children:[s.jsx(qe,{className:"w-4 h-4 mr-2 text-gray-400"}),x(i.created_at)]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(ut,{className:"w-5 h-5 text-green-500 mr-2"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Statut"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-3"}),s.jsx("span",{className:"text-sm text-gray-900",children:"Consultation terminée"})]}),s.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Actions rapides"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("button",{onClick:()=>t("/consultations/nouvelle",{state:{patientId:i.patient_id}}),className:"w-full text-left px-3 py-2 text-sm text-blue-600 hover:bg-blue-50 rounded-md transition-colors",children:"Nouvelle consultation pour ce patient"}),s.jsx("button",{onClick:()=>t("/rendez-vous/nouveau",{state:{patientId:i.patient_id}}),className:"w-full text-left px-3 py-2 text-sm text-green-600 hover:bg-green-50 rounded-md transition-colors",children:"Programmer un rendez-vous"}),s.jsx("button",{onClick:()=>t(`/patients/id/${i.patient_id}`),className:"w-full text-left px-3 py-2 text-sm text-purple-600 hover:bg-purple-50 rounded-md transition-colors",children:"Voir le dossier patient"})]})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Informations système"}),s.jsxs("div",{className:"space-y-2 text-xs text-gray-500",children:[s.jsxs("div",{children:["ID Consultation: ",i.id]}),s.jsxs("div",{children:["ID Patient: ",i.patient_id]}),s.jsxs("div",{children:["ID Médecin: ",i.medecin_id]})]})]})]})]}),f&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:s.jsxs("div",{className:"mt-3",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:s.jsx(Pt,{className:"h-6 w-6 text-red-600"})}),s.jsxs("div",{className:"mt-5 text-center",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Supprimer la consultation"}),s.jsxs("div",{className:"mt-2 px-7 py-3",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Êtes-vous sûr de vouloir supprimer cette consultation ? Cette action est irréversible."}),s.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg text-left",children:s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{className:"font-medium text-gray-900",children:i.patient?`${i.patient.prenom} ${i.patient.nom}`:"Patient inconnu"}),s.jsx("div",{className:"text-gray-500",children:w(i.date_consultation)}),s.jsx("div",{className:"text-gray-500 truncate",children:i.motif})]})})]}),s.jsxs("div",{className:"flex gap-3 justify-center",children:[s.jsx("button",{onClick:()=>j(!1),disabled:m,className:"px-4 py-2 bg-gray-300 text-gray-800 text-base font-medium rounded-md shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-300 disabled:opacity-50",children:"Annuler"}),s.jsx("button",{onClick:b,disabled:m,className:"px-4 py-2 bg-red-600 text-white text-base font-medium rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50 inline-flex items-center",children:m?s.jsxs(s.Fragment,{children:[s.jsx(pt,{size:"sm",className:"mr-2"}),"Suppression..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Pt,{className:"h-4 w-4 mr-2"}),"Supprimer"]})})]})]})]})})})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:s.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[s.jsx(Ns,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Consultation introuvable"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"La consultation demandée n'existe pas ou n'est plus disponible."}),s.jsx("button",{onClick:()=>t("/consultations"),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Retour aux consultations"})]})})},_N=()=>s.jsx("div",{className:"app",children:s.jsxs(Hy,{children:[s.jsx($e,{path:"/login",element:s.jsx(Cj,{})}),s.jsx($e,{path:"/dashboard",element:s.jsx(Qe,{children:s.jsx(Ye,{children:s.jsx(cN,{})})})}),s.jsx($e,{path:"/patients",element:s.jsx(Qe,{children:s.jsx(Ye,{children:s.jsx(uN,{})})})}),s.jsx($e,{path:"/patients/nouveau",element:s.jsx(Qe,{children:s.jsx(Ye,{children:s.jsx(Km,{})})})}),s.jsx($e,{path:"/patients/id/:id",element:s.jsx(Qe,{children:s.jsx(Ye,{children:s.jsx(xN,{})})})}),s.jsx($e,{path:"/patients/id/:id/modifier",element:s.jsx(Qe,{allowedRoles:["medecin","secretaire"],children:s.jsx(Ye,{children:s.jsx(Km,{})})})}),s.jsx($e,{path:"/patients/id/:id/consultation",element:s.jsx(Qe,{allowedRoles:["medecin"],children:s.jsx(Ye,{children:s.jsx(Gm,{})})})}),s.jsx($e,{path:"/patients/id/:id/appointment",element:s.jsx(Qe,{allowedRoles:["medecin","secretaire"],children:s.jsx(Ye,{children:s.jsx(Xm,{})})})}),s.jsx($e,{path:"/consultations",element:s.jsx(Qe,{children:s.jsx(Ye,{children:s.jsx(mN,{})})})}),s.jsx($e,{path:"/consultations/nouvelle",element:s.jsx(Qe,{allowedRoles:["medecin"],children:s.jsx(Ye,{children:s.jsx(Gm,{})})})}),s.jsx($e,{path:"/consultations/:id",element:s.jsx(Qe,{children:s.jsx(Ye,{children:s.jsx(kN,{})})})}),s.jsx($e,{path:"/rendez-vous",element:s.jsx(Qe,{children:s.jsx(Ye,{children:s.jsx(fN,{})})})}),s.jsx($e,{path:"/rendez-vous/nouveau",element:s.jsx(Qe,{allowedRoles:["medecin","secretaire"],children:s.jsx(Ye,{children:s.jsx(Xm,{})})})}),s.jsx($e,{path:"/rendez-vous/:id",element:s.jsx(Qe,{children:s.jsx(Ye,{children:s.jsx(jN,{})})})}),s.jsx($e,{path:"/rendez-vous/:id/modifier",element:s.jsx(Qe,{allowedRoles:["medecin","secretaire"],children:s.jsx(Ye,{children:s.jsx(SN,{})})})}),s.jsx($e,{path:"/calendar",element:s.jsx(Qe,{allowedRoles:["medecin","secretaire"],children:s.jsx(Ye,{children:s.jsx(wN,{})})})}),s.jsx($e,{path:"/users/nouveau",element:s.jsx(Qe,{allowedRoles:["medecin"],children:s.jsx(Ye,{children:s.jsx(bN,{})})})}),s.jsx($e,{path:"/admin/users",element:s.jsx(Qe,{allowedRoles:["admin"],children:s.jsx(Ye,{children:s.jsx(NN,{})})})}),s.jsx($e,{path:"/admin/dashboard",element:s.jsx(Qe,{allowedRoles:["admin"],children:s.jsx(Ye,{children:s.jsxs("div",{className:"p-6",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Dashboard Admin"}),s.jsx("p",{children:"Page en construction..."})]})})})}),s.jsx($e,{path:"/",element:s.jsx(mc,{to:"/dashboard",replace:!0})}),s.jsx($e,{path:"*",element:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-4xl font-bold text-gray-900",children:"404"}),s.jsx("p",{className:"text-gray-500 mt-2",children:"Page non trouvée"})]})})})]})});function EN(){return s.jsx(Xb,{children:s.jsx(fv,{children:s.jsx(_N,{})})})}fp(document.getElementById("root")).render(s.jsx(g.StrictMode,{children:s.jsx(EN,{})}));
